/*! ud2 - v1.0.14
 * (c) 2021 Peak(peak@udtwo.com) */

if("undefined"==typeof jQuery)throw new Error("ud2库需要JQuery支持");!function(e,D){"use strict";var t,n,o,i,a,r,s=e.document,l=D(e),L=D(s),c="ud2",N=c+"-",u={},d={},p={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/,mail:/^([\w-\.]+)@(([\w-]+\.)+)([a-zA-Z]{2,4})$/,phone:/^[1][34578][0-9]{9}$/,idCard:/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|97|98|99)[0-9]{4}((?:19|20)?(?:[0-9]{2}(?:(?:0[13578]|1[12])(?:0[1-9]|[12][0-9]|3[01])|(?:0[469]|11)(?:0[1-9]|[12][0-9]|30)|02(?:0[1-9]|1[0-9]|2[0-8]))|(?:[02468][048]|[13579][26])0229)[0-9]{3}[\dxX])$/,loginName:/^[a-zA-Z][a-zA-Z0-9]+$/,percent:/^(100|([0-9]|[1-9][0-9])(\.[0-9]+)?)%$/,nonNegative:/^([0-9]|[1-9][0-9]+)(\.[0-9]+)?$/,naturalNumber:/^([1-9]\d+|[0-9])$/},f={isType:function(t){return function(e){return{}.toString.call(e)==="[object "+t+"]"}},isObject:function(e){return f.isType("Object")(e)},isFunction:function(e){return f.isType("Function")(e)},isString:function(e){return f.isType("String")(e)},isBoolean:function(e){return f.isType("Boolean")(e)},isNumber:function(e){return f.isType("Number")(e)},isNaturalNumber:function(e){return p.naturalNumber.test(e)},isJQuery:function(e){return e instanceof D},isArray:function(e){return Array.isArray(e)},isDatetime:function(e){return e instanceof Date}},j=(o=s.createElement("div"),{ipad:!!(v=e.navigator.userAgent).match(/ipad/i),iphone:!!v.match(/iphone/i),ipod:!!v.match(/ipod/i),mac:!!v.match(/macintosh/i),apple:!!v.match(/(ipad|iphone|ipod|macintosh)/i),android:-1<v.indexOf("Android"),mobile:!!v.match(/mobile|mobi|mini/i),touch:"ontouchstart"in e||e.DocumentTouch&&s instanceof DocumentTouch,pointer:e.navigator.pointerEnabled,msPointer:e.navigator.msPointerEnabled,touchAction:void 0!==o.style.touchAction||void 0!==o.style.msTouchAction||!1,perspective:void 0!==o.style.perspective||void 0!==o.style.msPerspective||void 0!==o.style.mozPerspective||void 0!==o.style.webkitPerspective||!1,transition:void 0!==o.style.transition||void 0!==o.style.msTransition||void 0!==o.style.mozTransition||void 0!==o.style.webkitTransition||!1,animation:void 0!==o.style.animation||void 0!==o.style.msAnimation||void 0!==o.style.mozAnimation||void 0!==o.style.webkitAnimation||!1}),h={isLength:function(e,t,n){return e=M(e),t=void 0===t?Number.MAX_VALUE:t,void 0!==n?(n<t&&(n=t),e.length<=n&&e.length>=t):e.length===t},isMinLength:function(e,t){return t=t||0,(e=M(e)).length>=t},isMaxLength:function(e,t){return e=M(e),t=t||Number.MAX_VALUE,e.length<=t},isPhone:function(e){return e=M(e),p.phone.test(e)},isMail:function(e){return e=M(e),p.mail.test(e)},isDate:function(e){return e=M(e),p.date.test(e)},isLoginName:function(e){return e=M(e),p.loginName.test(e)},isIDCard:function(e){if(e=(e=M(e)).toUpperCase(),p.idCard.test(e)){if(18===e.length){for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=e.split(""),o=0,i=0;i<17;i++)o+=n[i]*t[i];if(["1","0","X","9","8","7","6","5","4","3","2"][o%11]!==n[17])return!1}return!0}return!1}},g=function(){for(var e={},t=["normal","info","success","warning","danger"],n=["","","","",""],o=0,i=t.length;o<i;o++)e[t[o]]={name:t[o],no:o,ico:n[o]};return e}(),v=function(){for(var e={},t=["red","orange","green","blue","yellow","teal","pink","violet","purple","brown","dark","grey","white"],n=0,o=t.length;n<o;n++)e[t[n]]={name:"c-"+t[n],id:t[n]};return e}(),m={pageReady:D.Callbacks(),pageResize:D.Callbacks(),autoClose:D.Callbacks(),keyDown:D.Callbacks(),keyUp:D.Callbacks()},A=((o=[j.pointer?"pointerdown":"MSPointerDown",j.pointer?"pointermove":"MSPointerMove",j.pointer?"pointerup":"MSPointerUp",j.pointer?"pointercancel":"MSPointerCancel","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup","mouseout","mouseenter","mouseleave","keydown","keypress","keyup","focus","blur","click"])[20]=[o[0],o[4],o[8]].join(" "),o[21]="focusin",o[22]="focusout",o[23]=[o[0],o[4],o[8],o[21]].join(" "),o[24]=[o[10],o[13]].join(" "),o),b=[D("<div />"),D("<span />"),D("<a />")],y=/(^[a-z0-9]{1,}|[A-Z][a-z0-9]{0,})/g,w={},C={},O=function(){},x=!1;function M(e){return e?String(e):""}function k(e){var t=e.split("-"),n=1,o=t.length;if(1<o)for(;n<o;n++)0<t[n].length&&(t[n]=t[n].substr(0,1).toUpperCase()+t[n].substr(1));return t.join("")}function F(){return Date.now&&Date.now()||(new Date).getTime()}function T(e){return C[e=e||"id"]||(C[e]=0),"id"===e?N+C[e]++:N+e+"-"+C[e]++}function E(){var t,e,n,o,i=arguments,a=i.length,r=this;if(2===a){if(n=i[0],o=i[1],f.isArray(n)&&f.isFunction(o))return t={},n.forEach(function(e){t[f.isArray(e)?e[0]:e]=function e(t){var n,o,i;if(!f.isArray(t))return t=String(t),n=void 0===(n=void 0===(n=r.userOptions[t])?r.getOriginAttr(t):n)?r.getOriginAttr(t,1):n;for(o=0,i=t.length;o<i;o++)if(void 0!==(n=e(t[o])))return n}(e)}),o(t),t}else if(3===a&&(t=i[0],e=i[1]||{},o=i[2],f.isObject(t)&&f.isObject(e)&&f.isFunction(o)))return o(t=z(t,e)),t;return{}}function I(e){return e=!f.isJQuery(e)?D(e):e}function z(e,t){for(var n in f.isObject(e)||(e={}),t=!f.isObject(t)?{}:t)e[n]=t[n];return e}function S(e){e.each(function(){var t,i=D(this),e=c+"-lazy";i.attr(e)&&i.attr(c,i.attr(e)),e=((e=i).attr(c)||"").split(" "),t=[],e.forEach(function(e){0!==e.length&&t.push(e)}),t.forEach(function(e,t){var n=k(e),o=i.attr(N+e+"-ready"),e=i.attr(N+"id")||null;o||(e?d[n].create(e,i):d[n].create(i))})})}function R(){S(D("["+c+"]"))}function Y(e){var n=this,i={public:{ud2:!0,collection:n.public,type:e,appendTo:function(e){return o(e,function(e){e.last().append(i.current)}),this},prependTo:function(e){return o(e,function(e){e.last().prepend(i.current)}),this},insertBefore:function(e){return o(e,function(e){e.last().before(i.current)}),this},insertAfter:function(e){return o(e,function(e){e.last().after(i.current)}),this},style:function(e){{if(void 0===e)return i.style;for(var t in g)i.style===g[t]&&i.current.removeClass(g[t].name);return i.style=e,i.current.addClass(e.name),i.public}},getCurrent:function(){return i.current}},origin:null,current:b[0].clone(),userOptions:{},getOriginAttr:function(e,t){w[e]||(w[e]=e.match(y).join("-").toString().toLowerCase()),e=w[e];e=t?e:n.className+"-"+e;return i.origin?i.origin.attr(e):null},getOptions:function(){return E.apply(this,arguments)},transferStyles:function(e){t(e,function(e,t){t.attr("style",e.attr("style")).addClass(e.attr("class")),e.removeAttr("style").removeClass()})},transferAttrs:function(e){t(e,function(e,t,n){for(var o,i=e.get(0),a=t.get(0),r=i?i.attributes.length:0,s=new RegExp("^("+n+")"),l=0,c=0;l<r;l++)o=i.attributes[c],s.test(o.name)?(a.setAttribute(o.name,o.value),i.removeAttribute(o.name)):c++})},style:g.normal,autoClose:O,remove:function(){var e,t=this.public.collection.indexOf(this);for(e in m.autoClose.remove(a),this.public.collection.splice(t,1),delete this.public.collection[this.public.id],this.public)delete this.public[e];for(e in this)delete this[e]}};function t(e,t){(e=e||{}).transfer=e.transfer||i.origin||null,e.accept=e.accept||i.current||null,e.attrReg=e.attrReg||null,e.transfer&&e.accept&&t(e.transfer,e.accept,e.attrReg)}function o(e,t){e=e.ud2?e.getCurrent():I(e),(t=t||O)(e)}function a(e){var t,n,o=(e=I(e)).parents();if(e.get(0)!==i.current.get(0)){for(t=0,n=o.length;t<n;t++)if(o.eq(t).get(0)===i.current.get(0))return;i.autoClose()}}return m.autoClose.add(a),i}function q(e,t,n){function o(){return t.apply(o,arguments)}return f.isFunction(t)||(t=O),o.create=t,n?n[e]=o:d[e]=o,o}D(function(){t=D("body"),j.apple&&s.body.addEventListener(A[4],D.noop),m.pageReady.fire(),x=!0,L.on(A[23],function(e){var t="ctrlCloseEvent",n=e.type,o=L.data(t);o&&n!==o||(L.data(t,n),m.autoClose.fire(e.target)),n!==A[8]&&n!==A[21]||L.data(t,null)}),L.on(A[20],".message:not([ud2]) .message-close",function(){D(this).parent().remove()})}),l.on("orientationchange resize",function(){n&&e.clearTimeout(n),n=e.setTimeout(function(){var e=l.width(),t=l.height();m.pageResize.fire(e,t)},60)}),L.on(A[14],function(e){m.keyDown.fire(e,e.keyCode,e.ctrlKey,e.altKey,e.shiftKey)}).on(A[16],function(e){m.keyUp.fire(e,e.keyCode,e.ctrlKey,e.altKey,e.shiftKey)}),m.pageReady.add(R),z(u,{prefix:N,jqe:b,an:{pos:["center","full-screen","top-left","top-right","top-center","bottom-left","bottom-right","bottom-center"],event:A},noop:O,backmask:(i={},a=D('<div class="'+N+'backmask"></div>'),r=[],m.pageReady.add(function(){t.append(a)}),z(i,{open:function(e){return e=e,-1===r.indexOf(e)&&(r.push(e),1)&&a.addClass("on"),i},close:function(e){return e=e,-1<(e=r.indexOf(e))&&(r.splice(e,1),1)&&!r.length&&a.removeClass("on"),i}})),win:function(){return l},body:function(){return t},dom:function(){return L},argsToArray:function(e){return Array.prototype.slice.call(e)},attrValue:function(e,t,n,o){var i;return i=void 0===(i=void 0===(i=(e=I(e)).attr(t))&&n?e.attr(n+"-"+t):i)?o:i},boolCheck:function(e,t){return void 0===e?t:"true"===e||"1"===e||"false"!==e&&"0"!==e&&!!e},options:E,createStyle:function(){for(var e=arguments.length,t=0,n={};t<e;t++)n[arguments[t]]=arguments[t];return n},creater:q,createControlID:T,controlCreater:function(r,e){var t,s={public:[],init:O,name:t=r,ctrlName:k(t),className:N+t},l=q(r,function e(){var t,n,o,i=Y.call(s,r),a=arguments;switch(a.length){case 0:return e.call(l,void 0,void 0,{});case 1:return f.isString(a[0])?e.call(l,a[0],void 0,void 0):f.isJQuery(a[0])?e.call(l,void 0,a[0],void 0):f.isObject(a[0])?e.call(l,void 0,void 0,a[0]):e.call(l);case 2:if(f.isString(a[0])&&(f.isJQuery(a[1])||f.isString(a[1])))return e.call(l,a[0],a[1],void 0);if(f.isString(a[0])&&f.isObject(a[1]))return e.call(l,a[0],void 0,a[1]);if(f.isJQuery(a[0])&&f.isObject(a[1]))return e.call(l,void 0,a[0],a[1]);break;case 3:t=f.isString(a[0])&&0<a[0].length?a[0]:T(),n=I(a[1]).first(),o=f.isObject(a[2])?a[2]:{}}return z(i,{origin:n,userOptions:o}),z(i.public,{id:t}),s.public.push(i.public),s.public[t]=i.public,i.current.attr(c,r).attr(c+"-id",t).attr(s.className+"-ready",!0).addClass(s.className),s.init(i)||i.public});return e(s,l),s.name!==s.ctrlName&&(d[s.ctrlName]=l),l.collection=s.public,l},convertToJQ:I,className:function(n){return function(e,t){return((t=void 0!==t&&t)?".":"")+n+"-"+(e=e||"")}}}),e[c]=z(d,{libExtend:function(e){e(u,d)},callbacks:m,extend:z,merge:function(e,t){var n={};return z(n,e),z(n,t),n},clone:function(e){return z({},e)},propertier:function(t,n){return function(){var e=arguments;return 0===e.length&&t?t.apply(this,e):n?n.apply(this,e):void 0}},deviceScreenState:function(){switch(e.getComputedStyle(e.document.documentElement,"::before").getPropertyValue("content").replace(/(\"|\')/g,"")){case"p":return 0;case"s":return 1;case"m":return 2;case"l":return 3}},time:F,regex:p,type:f,support:j,form:h,color:v,style:g,key:{A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT:37,UP:38,RIGHT:39,DOWN:40,KEY0:48,KEY1:49,KEY2:50,KEY3:51,KEY4:52,KEY5:53,KEY6:54,KEY7:55,KEY8:56,KEY9:57,"`":192,BACK:8,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,ENTER:13,"NUM+":107,"NUM-":109,"NUM*":106,"NUM/":111,"-":189,"=":187,",":188,".":190,"/":191,"\\":220,SHIFT:16,CTRL:17,ALT:18,CAPS:20,TAB:9,"[":219,"]":221,";":186,"'":222,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},createAllControl:R,createLazyControl:function(){S(D("["+c+"-lazy]"))},ready:function(e){f.isFunction(e)&&(x?e():m.pageReady.add(e))},event:function(e,t){var C,x,M,k,n={},T=(E({stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:10},t,function(e){C=e.stopPropagation,x=e.tapMaxTime,M=e.swipeMaxTime,k=e.pointerValidLength}),{pan:O,tap:O,press:O,swipeLeft:O,swipeRight:O,swipeTop:O,swipeBottom:O,down:O,up:O}),o=[];function S(e,t){var n=t?t.screenX:0,o=t?t.screenY:0,i=t?t.pageX:0,a=t?t.pageY:0,r=t?t.clientX:0,t=t?t.clientY:0,s={del:!1,id:e,downScreenX:n,downScreenY:o,downPageX:i,downPageY:a,downClientX:r,downClientY:t,moveScreenX:n,moveScreenY:o,movePageX:i,movePageY:a,moveClientX:r,moveClientY:t};return z(s,{setMove:function(e){e&&(e.screenX&&(s.moveScreenX=e.screenX),e.screenY&&(s.moveScreenY=e.screenY),e.pageX&&(s.movePageX=e.pageX),e.pageY&&(s.movePageY=e.pageY),e.clientX&&(s.moveClientX=e.clientX),e.clientY&&(s.moveClientY=e.clientY))},getMoveLength:function(){return{x:s.movePageX-s.downPageX,y:s.movePageY-s.downPageY}}})}function i(r){var s={},l={id:null,time:null},c=!1,e=!1;function u(e){0===d()&&(l.id=e,l.time=F())}function d(){var e,t=0;for(e in s)s[e].del||t++;return t}function p(e){var t=D(e.target).prop("tagName").toLowerCase();"input"!==t&&"textarea"!==t&&e.preventDefault()}function n(e){p(e),C&&e.stopPropagation();var t=e.originalEvent,n=t.pointerId;u(n),0===d()&&(L.on(A[1],o),L.on(A[2],i),L.on(A[3],i)),s[n]&&!s[n].del||(s[n]=S(n,t),m(e))}function o(e){e.preventDefault(),C&&e.stopPropagation();var t=e.originalEvent,n=t.pointerId;s[n]&&(s[n].setMove(t),b(e,n))}function i(e){C&&e.stopPropagation();var t=e.originalEvent.pointerId;s[t]&&(y(e,t),s[t].del=!0,0===d()&&(L.off(A[1],o),L.off(A[2],i),L.off(A[3],i)))}function a(e){C&&e.stopPropagation();var t,n=e.type,o=e.originalEvent;if("touchstart"===n){p(e),t=o.changedTouches,0===d()&&(r.on(A[5],f),r.on(A[6],h),r.on(A[7],h)),u(t[0].identifier);for(var i=0,a=t.length;i<a;i++)s[t[i].identifier]&&!s[t[i].identifier].del||(s[t[i].identifier]=S(t[i].identifier,t[i])),m(e,t[i].identifier)}else u(0),s[0]=S(0,o),m(e),L.on(A[9],g),L.on(A[10],v),L.on(A[13],v)}function f(e){e.preventDefault(),C&&e.stopPropagation();for(var t=e.originalEvent.changedTouches,n=0,o=t.length;n<o;n++)s[t[n].identifier]&&s[t[n].identifier].setMove(t[n]),b(e,t[n].identifier)}function h(e){C&&e.stopPropagation();for(var t=e.originalEvent.changedTouches,n=0,o=t.length;n<o;n++)y(e,t[n].identifier),s[t[n].identifier].del=!0;0===d()&&(r.off(A[5],f),r.off(A[6],h),r.off(A[7],h))}function g(e){e.preventDefault(),C&&e.stopPropagation();var t=e.originalEvent;s[0]&&(s[0].setMove(t),b(e,0))}function v(e){C&&e.stopPropagation(),s[0]&&(y(e,0),void 0!==s[0]&&!1===s[0].del&&(s[0].del=!0),L.off(A[9],g),L.off(A[10],v))}function m(e){c=!1;for(var t=r.parents(),n=t.length,o=0;o<n;o++)if("1"===t.eq(o).attr(N+"scroll-runing")){c=!0;break}T.down.call(r,e)}function b(e,t){t=s[t].getMoveLength();e.preventDefault(),T.pan.call(r,t,e)}function y(e,t){var n=null,o=s[t].getMoveLength(),i=Math.abs(o.x),a=Math.abs(o.y);l.id===t&&(n=new Date-l.time,l.id=null,l.time=null),n&&(i<k&&a<k&&(c||(n<x?T.tap:T.press).call(r,e)),k<=i&&a<=i&&n<M&&(o.x<0?(e.preventDefault(),T.swipeLeft.call(r,e)):(e.preventDefault(),T.swipeRight.call(r,e))),k<=a&&i<=a&&n<M&&(o.y<0?(e.preventDefault(),T.swipeTop.call(r,e)):(e.preventDefault(),T.swipeBottom.call(r,e)))),T.up.call(r,e),function(){for(var e in s)s[e].del&&delete s[e]}()}function t(e){var t=j.pointer||j.msPointer;e?(t?r.on(A[0],n):r.on(A[4]+" "+A[8],a),r.css({"-ms-touch-action":"none","touch-action":"none"})):(t?r.off(A[0],n):r.off(A[4]+" "+A[8],a),r.css({"-ms-touch-action":"auto","touch-action":"auto"}))}function w(){e||t(e=!0)}return w(),{bind:w,unbind:function(){e&&t(e=!1)}}}return I(e).each(function(e,t){o.push(i(D(t)))}),z(n,{setPan:function(e){return T.pan=e,n},setTap:function(e){return T.tap=e,n},setPress:function(e){return T.press=e,n},setSwipeLeft:function(e){return T.swipeLeft=e,n},setSwipeRight:function(e){return T.swipeRight=e,n},setSwipeTop:function(e){return T.swipeTop=e,n},setSwipeBottom:function(e){return T.swipeBottom=e,n},setDown:function(e){return T.down=e,n},setUp:function(e){return T.up=e,n},on:function(){o.forEach(function(){arguments[0].bind()})},off:function(){o.forEach(function(){arguments[0].unbind()})}})},eventMouseWheel:function(e){var t={},r={scroll:O,down:O,up:O},s="DOMMouseScroll mousewheel",l=[];return I(e).each(function(e,t){function n(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent,t=t.deltaY/100||t.wheelDelta/-120||(2<Math.abs(t.detail)?t.detail/3:t.detail)||0;r.scroll.call(i,t,e),(0<t?r.down:r.up).call(i,e)}function o(){a||(a=!0,i.on(s,n))}var i,a;l.push((i=D(t),a=!1,o(),{bind:o,unbind:function(){a&&(a=!1,i.off(s,n))}}))}),z(t,{setScroll:function(e){return r.scroll=e,t},setDown:function(e){return r.down=e,t},setUp:function(e){return r.up=e,t},on:function(){l.forEach(function(){arguments[0].bind()})},off:function(){l.forEach(function(){arguments[0].unbind()})}})},eventKeyShortcut:function(e){var t,o={},i=(E({autoOn:!0},e,function(e){t=e.autoOn}),{}),a="＀",n=!1;function r(e){for(var t in i)if(t===[e.keyCode,e.ctrlKey?1:0,e.altKey?1:0,e.shiftKey?1:0].join(a)){e.preventDefault();break}}function s(e){for(var t in i)if(t===[e.keyCode,e.ctrlKey?1:0,e.altKey?1:0,e.shiftKey?1:0].join(a)){i[t]();break}}function l(){n||(n=!0,m.keyDown.add(r),m.keyUp.add(s))}return t&&l(),z(o,{add:function(e,t,n){return n=[e,n&&(!n||void 0!==n.isCtrl)&&n.isCtrl?1:0,n&&(!n||void 0!==n.isAlt)&&n.isAlt?1:0,n&&(!n||void 0!==n.isShift)&&n.isShift?1:0].join(a),i[n]||(i[n]=t),o},remove:function(e,t,n){return n=[e,n&&(!n||void 0!==n.isCtrl)&&n.isCtrl?1:0,n&&(!n||void 0!==n.isAlt)&&n.isAlt?1:0,n&&(!n||void 0!==n.isShift)&&n.isShift?1:0].join(a),i[n]&&delete i[n],o},on:l,off:function(){n&&(n=!1,m.keyDown.remove(r),m.keyUp.remove(s))}})}})}(window,jQuery),ud2.libExtend(function(h,g){"use strict";var a=[],v={string:"string",number:"number",boolean:"boolean",datetime:"datetime"},m="column";function s(e,t){if(null!==e)switch(t){case v.string:g.type.isString(e)||(e=String(e));break;case v.number:g.type.isNumber(e)||(e=Number(e)),isNaN(e)&&(e=null);break;case v.boolean:g.type.isBoolean(e)||(e=Boolean(e));break;case v.datetime:g.type.isDatetime(e)||(e=new Date(e)),isNaN(e.valueOf())&&(e=null);break;default:return s(e,v.string)}return e}var b=function(e){var t,n,o={type:"cell",column:null,row:null};function i(e){return void 0===e?t:(t=s(e,n),o)}function a(e){return e&&"row"===e.type&&null===o.row&&(o.row=e),o}function r(e){return e&&e.type===m&&null===o.column&&(o.column=e),o}return t=e&&!g.type.isObject(e)?e:(r((e=!g.type.isObject(e)?{}:e).columns),a(e.row),e.colspan&&(o.colspan=parseInt(e.colspan)||1),e.rowspan&&(o.rowspan=parseInt(e.rowspan)||1),e.merge&&(o.merge=!0),n=e.type,void 0===e.value||g.type.isArray(e.value)||g.type.isFunction(e.value)?null:e.value),n?i(t):n=null,g.extend(o,{val:i,dataType:function(e){return void 0===e?n:(v[e]||(e=null),n=e,i(t),o)},bindRow:a,bindColumn:r})},e=h.creater("datatable",function(e){var t,n,o,u={},d=(h.options({columns:[],rows:[]},e,function(e){o=e.id||h.createControlID(),t=g.type.isArray(e.columns)?e.columns:[],n=g.type.isArray(e.rows)?e.rows:[]}),[]),p=[];function c(e){var t,n,o,i,a,r=(i={type:m},a=[],(e=e)&&!g.type.isObject(e)?s(e):(s((e=e||{}).title||null),l(e.type)),g.extend(i,{cells:a,title:s,dataType:l}));function s(e){return void 0===e?n:(n=null!==e?String(e):null,i)}function l(e){return void 0===e?o:(v[e]||(e=null),o=e,a.forEach(function(e){e.dataType(o)}),i)}if(p.push(r),0<d.length)for(var c in d)t=b({row:d[c],column:r,type:r.dataType()}),r.cells.push(t),d[c].cells.push(t);return u}function r(e){var t,i,a,n=(i={type:"row"},a=[],(e=e)&&g.type.isArray(e)?l(e):l((e=e||{}).cells),g.extend(i,{cells:a})),o=0,r=n.cells.length,s=p.length;function l(e){for(var t,n=0,o=(e=!g.type.isArray(e)?[]:e).length;n<o;n++)t=e[n],g.type.isObject(t)?((t="cell"!==t.type?b(t):t).bindRow(i),a.push(t)):a.push(b({value:t,row:i}))}for(;o<r;o++)p[o]||c(),p[o].cells.push(n.cells[o]),n.cells[o].bindColumn(p[o]),n.cells[o].dataType(p[o].dataType());if(r<s)for(;o<s;o++)t=b({row:n,column:p[o]}),n.cells.push(t),p[o].cells.push(t);return d.push(n),f(),u}function i(e){var t,n;if(g.type.isNaturalNumber(e)){if(d[e])for(n in d.splice(e,1),p)p[n].cells.splice(e,1)}else if(e&&"row"===e.type&&-1!==(t=d.indexOf(e)))return i(t);return u}function l(){for(var e=0,t=d.length;e<t;e++)i(0);return u}function f(){for(var e,t,n,o,i=0,a=0,r=d.length,s=0;s<r;s++)i!==d[s].cells.length&&a++,i<d[s].cells.length&&(i=d[s].cells.length);if(1<a)for(s=0;s<r;s++)if((n=d[s].cells.length)<i)for(e=0,t=i-n;e<t;e++)o=b({row:d[s],column:p[n+e]}),d[s].cells.push(o),p[n+e].cells.push(o)}return function(e,t){for(var n=0,o=e.length;n<o;n++)c(e[n]);for(n=0,o=t.length;n<o;n++)r(t[n])}(t,n),a.push(u),o&&(a[o]=u),g.extend(u,{type:"datatable",columns:p,rows:d,columnAdd:c,columnRemove:function e(t){var n,o;if(g.type.isNaturalNumber(t)){if(p[t])for(p.splice(t,1),o=d.length-1;0<=o;o--)d[o].cells.splice(t,1),0===d[o].cells.length&&d.splice(o,1)}else if(t&&t.type===m&&-1!==(n=p.indexOf(t)))return e(n);return u},rowAdd:r,rowRemove:i,completion:f,dataFill:function e(t){var n,o,i,s,a;switch(l(),!0){case g.type.isArray(t):for(n=0,o=t.length;n<o;n++)(g.type.isArray(t[n])||g.type.isObject(t[n]))&&r(t[n]);break;case g.type.isObject(t)&&"datatable"===t.type:t.rows.forEach(function(e){var t=[];for(n=0,o=Math.min(e.cells.length,p.length);n<o;n++)t.push({value:e.cells[n].val(),type:p[n].dataType()});r(t)});break;default:return e((i=t,s=(i=h.convertToJQ(i)).find("tr"),a=[],i.find("td").filter("[colspan]").each(function(){var e,t,n=$(this),o=parseInt(n.attr("colspan"));if(n.removeAttr("colspan").attr("span-col",o),1<o)for(e=0,t=o-1;e<t;e++)n.after(n.clone().attr("merge","1"))}),i.find("td").filter("[rowspan]").each(function(){var e,t,n,o,i=$(this),a=parseInt(i.attr("rowspan"));if(i.removeAttr("rowspan").attr("span-row",a),1<a)for(e=0,t=a-1;e<t;e++)o=i.parent().index(),0===(n=i.index())?s.eq(o+e+1).prepend(i.clone().attr("merge","1")):s.eq(o+e+1).children().eq(n-1).after(i.clone().attr("merge","1"))}),s.each(function(){var r=[];s.parent().prop("nodeName").toLowerCase(),$(this).children().each(function(){var e=$(this),t=h.prefix+"datagrid-",n=e.attr(t+"data-type"),o=e.attr("span-col"),i=e.attr("span-row"),a=e.attr("merge"),t={};t.value=e.html(),n&&(t.type=n),o&&(t.colspan=o),i&&(t.rowspan=i),a&&(t.merge=!0),r.push(t)}),a.push(r)}),a))}return u},dataEmpty:l,debug:function(){var e,t,n,o=[],i=0,a=0;for(console.group("value"),e=d.length;i<e;i++)for(o[i]=[],a=0,t=d[i].cells.length;a<t;a++)n=d[i].cells[a],o[i][a]="["+n.dataType()+"],"+n.val();for(console.table(o),console.groupEnd(),console.group("merge"),o=[],i=0,e=d.length;i<e;i++)for(o[i]=[],a=0,t=d[i].cells.length;a<t;a++)n=d[i].cells[a],o[i][a]=n.merge;for(console.table(o),console.groupEnd(),console.group("rowspan, colspan"),o=[],i=0,e=d.length;i<e;i++)for(o[i]=[],a=0,t=d[i].cells.length;a<t;a++)n=d[i].cells[a],o[i][a]=n.rowspan+","+n.colspan;console.table(o),console.groupEnd()}})});return e.dataType=v,e.collection=a,e.getDataType=function(e){switch(!0){case g.type.isString(e):return v.string;case g.type.isNumber(e):return v.number;case g.type.isBoolean(e):return v.boolean;case g.type.isDatetime(e):return v.datetime;default:return v.string}},e.convertValue=s,e}),ud2.libExtend(function(ae,re){"use strict";ae.creater("scroll",function(e,o){var i,a,r,s,c,u,l,d,p,f,h,g,v,m,b,y,w,C,x={},M=ae.prefix+"scroll",k=ae.className(M),T=!1,S=(ae.options({recountByResize:!1,barState:0,hasHorizontal:!1,hasVertical:!0,barSize:6,barSizeOn:8,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.3)",barColorOn:"rgba(0,0,0,.45)",barColorDown:"rgba(0,0,0,.6)",barBorderRadiusState:!0,mouseWheelLength:"normal",isTouchMode:!0,isMouseNoTouchMode:!1,isMouseWheelMode:!0,isScrollMode:!1,isSlowMovning:!0},o,function(e){i=e.recountByResize,a=e.barState,r=e.barSize,s=e.barSizeOn,c=e.barMinLength,u=e.barOffset,l=e.barColor,d=e.barColorOn,p=e.barColorDown,f=e.barBorderRadiusState,h=e.hasHorizontal,g=e.hasVertical,v=e.isMouseWheelMode,m=e.isTouchMode,b=e.isMouseNoTouchMode,y=e.isScrollMode,w=e.mouseWheelLength,C=e.isSlowMovning,"normal"!==w&&(w=re.type.isNaturalNumber(w)?parseInt(w):"normal")}),ae.convertToJQ(e)),D=ae.jqe[0].clone().addClass(k("wrapper")),L=ae.jqe[0].clone().addClass(k("bar")),N=L.clone(),j={quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)"},A={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},t=!1,O=!1,F=null,E=10,n=!1,I=!1,z={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},R={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null},Y=[],q="scroll",P=k("runing");function $(){var e,t,n,o,i,a,r,s=0,l=0;g&&(e=D.height(),t=S.height(),z.h=t,z.ih=S.innerHeight(),z.sh=e-t,z.now.y<-z.sh&&(z.now.y=-z.sh),n=z.ih-2*u,0!==t&&(s=n<(s=(s=n*(r=1-(1<(r=z.sh/(5*z.ih))?1:r)))<c?c:s)?n:s,R.h=s,R.mh=n,R.sh=n-s,N.height(s))),h&&(o=D.width(),i=S.width(),z.w=i,z.iw=S.innerWidth(),z.sw=o-i,z.now.x<-z.sw&&(z.now.x=-z.sw),a=z.iw-2*u,0!==i&&(l=a<(l=(l=a*(r=1-(1<(r=z.sw/(5*z.iw))?1:r)))<c?c:l)?a:l,R.w=l,R.mw=a,R.sw=a-l,L.width(l)))}function U(e){t!==e&&(t=e,S.attr(P,e?1:0))}function B(e,t){t=t?"sh":"sw";return 0===z[t]||0===R[t]?0:e/z[t]*R[t]}function Q(e,t){t=t?"sh":"sw";return 0===z[t]||0===R[t]?0:e/R[t]*z[t]}function V(){0===a&&(R.timer&&window.clearTimeout(R.timer),L.stop().fadeIn(200),N.stop().fadeIn(200))}function J(){0===a&&(I||n||t||(R.timer&&window.clearTimeout(R.timer),R.timer=window.setTimeout(function(){L.stop().fadeOut(400),N.stop().fadeOut(400)},800)))}function W(e,t,n,o,i,a){var r=e-t,t=Math.abs(r)/n;return i=i||0,n=t/(a=a||5e-4),(a=e+t*t/(2*a)*(r<0?-1:1))<(o=-o)?(a=i?o-i/2.5*(t/8):o,n=(r=Math.abs(a-e))/t):0<a&&(a=i?i/2.5*(t/8):0,n=(r=Math.abs(e)+a)/t),{destination:Math.round(a),duration:n}}function H(e,t,n,o){var i,a;if(n=n||0,o=o||j.circular,0<e&&(e=0),(t=0<t?0:t)<-z.sh&&(t=-z.sh),e<-z.sw&&(e=-z.sw),o=o,D.css("transition-timing-function",o),N.css("transition-timing-function",o+", ease-out, ease-out, ease-out"),L.css("transition-timing-function",o+", ease-out, ease-out, ease-out"),o=n,o=parseInt(o),D.css("transition-duration",o+"ms"),N.css("transition-duration",o+"ms, 300ms, 300ms, 300ms"),L.css("transition-duration",o+"ms, 300ms, 300ms, 300ms"),0!==o?(F&&window.clearTimeout(F),F=window.setTimeout(function(){H(z.now.x,z.now.y,0),U(!1),J()},o)):(U(!1),J()),D.css("transform","translate("+e+"px, "+t+"px)"+(re.support.perspective?" translateZ(0)":"")),g&&N.css("transform","translate(0, "+B(-t,1)+"px)"+(re.support.perspective?" translateZ(0)":"")),h&&L.css("transform","translate("+B(-e,0)+"px, 0)"+(re.support.perspective?" translateZ(0)":"")),z.now={x:e,y:t},0!==(a=Y.length))for(i=0;i<a;i++)Y[i].move(-e,-t,n)}function K(){if(0<Y.length)for(var e in Y)Y[e].recountPosition()}function X(e){return e=parseInt(e)||0,$(),H(z.now.x,z.now.y,e),x}function Z(e){b&&e.type===ae.an.event[8]||O||(K(),$(),V(),e=(e=D.css("transform")).split(")")[0].split(", "),H((e={x:Math.round(+(e[12]||e[4])),y:Math.round(+(e[13]||e[5]))}).x,e.y),A.moved=!1,A.start=re.time(),A.startMove={x:z.now.x,y:z.now.y},A.lastMove={x:0,y:0})}function G(e,t){var n,o,i,a,r,s,l;b&&t.type===ae.an.event[9]||O||(n=re.time(),o=e.x,i=e.y,a=Math.abs(o),r=Math.abs(i),s=o-A.lastMove.x,l=i-A.lastMove.y,e=t=0,V(),A.lastMove={x:o,y:i},300<n-A.end&&a<E&&r<E||(A.moved||(A.moved=!0),g&&(e=l+z.now.y),h&&(t=s+z.now.x),0==s&&0==l||H(t,e),300<=n-A.start&&(A.start=n,A.startMove.x=t,A.startMove.y=e)))}function _(e){var t,n,o,i,a,r,s,l,c;b&&e.type===ae.an.event[10]||b&&e.type===ae.an.event[13]||O||(o=t=z.now.x,i=n=z.now.y,r=a=null,s=re.time()-A.start,l=0,A.end=re.time(),J(),A.moved&&C&&(s<300&&(e=c=0,g&&(i=(r=W(n,A.startMove.y,s,z.sh,T?z.h:0)).destination,e=r.duration),h&&(o=(a=W(t,A.startMove.x,s,z.sw,T?z.w:0)).destination,c=a.duration),l=Math.max(c,e)),o===t&&i===n||(V(),U(!0),H(o,i,l))))}function ee(e){var t=z.now.x,n=z.now.y,o=w;K(),$(),"normal"===o&&(o=Math.round(z.h)),0<e?n-=o:n+=o,0<n||n<-z.sh?U(!1):(V(),U(!0)),H(t,n,300)}function te(){this.move=0,n=!0,V(),K()}function ne(){n=!1,J()}function oe(e,t){var n=t?z.now.x:Q(-(e.x-this.move),0)+z.now.x,o=t?Q(-(e.y-this.move),1)+z.now.y:z.now.y;this.move=t?e.y:e.x,H(n,o)}function ie(t){var n=!1,o=!1,i=t===L?"height":"width";function a(e){e.stopPropagation(),n=!1,o?t.css("background",d):(t.css("background",l).css(i,r),f&&t.css("border-radius",r/2)),ae.dom().off(ae.an.event[24],a)}t.on(ae.an.event[12],function(){o=!0,t.css("background",d).css(i,s),f&&t.css("border-radius",s/2)}).on(ae.an.event[13],function(){o=!1,n||(t.css("background",l).css(i,r),f&&t.css("border-radius",r/2))}).on(ae.an.event[8],function(){n=!0,t.css("background",p),ae.dom().on(ae.an.event[24],a)})}return function(){var e,t=S.length;if(1<t){for(e=1;e<t;e++)re.scroll(S.eq(e),o);S=S.eq(0)}var n=S.contents();0===n.length?S.append(D):(n.wrapAll(D),D=S.children(k("wrapper",1))),D.css("padding",S.css("padding-top")+" "+S.css("padding-right")+" "+S.css("padding-bottom")+" "+S.css("padding-left")),S.addClass(M),g&&(S.prepend(N),D.css({height:"auto","min-height":"100%"})),h&&(S.prepend(L),D.css({width:"auto","min-width":"100%"})),N.css({top:u,right:u,width:r,background:l}),L.css({left:u,bottom:u,height:r,background:l}),f&&(N.css("border-radius",r/2),L.css("border-radius",r/2)),1===a&&(N.css("display","block"),L.css("display","block")),$(),i&&re.callbacks.pageResize.add(X),0===a&&S.on(ae.an.event[12],function(){$(),I=!0,V()}).on([ae.an.event[13],ae.an.event[6]].join(" "),function(){I=!1,J()}),1===a&&(S.on(ae.an.event[12],function(){$(),I=!0}),S.on([ae.an.event[13],ae.an.event[6]].join(" "),function(){I=!1})),m&&re.event(S,{stopPropagation:!0}).setDown(Z).setUp(_).setPan(G),v&&re.eventMouseWheel(S).setScroll(ee),y&&(ie(N),ie(L),re.event(N,{stopPropagation:!0}).setPan(function(e){oe.call(this,e,1)}).setDown(te).setUp(ne),re.event(L,{stopPropagation:!0}).setPan(function(e){oe.call(this,e,0)}).setDown(te).setUp(ne))}(),re.extend(x,{type:q,move:function(e,t,n){return H(-e,-t,n=n||0),x},oplock:function(e){return void 0!==e?(O=!!e,x):O},followerBind:function(e){return re.type.isObject(e)&&e.type&&e.type===q&&Y.push(e),x},followerUnbind:function(e){var t;return re.type.isObject(e)&&e.type&&e.type===q&&-1<(t=Y.indexOf(e))&&Y.splice(t,1),x},recountPosition:X,getContent:function(){return D}})})}),ud2.libExtend(function(je,Ae){"use strict";je.controlCreater("datagrid",function(e,t){var n=e.className,me=je.className(n),be=me("left"),ye=me("center"),we=me("right"),Ce=me("grid"),xe=me("header"),Me=me("content"),ke=me("footer"),Te=me("row",1),Se="rowDeselected",De="rowSelected",Le={type:null,width:120,minWidth:50,mode:1,align:0},Ne={height:34};e.init=function(d){var s,p,f,h,g,o,v,m,r,i,a,b,y,n,l,c,u,w,C,x,M,k=[],e=(d.getOptions(["datas","datasHeader","datasFooter","columns","columnDefault","rowDefault","cellHeight","height",["hover","isHover"],"hoverColor",["selected","isSelected"],["selectedMultiple","isSelectedMultiple"],"emptyText",["horizontal","hasHorizontal"],["vertical","hasVertical"]],function(e){var t;m=parseInt(e.cellHeight)||Ne.height,r=e.height||null,i=je.boolCheck(e.hover,!0),a=e.hoverColorv||"#EDF7FF",b=je.boolCheck(e.selected,!1),y=je.boolCheck(e.selectedMultiple,!0),n=e.emptyText||"此处没有任何数据",l=je.boolCheck(e.horizontal,!0),c=je.boolCheck(e.vertical,!0),function(e,t,n){var o,i,a,r=!0;if((s=e)?Ae.type.isString(s)||Ae.type.isJQuery(s)?s=je.convertToJQ(s):(s=Ae.datatable().dataFill(s),r=!1):d.origin?s=je.convertToJQ(d.origin):(s=Ae.datatable(),jsJQ=!1),r&&(d.origin=s,o=s.find("thead"),e=s.find("tbody"),r=s.find("tfoot"),s=Ae.datatable().dataFill(e),o.length&&(p=Ae.datatable().dataFill(o)),r.length&&(f=Ae.datatable().dataFill(r))),(p=t?Ae.datatable().dataFill(t):p)&&p.columns.length<s.columns.length)for(i=0,a=s.columns.length-p.columns.length;i<a;i++)p.columnAdd();if((f=n?Ae.datatable().dataFill(n):f)&&f.columns.length<s.columns.length)for(i=0,a=s.columns.length-f.columns.length;i<a;i++)f.columnAdd()}(e.datas,e.datasHeader,e.datasFooter),t=e.columnDefault,o=Le,Ae.type.isObject(t)&&(o=Ae.merge(o,t)),t=e.rowDefault,v=Ne,Ae.type.isObject(t)&&(v=Ae.merge(v,t)),function(r){var e,t,n;for(r&&r.length||!d.origin||(r=[],d.origin.find("col").each(function(e,t){t=$(t);var n=parseInt(t.attr(me("width"))),o=parseInt(t.attr(me("min-width"))),i=t.attr(me("mode")),a=t.attr(me("align")),t=t.attr(me("type"));r[e]={},n&&(r[e].width=n),o&&(r[e].minWidth=o),i&&(r[e].mode=i),a&&(r[e].align=a),t&&(r[e].type=t)})),e=Math.max(s.columns.length,p?p.columns.length:0,f?f.columns.length:0,r?r.length:0),h=r,Ae.type.isArray(h)||(h=[]),t=0;t<e;t++)Ae.type.isObject(h[t])||(h[t]={}),(n=h[t]=Ae.merge(o,h[t])).minWidth>n.width&&1===n.mode&&(n.width=n.minWidth),n.align=function(){switch(n.align){case 1:case"1":case"center":return"center";case 2:case"2":case"right":return"right";default:case 0:case"0":case"left":return"left"}}(),n.mode=function(){switch(n.mode){case 1:case"1":case"flex":return 1;case 2:case"2":case"left":return 2;case 3:case"3":case"rigth":return 3;default:case 0:case"0":case"normal":return 0}}()}(e.columns),g=void 0,(g=Ae.type.isArray(g)?g:[]).header=[],g.content=[],g.footer=[],function(){var e,t,n,o=!!p,i=!!f,a=s.columns.length,r=h.length;if(a<r)for(n=0;n<r-a;n++)s.columnAdd();if(o)for(e=p.columns.length,n=0;n<r-e;n++)p.columnAdd();if(i)for(t=f.columns.length,n=0;n<r-t;n++)f.columnAdd();s.columns.forEach(function(e,t){h[t]&&e.dataType(h[t].type)})}()}),'<div class="'+be+'"><div class="'+xe+'"><div class="'+Ce+'" /></div><div class="'+Me+'"><div class="'+Ce+'" /></div><div class="'+ke+'"><div class="'+Ce+'" /></div></div><div class="'+we+'"><div class="'+xe+'"><div class="'+Ce+'" /></div><div class="'+Me+'"><div class="'+Ce+'" /></div><div class="'+ke+'"><div class="'+Ce+'" /></div></div><div class="'+ye+'"><div class="'+xe+'"><div class="'+Ce+'" /></div><div class="'+Me+'"><div class="'+Ce+'" /></div><div class="'+ke+'"><div class="'+Ce+'" /></div></div><div class="'+me("empty")+'"><div>'+n+"</div></div>"),T=d.current.html(e),t=T.children(),S=t.last(),D=t.eq(0),e=D.children(),L=e.eq(0),N=e.eq(1),j=e.eq(2),A=L.children(),O=N.children(),F=j.children(),E=t.eq(1),e=E.children(),I=e.eq(0),z=e.eq(1),R=e.eq(2),Y=I.children(),q=z.children(),P=R.children(),U=t.eq(2),t=U.children(),B=t.eq(0),Q=t.eq(1),V=t.eq(2),J=B.children(),W=Q.children(),H=V.children(),K=[O,A,F],X=[W,J,H],Z=[q,Y,P],G=je.jqe[0].clone().addClass(me("row")),_=je.jqe[0].clone().addClass(me("cell")),ee=!1,te={rowSelected:je.noop,rowDeselected:je.noop};function ne(){var e=function(){var t=0,n=0,o=0;b&&(n+=38);return h.forEach(function(e){switch(e.widthNow=e.width,e.mode){case 0:case 1:t+=e.widthNow;break;case 2:e.cellLeft=n,n+=e.widthNow;break;case 3:e.cellLeft=o,o+=e.widthNow}}),h.gridSize={l:n,c:t,r:o},h.gridSize}(),t=e.l,n=e.c,o=e.r,e=g.footer.length;D.css({width:t}),A.css({width:t}),O.css({width:t}),U.css({left:t-1,right:0<o?o-2:-1}),J.css({width:n}),W.css({width:n-1}),E.css({width:o}),Y.css({width:o}),q.css({width:o}),0<e&&(F.css({width:t}),H.css({width:n}),P.css({width:o}))}function oe(){var o,e,t,i,n,a,r=g.header.length||0,s=g.footer.length||0;e=Q.width(),t=[],a=n=i=0,h.forEach(function(e){1===e.mode?(i+=e.width,t.push(e)):0===e.mode&&(n+=e.width)}),o=(e-n)/i,i=0,t.forEach(function(e){var t=o*e.width,n=e.minWidth;t<n&&(t=n),e.widthNow=t,i+=t}),h.forEach(function(e){0!==e.mode&&1!==e.mode||(e.cellLeft=a,a+=e.widthNow)}),W.css("width",i+n),ie(g.content),r&&ie(g.header),s&&ie(g.footer)}function ie(l){for(var c=0,e=l.length;c<e;c++)l[c].$.left.css("height",m),l[c].$.center.css("height",m),l[c].$.right.css("height",m),h.forEach(function(e,t){var n,o,i=l[c].public.cells[t],a=e.widthNow,r=0,s=1;if(!i.merge){if(n=i.rowspan?(s++,m*(i.rowspan||1)):m,i.colspan){for(s++,o=i.colspan-1;0<o;o--)a+=h[t+ ++r]&&h[t+r].widthNow||0;i.getContent().css("text-align","center")}i.getContent().css({width:a,height:n,left:e.cellLeft,lineHeight:n-1+"px",zIndex:s})}})}function ae(){var e,t,n,o,i,a;0===g.content.length?S.addClass("on"):S.removeClass("on"),ne(),e=g.header.length*m,t=g.footer.length*m,n={height:e},o={top:e},i={bottom:t},a={height:t,bottom:0},ce(r),L.css(n),N.css(o),B.css(n),Q.css(o),I.css(n),z.css(o),A.css({height:e}),O.css({height:m*g.content.length}),J.css({height:e}),W.css({height:m*g.content.length-1}),Y.css({height:e}),q.css({height:m*g.content.length}),S.css({top:e}),t&&(N.css(i),j.css(a),F.css({height:t}),Q.css(i),V.css(a),H.css({height:t}),z.css(i),R.css(a),P.css({height:t}),S.css({bottom:t})),oe()}function re(r,n){var e,s,l,c,t,o,i,u=0;for(n=n||0,e=r.rows.length,0===n&&(i=g.content),1===n&&(i=g.header),2===n&&(i=g.footer);u<e;u++)!function(){var a;s=G.clone().appendTo(K[n]),l=G.clone().appendTo(X[n]),c=G.clone().appendTo(Z[n]),a={$:{left:s,center:l,right:c},public:{cells:[]},options:v},i.push(a),b&&(n&&0===u||!n)&&((t=_.clone().addClass("checkbox").css({textAlign:"center",width:38})).html('<input type="checkbox" class="check" />').appendTo(s),n?(o=1===n?p.rows.length*m:f.rows.length*m,t.css({height:o,"line-height":o-2+"px"})):t.css({height:m,"line-height":m-3+"px"}),!y&&n&&t.addClass("disabled"),a.$.check=t.children(),a.checkEvent=Ae.event(t).setTap(function(){var t,e;n?(t=[],e=ee,0!==g.content.length&&y&&(e?(le(!1),k.forEach(function(e){e.$.check.removeAttr("checked"),t.push(e.public)}),k.splice(0,k.length)):(le(!0),g.content.forEach(function(e){-1===k.indexOf(e)&&(e.$.check.attr("checked","checked"),k.push(e),t.push(e.public))})),te[e?Se:De].call(d.public,t))):se.call(this,a)})),h.forEach(function(e,t){var n,o,i=r.rows[u].cells[t];switch(a.public.cells[t]=o={},n=i.merge?_.clone():(t=i.val(),_.clone().css({textAlign:e.align}).html(t).attr("title",t?t.toString().replace(/<[^>]+>/g,""):"")),e.mode){case 0:case 1:n.appendTo(l);break;case 2:n.appendTo(s);break;case 3:n.appendTo(c)}o.getContent=function(){return n},o.val=i.val,i.colspan&&(o.colspan=i.colspan),i.rowspan&&(o.rowspan=i.rowspan),i.merge&&(o.merge=i.merge)})}()}function se(e){var t=k.indexOf(e),n=k.length;-1===t?(!y&&0<n&&(k[0].$.check.removeAttr("checked"),k.splice(0,1),te[Se].call(d.public,e.public)),e.$.check.attr("checked","checked"),k.push(e),y&&n+1===g.content.length&&le(!0)):(e.$.check.removeAttr("checked"),k.splice(t,1),ee&&le(!1)),te[-1<t?Se:De].call(d.public,e.public)}function le(e){e?(ee=!0,g.header[0].$.check.attr("checked","checked"),g.footer[0]&&g.footer[0].$.check.attr("checked","checked")):(ee=!1,g.header[0].$.check.removeAttr("checked"),g.footer[0]&&g.footer[0].$.check.removeAttr("checked"))}function ce(e){return void 0===e?T.height():((Ae.regex.percent.test(e)||Ae.regex.nonNegative.test(e))&&(T.css("height",e),r=e),d.public)}function ue(){var e,t=0,n=0,o=g.content,i=o.length;if(b){if(e=k.length,ee&&le(!1),0<e)for(;n<e;n++)se(k[t]);for(k.splice(0,e);t<i;t++)o[t].checkEvent.off()}O.empty(),W.empty(),q.empty(),S.addClass("on"),g.content.splice(0,i)}function de(){oe()}function pe(){var e={barColor:"rgba(60, 60, 60, .3)",barColorOn:"rgba(60, 60, 60, .45)",barColorDown:"rgba(60, 60, 60, .6)",barSize:5,barState:0,hasVertical:c,hasHorizontal:l,isScrollMode:!0,recountByResize:!0},t={barState:2,hasHorizontal:!1,hasVertical:!0,isTouchMode:!1,isMouseWheelMode:!1,isScrollMode:!1},n={barState:2,hasHorizontal:!0,hasVertical:!1,isTouchMode:!1,isMouseWheelMode:!1,isScrollMode:!1};M=Ae.scroll(Q,e),u=Ae.scroll(N,t),w=Ae.scroll(z,t),C=Ae.scroll(B,n),x=Ae.scroll(V,n),M.followerBind(u).followerBind(w).followerBind(C).followerBind(x),Ae.callbacks.pageResize.add(de),i&&T.on([je.an.event[12],je.an.event[13]].join(" "),Te,function(e){var t=$(this),e=e.type;0<t.parents(me("content",1)).length&&(t=t.index(),e={"background-color":e===je.an.event[12]?a:""},O.children(Te).eq(t).children().css(e),W.children(Te).eq(t).children().css(e),q.children(Te).eq(t).children().css(e))})}re(s),p&&p.rows.length&&re(p,1),f&&f.rows.length&&re(f,2),ae(),d.origin.length&&(d.origin.after(T),d.origin.remove(),d.transferStyles(),ae()),pe();var fe=d.public.appendTo,he=d.public.prependTo,ge=d.public.insertAfter,ve=d.public.insertBefore;return Ae.extend(d.public,{appendTo:function(){return fe.apply(d.public,arguments),ae(),d.public},prependTo:function(){return he.apply(d.public,arguments),ae(),d.public},insertAfter:function(){return ge.apply(d.public,arguments),ae(),d.public},insertBefore:function(){return ve.apply(d.public,arguments),ae(),d.public},height:ce,setRowSelected:function(e){return te.rowSelected=e,d.public},setRowDeselected:function(e){return te.rowDeselected=e,d.public},dataFill:function e(t){return ue(),M.move(0,0),t&&"datatable"===t.type?(s.dataFill(t),re(s),ae(),d.public):e(Ae.datatable().dataFill(t))},dataRowAdd:function e(n){var o=[];if(n&&"datatable"===n.type)n.rows[0]&&(h.forEach(function(e,t){n.rows[0].cells[t]?n.rows[0].cells[t].dataType(e.type):n.columnAdd({type:e.type}),o[t]=n.rows[0].cells[t].val()}),re(n),ae(),ee&&le(!1));else if(void 0!==n)return e(Ae.datatable().rowAdd(n));return d.public},dataRowRemove:function e(t){var n,o,i,a;if(Ae.type.isArray(t))for(i=0,a=t.length;i<a;i++)e(t[i]);else(n=g.content.filter(function(e){return e.public===t})).length&&(b&&(o=k.indexOf(n[0]),n[0].checkEvent.off(),n[0].$.check.remove(),k.splice(o,1),0===k.length&&ee&&le(!1)),o=g.content.indexOf(n[0]),n[0].$.left.remove(),n[0].$.center.remove(),n[0].$.right.remove(),g.content.splice(o,1));return d.public},dataRowSelected:function(){return k.map(function(e){return e.public})},dataAll:function(){return g.content.map(function(e){return e.public})},dataEmpty:ue})},t.align={left:0,center:1,right:2},t.mode={normal:0,flex:1,left:2,right:3}})}),ud2.libExtend(function(V,J){"use strict";V.controlCreater("tabs",function(e,q){var P=e.className,U=V.className(P),v=V.jqe[0].clone().addClass(U("content")),B={normal:"normal",simple:"simple"},Q="tabs.page";V.creater("page",function(){var n,o,i,a,r,s,l,c,u,d=arguments,p=d.length,f=d[0],h={tabs:null},g=!1;return function(){var e;switch(1===p&&J.type.isObject(f=d[0])?(n=f.type,r=f.name,o=f.title,i=f.details,a=f.btnClose):2===p?(o=d[0],i=d[1],a=0):3===p?(n=d[0],o=d[1],i=d[2]):5===p&&(n=d[0],r=d[1],o=d[2],i=d[3],a=d[4]),function(){switch(n){case"url":case 1:case"1":n=1;break;default:case"html":case 0:case"0":n=0}}(),r=r||V.createControlID("tabs-page"),e=(o=o||"未命名选项卡").replace(/<[^>]*>/g,""),i=i||(1===n?"about:blank":""),a=V.boolCheck(a,!0),s=V.jqe[0].clone().addClass(U("tab")).attr("title",e).append(V.jqe[1].clone().html(o)),u=V.jqe[0].clone().addClass(U("menu-item")).attr("title",e).append(V.jqe[1].clone().html(o)),l=v.clone(),a&&(s.append('<i class="ico ico-solid-cancel" />'),u.append('<i class="ico ico-hollow-cancel" />')),n){case 0:l.append(i);break;case 1:c=$('<iframe id="'+r+'" name="'+r+'" src="'+i+'" />'),l.append(c).addClass("iframe")}}(),J.extend(h,{name:r,type:Q,getTab:function(){return s},getTabLink:function(){return u},getContent:function(){return l},getIframe:function(){return c},getPageType:function(){return n},openState:function(e){return void 0===e?g:((g=!!e)?(s.addClass("on"),l.addClass("on"),u.addClass("on")):(s.removeClass("on"),l.removeClass("on"),u.removeClass("on")),h)},title:function(e){return void 0!==e?(o=String(e),t=o.replace(/<[^>]*>/g,""),s.attr("title",t).children("span").html(o),u.attr("title",t).children("span").html(o),h):o},details:function(e){if(void 0===e)return i;switch(i=String(e),n){case 0:l.html(i);break;case 1:l.children("iframe").attr("src",i)}return h},tabsIn:function(e){return e&&"tabs"===e.type&&!h.tabs&&e.pageAdd(h),h},tabsOut:function(){return h.tabs&&h.tabs.pageRemove(h),h}})},q),e.init=function(u){var o,i,a,n,r,t,s,l,c,d,p,e,f=u.getOptions(["layout",["menu","isMenu"],"height","maxWidth","theme",["tabScroll","isTabScroll"],["tabAutoMove","isTabAutoMove"],["menuAutoMove","isMenuAutoMove"]],function(e){o=V.boolCheck(e.menu,!0),a=V.boolCheck(e.tabScroll,!0),n=V.boolCheck(e.tabAutoMove,!0),r=V.boolCheck(e.menuAutoMove,!0),t=e.height||null,s=e.maxWidth,l=e.theme,i=e.layout}),h='<div class="'+U("bar")+'"><div class="'+U("bar-inner")+'" /></div><div class="'+U("main")+'" />',g=u.current.html(h),v=g.children(U("bar",1)),m=g.find(U("bar-inner",1)),b=g.find(U("main",1)),y=$('<div class="'+U("menu")+'"><div class="'+U("menu-btn")+'" /></div>'),w=$('<div class="'+U("mask")+'" />'),C=y.children(":first"),x=$('<div class="'+U("menu-list")+' empty" '+U("empty")+'="这里是空的"><div class="'+U("menu-inner")+'" /></div>'),M=x.children(),k=[],T=0,S={change:V.noop,close:V.noop};function D(e){switch(0===i&&g.removeClass(U("top")),1===i&&g.removeClass(U("bottom")),2===i&&g.removeClass(U("left")),3===i&&g.removeClass(U("right")),k.forEach(function(e){e.getTab().removeAttr("style")}),e){default:case"top":case"0":case 0:i=0,g.addClass(U("top"));break;case"bottom":case"1":case 1:i=1,g.addClass(U("bottom"));break;case"left":case"2":case 2:i=2,g.addClass(U("left"));break;case"right":case"3":case 3:i=3,g.addClass(U("right"))}N()}function L(e){switch(l&&g.removeClass(U(B[l])),e){default:case B.normal:case"0":case 0:l=null;break;case B.simple:case"1":case 1:l=B.simple,g.addClass(U(B[l]))}}function N(t){void 0===t?(T=0,k.forEach(function(e){0===i||1===i?(t=Math.ceil(e.getTab().width()),s&&s<t&&(t=s),e.getTab().css("width",t)):(t=Math.ceil(e.getTab().height()),e.getTab().css("height",t)),N(e.size=t)})):(T+=t,0===i||1===i?m.width(T+2*k.length):m.height(T+2*k.length))}function j(e){var t;a&&(d.recountPosition(),n&&(t=(0!==e.getTab().prev().length?e.getTab().prev():e.getTab()).position(),0===i||1===i?d.move(t.left,0,300):d.move(0,t.top,300))),o&&(c.recountPosition(),r&&(e=(0!==e.getTabLink().prev().length?e.getTabLink().prev():e.getTabLink()).position(),c.move(0,e.top-5,300)))}function A(t){var e=k.filter(function(e){return e.name===t});return e&&e[0]}function O(e){return void 0===e?g.height():((J.regex.percent.test(e)||J.regex.nonNegative.test(e)||"auto"===e)&&(g.css("height",e),"auto"===e?g.addClass(U("auto")):g.removeClass(U("auto")),t=e),u.public)}function F(e,t){var n;return!e||e.type!==Q||e.tabs||R(e.name)||(e.tabs=u.public,k.push(e),m.append(e.getTab()),b.append(e.getContent()),0===i||1===i?(n=Math.ceil(e.getTab().width()),s&&s<n&&(n=s),e.getTab().css("width",n)):(n=Math.ceil(e.getTab().height()),e.getTab().css("height",n)),N(e.size=n),a&&d.recountPosition(),o&&(M.append(e.getTabLink()),c.recountPosition()),1!==k.length&&!t||I(e),1===k.length&&x.removeClass("empty"),n=$().add(e.getTab().children("span")),t=$().add(e.getTab().find("i")),o&&(n=n.add(e.getTabLink().children("span")),t=t.add(e.getTabLink().find("i"))),e.event=J.event(n).setTap(function(){I(e),y.removeClass("on")}),e.closeEvent=J.event(t).setTap(function(){E(e)})),u.public}function E(e){var t;if(e&&e.type===Q&&e.tabs===u.public)e.getTab().detach(),e.getTabLink().detach(),e.getContent().detach(),e.event.off(),e.closeEvent.off(),1===e.getPageType()&&(J.support.apple&&(e.getIframe().off("load"),window.clearInterval(e.getIframe().timer)),e.getIframe().detach()),e.tabs=null,t=k.indexOf(e),p===e&&(e.openState(0),0<t?(p=k[t-1].openState(1),S.change.call(u.public,k[t-1])):1<k.length&&(p=k[1].openState(1),S.change.call(u.public,k[1]))),k.splice(t,1),t=-e.size,delete e.size,N(t),0===k.length?(p=null,x.addClass("empty")):j(p),S.close.call(u.public,e);else if(e)return E(z(e));return u.public}function I(e){if(e&&e.type===Q&&e.tabs===u.public&&p!==e)p&&p.openState(!1),e.openState(!0),j(e),p=e,S.change.call(u.public,e);else if(e)return I(z(e));return u.public}function z(e){return A(e)||null}function R(e){return!!A(e)}function Y(){y.toggleClass("on")}return u.origin.length&&(u.origin.after(g),u.origin.remove(),u.transferStyles()),D(i),e=f.maxWidth,s="auto"===e?null:parseInt(e)||150,L(l),o&&(g.prepend(y),y.after(x)),O(t),g.append(w),e={barState:2,recountByResize:!0,isScrollMode:!1},a&&(0===i||1===i?(e.hasHorizontal=!0,e.hasVertical=!1):(e.hasHorizontal=!1,e.hasVertical=!0),d=J.scroll(v,e)),o&&(J.event(C).setTap(Y),c=J.scroll(x,{barSize:3,barColor:"#d5d5d5"})),J.event(v).setDown(function(){w.show()}).setUp(function(){w.hide()}),function(){if(u.origin.length)for(var e,t,n,o,i,a,r="["+U("page")+"]",s=u.origin.children(r),l=0,c=s.length;l<c;l++)a=s.eq(l),e=V.attrValue(a,"page-type",P),n=V.attrValue(a,"page-name",P),t=V.attrValue(a,"page-title",P),o=a,i=V.attrValue(a,"page-btn-close",P,1),a=V.boolCheck(V.attrValue(a,"page-open",P,0),0),F(q.page({type:e,title:t,name:n,details:o,btnClose:i}),a)}(),J.extend(u.public,{height:O,layout:function(e){return void 0!==e?(D(e),N(),u.public):i},theme:function(e){return void 0!==e?(L(e),u.public):l||B.normal},pages:k,pageAdd:F,pageRemove:E,pageOpen:I,pageFind:z,hasName:R,setChange:function(e){return S.change=e,u.public},setClose:function(e){S.close=e}})},q.theme=B,q.layout={top:0,bottom:1,left:2,right:3},q.pageType={html:0,url:1}})}),ud2.libExtend(function(L,N){"use strict";L.controlCreater("page",function(e,t){var n=e.className,D=L.className(n);e.init=function(t){t.getOptions(["now","max","show",["menu","isMenu"],["ico","isIco"],["text","isText"],"layout","relayout","relayoutWidth"],function(e){o=parseInt(e.now)||1,(i=parseInt(e.max)||o)<(o=o<1?1:o)&&(i=o),a=parseInt(e.show)||2,n=L.boolCheck(e.menu,!0),r=L.boolCheck(e.ico,!0),s=L.boolCheck(e.text,!0),r||s||(s=!0),c=L.boolCheck(e.relayout,!0),u=parseInt(e.relayoutWidth)||767,l=e.layout});var o,i,a,n,r,s,l,c,u,d,p,e='<a class="btn" '+D("fn")+'="0"><i class="ico">&#xec00;</i><span>首页</span></a><a class="btn" '+D("fn")+'="1"><i class="ico">&#xec01;</i><span>上页</span></a><a class="btn" '+D("fn")+'="2"><span>下页</span><i class="ico">&#xec02;</i></a><a class="btn" '+D("fn")+'="3"><span>末页</span><i class="ico">&#xec03;</i></a>',f=t.current.html(e).addClass("group"),h=f.children("a"),g=!1,v={change:L.noop};function m(){var e,t=[],n=f.find("["+D("num")+"]");if(n.remove(),0!==l){for(p&&p.off(),e=a;1<=e;e--)0<o-e&&t.push('<a class="btn btn-solid" '+D("num")+'="'+(o-e)+'">'+(o-e)+"</a>");for(t.push('<a class="btn" '+D("num")+'="'+o+'" '+D("now")+">"+o+"</a>"),e=1;e<=a;e++)o+e<=i&&t.push('<a class="btn btn-solid" '+D("num")+'="'+(o+e)+'">'+(o+e)+"</a>");h.eq(1).after(t.join("")),n=f.find("["+D("num")+"]"),p=N.event(n).setTap(function(){y(this.attr(D("num")))})}}function b(){!function(){g=!0;for(var e=d.options,t=e.length,n=0;n<t;n++)e[0].selectOut();g=!1}();for(var e=1;e<=i;e++){var t=e===o;d.optionAdd(N.select.option(e,e,!1,t))}}function y(e){(e=i<e?i:e)<1&&(e=1),n&&(g=!0,d.val(e),g=!1),w(e)}function w(e){(e=parseInt(e)||1)!==o&&(o=e,m(),v.change.call(t.public,o))}function C(e){l=0===e||"0"===e||"small"===e?0:1,m(),n&&(0===l?d.insertAfter(h.eq(1)):d.appendTo(f))}function x(){C(f.parent().width()<u?0:1)}t.origin.length&&(t.origin.after(f),t.origin.remove(),t.transferStyles()),n&&(d=N.select(t.public.id+"-select",{dir:N.select.direction.up,moveSelected:!0}),b()),r||f.addClass("noico"),s||f.addClass("notext"),c?(x(),N.callbacks.pageResize.add(x)):C(l),N.event(h).setTap(function(){switch(parseInt(this.attr(D("fn")))){case 0:y(1);break;case 1:y(o-1);break;case 2:y(o+1);break;case 3:y(i)}}),n&&d.setChange(function(e){g||w(e)});var M=t.public.appendTo,k=t.public.prependTo,T=t.public.insertAfter,S=t.public.insertBefore;return N.extend(t.public,{appendTo:function(){return M.apply(t.public,arguments),x(),t.public},prependTo:function(){return k.apply(t.public,arguments),x(),t.public},insertAfter:function(){return T.apply(t.public,arguments),x(),t.public},insertBefore:function(){return S.apply(t.public,arguments),x(),t.public},layout:function(e){return void 0!==e?(c||C(e),t.public):l},isText:function(e){return void 0!==e?((s=!!e)?f.removeClass("notext"):f.addClass("notext"),t.public):s},isIco:function(e){return void 0!==e?((r=!!e)?f.removeClass("noico"):f.addClass("noico"),t.public):r},now:function(e){return void 0!==e?(e=parseInt(e)||o,y(e=i<(e=e<1?1:e)?i:e),t.public):o},max:function(e){return void 0!==e?((i=parseInt(e)||i)<1&&(i=1),n&&b(),i<o?y(i):m(),t.public):i},show:function(e){return void 0!==e?((a=parseInt(e)||a)<0&&(a=0),m(),t.public):a},setChange:function(e){return v.change=e,t.public}})},t.layout={small:0,normal:1}})}),ud2.libExtend(function(x,M){"use strict";x.controlCreater("dialog",function(e,d){var t=e.className,w=x.className(t),p='<button class="btn">确 定</button>',f='<button class="btn">取 消</button>';function C(e,t,n){return(e=M.type.isArray(e)&&2===e.length?{x:e[0],y:e[1]}:M.type.isObject(e)?{x:e.x||e.width||e.w,y:e.y||e.height||e.h}:M.type.isString(e)?((e=e.split(-1<e.indexOf(",")?",":" ")).length,{x:e[0],y:e[1]}):M.type.isNumber(e)?{x:e,y:e}:{x:0,y:0}).x=parseInt(e.x)||t,e.y=parseInt(e.y)||n,e}function n(e,t){var n,o,i,a,r,s,l=e.length;return 1===l&&M.type.isObject(e[0])?(n=e[0].title||"",o=e[0].content||"",i=e[0].ico,a=e[0].icoStyle,r=e[0].sendFn,s=e[0].cancelFn):(n=e[0]||"",o=e[1]||"",3===l&&(M.type.isFunction(e[2])?r=e[2]:a=e[2]),4===l&&(M.type.isFunction(e[2])&&M.type.isFunction(e[3])?(r=e[2],s=e[3]):M.type.isObject(e[2])&&M.type.isFunction(e[3])?(a=e[2],r=e[3]):(i=e[2],a=e[3])),5===l&&(M.type.isObject(e[2])&&M.type.isFunction(e[3])&&M.type.isFunction(e[4])?(a=e[2],r=e[3],s=e[4]):(i=e[2],a=e[3],r=e[4])),6===l&&(i=e[2],a=e[3],r=e[4],s=e[5])),t(n,o,i,a=!a||a.name&&a.ico?a:style.normal,r=M.type.isFunction(r)?r:x.noop,s=M.type.isFunction(s)?s:x.noop)}function h(e,t,n,o,i,a){var r,s;n.send&&(r=M.event(t.eq(0)).setTap(function(){o&&o(a&&a.val()),r&&r.off(),s&&s.off(),e.remove()})),n.cancel&&(s=M.event(t.eq(1)).setTap(function(){i&&i(a&&a.val()),r&&r.off(),s&&s.off(),e.remove()}))}function g(e,t,n,o){var i=$("<table><tr><td></td></tr></table>"),a=i.find("td");e.addClass(w("built")),void 0!==t?a.before('<td><i class="ico fc-'+n.name+'">'+t+"</i></td>"):void 0!==n&&"normal"!==n.name&&a.before('<td><i class="ico fc-'+n.name+'">'+n.ico+"</i></td>"),i.find("td:last").append(o),e.append(i)}e.init=function(n){n.getOptions(["size","position","title",["btnClose","isBtnClose"],"content","contentType","footer"],function(e){t=e.title||"未定义标题",a=e.content||null,s=void 0===e.footer?null:e.footer,function(){switch(e.contentType){case"url":case 1:case"1":r=1;break;default:case"html":case 0:case"0":r=0}}(),i=C(e.size,400,300),o=void 0===(o=e.position)?x.an.pos[0]:o,function(){switch(o){case x.an.pos[0]:case"0":o=x.an.pos[0];break;case x.an.pos[1]:case"1":case"full":case"fullScreen":o=x.an.pos[1];break;case x.an.pos[2]:case"2":case"topLeft":o=x.an.pos[2];break;case x.an.pos[3]:case"3":case"topRight":o=x.an.pos[3];break;case x.an.pos[5]:case"4":case"bottomLeft":o=x.an.pos[5];break;case x.an.pos[6]:case"5":case"bottomRight":o=x.an.pos[6];break;default:o=C(o,0,0)}}(),l=x.boolCheck(e.btnClose,!0)});var i,o,t,a,r,s,l,e='<div class="'+w("header")+'">'+t+'</div><div class="'+w("body")+'" /><div class="'+w("footer")+'" /><a class="'+w("close")+' ico">&#xed1f;</a>',c=n.current.html(e),u=(c.children("div").eq(0),c.children("div").eq(1)),d=c.children("div").eq(2),p=c.children("a"),f=!1,h=!1,g=null,v={open:x.noop,close:x.noop};function m(){return h&&!f&&(f=!(h=!1),x.backmask.close(n.public),window.setTimeout(function(){c.removeClass("on")},10),window.setTimeout(function(){f=!1,v.close.call(n.public)},310)),n.public}function b(e){var t={};e=C(e,400,300),o!==x.an.pos[1]&&(t.width=e.x,t.height=e.y),o===x.an.pos[2]?c.addClass(w(x.an.pos[2])):o===x.an.pos[3]?c.addClass(w(x.an.pos[3])):o===x.an.pos[5]?c.addClass(w(x.an.pos[5])):o===x.an.pos[6]?c.addClass(w(x.an.pos[6])):o===x.an.pos[1]?c.addClass(w(x.an.pos[1])):o===x.an.pos[0]?c.addClass(w(x.an.pos[0])):(t.top=o.y,t.left=o.x),c.css(t)}function y(){var e,o;switch(b(i),l||p.detach(),r){case 0:n.origin.length?u.append(n.origin.html()):u.append(a);break;case 1:e=n.origin.length?n.origin.html():a,u.append('<iframe src="'+e+'" />'),u.css("overflow-y","hidden")}function t(e){var t,n;M.type.isObject(e)&&(t=x.jqe[2].clone().addClass("btn"),n=M.event(t),t.html(e.text||""),t.event=n,e.class&&t.addClass(e.class),e.tap&&n.setTap(e.tap),o.push(t))}null===s?d.remove():(!M.type.isObject(s)&&!M.type.isArray(s)||M.type.isJQuery(s)?d.html(s):(o=[],M.type.isArray(s)?s.forEach(function(e){t(e)}):t(s),o.forEach(function(e){d.append(e)}),s=o),u.css("bottom","3em")),x.body().append(c)}return y(),g=M.event(p).setTap(m),M.extend(n.public,{getContent:function(){return u},getFooterContent:function(){return d},open:function(){return h||f||(f=h=!0,x.backmask.open(n.public),window.setTimeout(function(){c.addClass("on")},10),window.setTimeout(function(){f=!1,v.open.call(n.public)},310)),n.public},close:m,remove:function e(){return h||f?(h&&m(),window.setTimeout(e,310)):(M.type.isArray(s)&&s.forEach(function(e){e.event.off()}),c.remove(),g.off(),n.remove()),null},setOpen:function(e){return v.open=e,n.public},setClose:function(e){return v.close=e,n.public},size:b})},d.position={center:x.an.pos[0],fullScreen:x.an.pos[1],topLeft:x.an.pos[2],topRight:x.an.pos[3],bottomLeft:x.an.pos[5],bottomRight:x.an.pos[6]},d.contentType={html:0,url:1},d.alert=function(){return n.call(this,x.argsToArray(arguments),function(e,t,n,o,i){var a=d({title:e,size:[300,220],btnClose:!1,footer:p}),e=a.getContent(),r=a.getFooterContent(),s=r.children(".btn:eq(0)"),l={send:1};return g(e,n,o,t),a.setOpen(function(){s.on("keydown",function(e){e=e.keyCode;32!==e&&13!==e||($(this).blur(),i(),a.close())}).focus(),h(a,r.children("button"),l,i)}).setClose(function(){s.off("keydown")}).open(),a})},d.confirm=function(){return n.call(this,x.argsToArray(arguments),function(e,t,n,o,i,a){var r=d({title:e,size:[300,220],btnClose:!1,footer:p+f}),e=r.getContent(),s=r.getFooterContent(),l=s.children(".btn:eq(0)"),c=s.children(".btn:eq(1)"),u={send:1,cancel:1};return g(e,n,o,t),r.setOpen(function(){l.on("keydown",function(e){e=e.keyCode;32!==e&&13!==e||($(this).blur(),i(),r.close())}).focus(),c.on("keydown",function(e){e=e.keyCode;32!==e&&13!==e||($(this).blur(),a(),r.close())}),h(r,s.children("button"),u,i,a)}).setClose(function(){l.off("keydown"),c.off("keydown")}).open(),r})},d.prompt=function(){return n.call(this,x.argsToArray(arguments),function(e,t,n,o,i,a){var r=d({title:e,size:[300,220],btnClose:!1,footer:p+f}),e=r.getContent(),s=r.getFooterContent(),l=$('<input type="text" class="textbox" />'),c={send:1,cancel:1};return g(e,n,o,t),e.find("td:last").append(l),r.setOpen(function(){h(r,s.children("button"),c,i,a,l)}).open(),r})}})}),ud2.libExtend(function(b,y){"use strict";b.controlCreater("message",function(e,t){e.className;var m={};m[b.an.pos[2]]=[],m[b.an.pos[4]]=[],m[b.an.pos[3]]=[],m[b.an.pos[5]]=[],m[b.an.pos[7]]=[],m[b.an.pos[6]]=[],e.init=function(a){a.getOptions(["position","message","style","autoSwitch",["btnClose","isBtnClose"],"closeTime"],function(e){s=b.boolCheck(e.autoSwitch,!0),function(){switch(e.position){case b.an.pos[2]:case"topLeft":case"1":case 1:r=b.an.pos[2];break;case b.an.pos[3]:case"topRight":case"2":case 2:r=b.an.pos[3];break;case b.an.pos[7]:case"bottomCenter":case"3":case 3:r=b.an.pos[7];break;case b.an.pos[5]:case"bottomLeft":case"4":case 4:r=b.an.pos[5];break;case b.an.pos[6]:case"bottomRight":case"5":case 5:r=b.an.pos[6];break;default:case b.an.pos[4]:case"topCenter":case"0":case 0:r=b.an.pos[4]}}(),a.origin.length?(t=e.message||a.origin.text()||"未知消息",a.origin.remove()):t=e.message||"未知消息",n=e.style||"",o=b.boolCheck(e.btnClose,!0),l=e.closeTime||5e3});var r,t,n,s,o,l,e,i='<div class="message-content">'+t+"</div>",c=a.current.html(i),u=b.jqe[2].clone().addClass("message-close"),d=!1,p=null,f={open:b.noop,close:b.noop};function h(){var e,t,n,o,i;if(!d){switch(e=c.outerWidth(),t=c.outerHeight(),o=m[r].length,d=!0,m[r].push(a.public),i=12+o*(t+12),r){case b.an.pos[4]:n={top:i,left:"50%",marginLeft:-e/2};break;case b.an.pos[2]:n={top:i,left:12};break;case b.an.pos[3]:n={top:i,right:12};break;case b.an.pos[7]:n={bottom:i,left:"50%",marginLeft:-e/2};break;case b.an.pos[5]:n={bottom:i,left:12};break;case b.an.pos[6]:n={bottom:i,right:12}}a.public.data={tb:i},c.css(n).addClass("on"),f.open.call(a.public),-1!==l&&s&&(p=window.setTimeout(function(){v()},l))}return a.public}function g(){var e,t,n,o,i;if(d){for(null!==p&&window.clearTimeout(p),e=c.outerHeight(),t=m[r].indexOf(a.public),n=m[r].length,d=!1,o=t;o<n;o++)i=m[r][o].data.tb-e-12,m[r][o].data.tb=i,r===b.an.pos[2]||r===b.an.pos[3]||r===b.an.pos[4]?m[r][o].getContent().css("top",i):m[r][o].getContent().css("bottom",i);m[r].splice(t,1),c.removeClass("on"),f.close.call(a.public)}return a.public}function v(){return d?(g(),window.setTimeout(v,310)):(c.remove(),e.off(),a.remove()),null}return c.addClass("message"),b.body().append(c),""!==n&&c.addClass(n.name||n),o&&c.append(u),s&&h(),e=y.event(u).setTap(function(){v()}),y.extend(a.public,{getContent:function(){return c},open:h,close:g,remove:v,setOpen:function(e){return f.open=e,a.public},setClose:function(e){return f.close=e,a.public}})},t.position={topCenter:b.an.pos[4],topLeft:b.an.pos[2],topRight:b.an.pos[3],bottomCenter:b.an.pos[7],bottomLeft:b.an.pos[5],bottomRight:b.an.pos[6]},t.info=function(e){t({message:e,style:y.style.info})},t.warning=function(e){t({message:e,style:y.style.warning})},t.success=function(e){t({message:e,style:y.style.success})},t.danger=function(e){t({message:e,style:y.style.danger})}})}),ud2.libExtend(function(f,h){"use strict";f.controlCreater("switch",function(e,t){var n=e.className,p=f.className(n);e.init=function(t){t.getOptions(["value",["disabled","isDisabled"],"color"],function(e){n=1===parseInt(e.value)?1:0,o=f.boolCheck(e.disabled,!1),i=e.color||""});var n,o,i,a=t.current.html('<input type="checkbox" /><input type="hidden" />'),r=a.children('[type="hidden"]'),e=a.children('[type="checkbox"]'),s={open:f.noop,close:f.noop,change:f.noop};function l(e){n!==e&&(n=e,r.val(n),s.change.call(t.public,n),(1===n?s.open:s.close).call(t.public))}function c(){return n||(a.addClass("checked"),l(1)),t.public}function u(){return n&&(a.removeClass("checked"),l(0)),t.public}function d(){return(n?u:c)(),t.public}return t.origin.length&&(t.origin.after(a),t.origin.remove(),t.transferStyles(),t.transferAttrs({accept:e,attrReg:"tabindex"}),t.transferAttrs({accept:r,attrReg:"name"})),""!==i&&a.addClass(i.name||i),1===n&&a.addClass("checked"),r.val(n),o&&a.attr(p("disabled"),!0),h.event(a).setTap(function(){o||d()}),h.extend(t.public,{val:function(e){return void 0!==e?((e?c:u)(),t.public):n},disabled:function(e){return void 0!==e?(o!==e&&(o=!!e,e?a.attr(p("disabled"),"true"):a.removeAttr(p("disabled"))),t.public):o},open:c,close:u,toggle:d,setOpen:function(e){return s.open=e,t.public},setClose:function(e){return s.close=e,t.public},setChange:function(e){return s.change=e,t.public}})}})}),ud2.libExtend(function(V,J){"use strict";V.controlCreater("select",function(e,$){var t=e.className,U=V.className(t),c="select",B=c+".group",Q=c+".option";V.creater("group",function(){var t,o,i,e=arguments,a=[],r={select:null},n=e[0];return o=1===e.length&&J.type.isObject(n)?(t=n.label,!!n.isDisabled):(t=e[0]||"未命名选项组",!!e[1]),t=String(t),i=V.jqe[0].clone().attr("title",t).addClass(U("group")),o&&i.attr(U("disabled"),"true"),J.extend(r,{type:"select.group",options:a,getContent:function(){return i},label:function(e){return void 0!==e?(t=String(e),i.attr("title",t),r):t},disabled:function(e){var t,n;if(void 0===e)return o;if(o!==e)if(o=!!e,e){if(i.attr(U("disabled"),"true"),0!==(n=a.length))for(t=0;t<n;t++)r.select.valOption(a[t],0)}else i.removeAttr(U("disabled"));return r},optionAdd:function(e){return e&&e.type===Q&&!e.group&&(o&&e.selected()&&e.selected(0),e.group=r,a.push(e),i.append(e.getContent()),r.select&&e.selectIn(r.select)),r},optionRemove:function(e){var t;return e&&e.type===Q&&e.group===r&&-1<(t=a.indexOf(e))&&(a.splice(t,1),e.group=null,e.getContent().detach(),e.select&&e.selectOut()),r},selectIn:function(e){return e&&e.type===c&&!r.select&&e.groupAdd(r),r},selectOut:function(){return r.select&&r.select.groupRemove(r),r}})},$),V.creater("option",function(){var t,n,o,i,a,e=arguments,r={group:null,select:null},s=e[0];function l(e){return void 0!==e?(!e||o||null!==r.group&&(null===r.group||r.group.disabled())?(i=!1,a.removeClass("on")):(i=!0,a.addClass("on")),r):i}return i=1===e.length&&J.type.isObject(s)?(t=s.label,n=s.value,!(o=!!s.isDisabled)&&!!s.isSelected):(t=e[0],n=e[1],!(o=!!e[2])&&!!e[3]),t=String(t)||"未命名选项",null!==n&&(n=String(n)),a=V.jqe[2].clone().html(t).attr("title",t).attr(U("value"),n).addClass(U("option")),o&&a.attr(U("disabled"),"true"),i&&l(!0),J.event(a).setTap(function(){r.disabled()||r.group&&(!r.group||r.group.disabled())||r.select&&(r.select.valOption(r),r.select.multiple()||r.select.close())}),J.extend(r,{type:"select.option",getContent:function(){return a},label:function(e){return void 0!==e?(t=String(e),a.html(t).attr("title",t),r):t},val:function(e){return void 0!==e?(n=String(e),a.attr(U("value"),n),r):n},selected:l,disabled:function(e){return void 0!==e?((e=!!e)?(o=!0,a.attr(U("disabled"),"true"),i&&null!==r.select&&r.select.valOption(r,!1)):(o=!1,a.removeAttr(U("disabled"))),r):o},groupIn:function(e){return!e||e.type!==B||r.group||r.select||e.optionAdd(r),r},groupOut:function(){return r.group&&r.group.optionRemove(r),r},selectIn:function(e){return e&&e.type===c&&!r.select&&e.optionAdd(r),r},selectOut:function(){return r.select&&r.select.optionRemove(r),r}})},$),$.direction={up:1,down:0},e.init=function(d){d.getOptions(["maxheight","placeholder",["multiple","isMultiple"],"dir","emptyText",["moveSelected","isMoveSelected"]],function(e){o=parseInt(e.maxheight),!isNaN(o)&&0!==o||(o=20),i=e.placeholder||"请选择以下项目",a=V.boolCheck(e.multiple,!1),n=e.emptyText||"当前列表未包含任何项",r=V.boolCheck(e.moveSelected,!1),t=e.dir});var o,i,a,t,n,r,s,e='<div class="'+U("put")+'"><a class="'+U("btn")+'" /><i class="ud2-ctrl-arrow" /></div><div class="'+U("list")+'" /><input type="checkbox" /><input type="hidden" />',l=d.current.html(e),c=l.children("div:last"),u=l.children("div:first"),p=u.children("a"),f=l.children('[type="checkbox"]'),h=l.children('[type="hidden"]'),g=!1,v=[],m=[],b=[],y=[],w={open:V.noop,close:V.noop,change:V.noop};function C(e){switch(e){case"up":case"1":case 1:t=1,l.removeClass(U("dir-down")).addClass(U("dir-up"));break;default:case"down":case"0":case 0:t=0,l.removeClass(U("dir-up")).addClass(U("dir-down"))}}function x(e){i=e,p.html(i)}function M(e,t){for(var n=void 0===e,o="option, ["+U("option")+"]",i=(n?d.origin:t).children(o),a=0,r=i.length;a<r;a++){i.eq(a);var s=i.eq(a).html(),l=i.eq(a).attr("value"),c=i.eq(a).attr(U("value")),u=void 0===c?void 0===l?null:l:c,l=!!(void 0!==i.eq(a).attr("disabled")&&"false"!==i.eq(a).attr("disabled")||void 0!==i.eq(a).attr(U("disabled"))&&"false"!==i.eq(a).attr(U("disabled"))),c=!!(void 0!==i.eq(a).attr("selected")&&"false"!==i.eq(a).attr("selected")||void 0!==i.eq(a).attr(U("selected"))&&"false"!==i.eq(a).attr(U("selected"))),c=$.option(s,u,l,c);n?z(c):e.optionAdd(c)}}function k(e){return J.type.isString(e)?(x(e),d.public):i}function T(e){return J.type.isString(e)?(n=e,A().attr(U("empty"),n),d.public):n}function S(e){return void 0!==e?(C(e),d.public):t}function D(e){var t,n;if(void 0===e)return a;if((e=!!e)!==a){if(a=e,1<(n=y.length)&&!a)for(t=0;t<n-1;t++)y[0].selected(0),y.splice(0,1);0<n&&(a?p.html("1个项目"):p.html(y[0].label())),w.change.call(d.public,O())}return d.public}function L(){var e,t,n;return g||(g=!0,l.addClass("on").focus(),e=b.length,t=v.length,n=0,n=o<(n=2.5*e+2*t)?o:n,c.css("height",(0===n?2:n)+"em"),s.recountPosition(),d.public,r&&y[0]&&(n=y[0].getContent().position().top,s.move(0,n,0)),w.open.call(d.public)),d.public}function N(){return g&&(g=!1,l.removeClass("on"),w.close.call(d.public)),d.public}function j(){return(g?N:L)(),d.public}function A(){return s.getContent()}function O(e){var t,n=[];if(void 0!==e){if(!J.type.isArray(e))return O(V.argsToArray(arguments));for(e=e.map(function(e){return null===e?e:String(e)}),t=y.length-1;0<=t;t--)F(y[t],!1);for(t=0;t<b.length;t++)b[t].disabled()||b[t].group&&(!b[t].group||b[t].group.disabled())||-1===e.indexOf(b[t].val())||F(b[t]);return d.public}for(t=0;t<y.length;t++)n.push(y[t].val());return h.val(n.join(",")),a?n:null!==n[0]?n[0]:null}function F(e,t){var n,o=void 0!==t;if(e&&e.type&&e.type===Q){if(-1===b.indexOf(e))return d.public;if(n=y.indexOf(e),a){if(o&&(t&&-1<n||!t&&-1===n))return d.public;(!o||o&&!t)&&-1<n?(e.selected(0),y.splice(n,1)):(!o||o&&t)&&-1===n&&(e.selected(1),y.push(e)),0===y.length?p.removeAttr(U("value")).html(i):p.attr(U("value"),!0).html(y.length+"个项目")}else{if(-1<n&&(!o||o&&t)||-1===n&&o&&!t)return d.public;y[0]&&(y[0].selected(0),y.splice(0,1)),-1<n&&o&&!t?p.removeAttr(U("value")).html(i):(e.selected(1),y.push(e),p.attr(U("value"),!0).html(e.label()))}return w.change.call(d.public,O()),d.public}return y}function E(e){var t,n;if(e&&e.type===B&&!e.select&&(e.select=d.public,v.push(e),s.getContent().append(e.getContent()),0!==(n=e.options.length)))for(t=0;t<n;t++)e.options[t].selectIn(d.public);return d.public}function I(e){var t,n;if(e&&e.type===B&&e.select===d.public){if(0<(n=e.options.length))for(t=0;t<n;t++)e.options[t].selected()&&(F(e.options[t],!1),e.options[t].selected(1)),b.splice(b.indexOf(e.options[t]),1),e.options[t].select=null;v.splice(v.indexOf(e),1),e.select=null,e.getContent().detach()}return d.public}function z(e){var t;return e&&e.type===Q&&!e.select&&(e.group?(e.select=d.public,b.push(e)):(e.select=d.public,b.push(e),m.push(e),1===(t=m.length)?s.getContent().prepend(e.getContent()):m[t-2].getContent().after(e.getContent())),e.selected()&&F(e)),d.public}function R(e){return e&&e.type===Q&&e.select===d.public&&(e.group||m.splice(m.indexOf(e),1),e.selected()&&(F(e,!1),e.selected(1)),b.splice(b.indexOf(e),1),e.select=null,e.getContent().detach(),e.group&&e.groupOut()),d.public}function Y(e){return w.open=e,d.public}function q(e){return w.close=e,d.public}function P(e){return w.change=e,d.public}return d.origin.length&&(d.origin.after(l),d.origin.remove(),d.transferStyles(),d.transferAttrs({accept:f,attrReg:"tabindex"}),d.transferAttrs({accept:h,attrReg:"name"})),C(t),x(i),s=J.scroll(c,{barState:0,isScrollMode:!0,barColor:"rgba(0,0,0,.2)",barColorOn:"rgba(0,0,0,.4)"}),A().attr(U("empty"),n),d.autoClose=N,J.event(u).setTap(j),f.on(V.an.event[17],L),J.extend(d.public,{getContent:A,placeholder:k,emptyText:T,direction:S,multiple:D,groups:v,options:b,optionsByValue:y,optionsDefault:m,groupAdd:E,groupRemove:I,optionAdd:z,optionRemove:R,val:O,valOption:F,open:L,close:N,toggle:j,setOpen:Y,setClose:q,setChange:P}),function(){if(d.origin.length){var e="optgroup, ["+U("optgroup")+"]",t=d.origin.children(e);M();for(var n=0,o=t.length;n<o;n++){var i=t.eq(n),a=i.attr("label")||i.attr(U("label"))||"",r=!!(void 0!==i.attr("disabled")&&"false"!==i.attr("disabled")||void 0!==i.attr(U("disabled"))&&"false"!==i.attr(U("disabled")));E(r=$.group(a,r)),M(r,i)}}}(),d.public}})}),ud2.libExtend(function(C,x){"use strict";C.controlCreater("number",function(e,t){var n=e.className,w=C.className(n);e.init=function(t){t.getOptions(["step","min","max","value"],function(e){i=parseFloat(e.step),!isNaN(i)&&0!==i||(i=1),r=parseFloat(e.min),isNaN(r)&&(r=0),s=parseFloat(e.max),isNaN(s)&&(s=100),l=e.value,s<r&&(s=r),l=g(l),a=-1<i.toString().indexOf(".")?i.toString().split(".")[1].length:0});var i,a,r,s,l,e,n='<a class="'+w("ico")+' ud2-ctrl-ico">&#xe106;</a><div class="'+w("move")+'"><input type="text" value="0" class="ud2-ctrl-textbox" /></div><a class="'+w("ico")+' ud2-ctrl-ico">&#xe107;</a>',o=t.current.html(n),c=o.find("input"),u=o.children("a:first"),d=o.children("a:last"),p=u.next(),f=!1,h={change:C.noop};function g(e){return e=parseFloat(e),(isNaN(e)||e<r)&&(e=r),s<e&&(e=s),e=Math.round((e-r)/i)*i+r,e=parseFloat(e.toFixed(a)),s<e&&(e-=i),e}function v(e){var t,n,o;f||(f=!0,e&&s<l+i||!e&&l-i<r?f=!1:(t='<input class="ud2-ctrl-textbox" />',n=C.jqe[0].clone().addClass(w("view")).html(t),o=C.jqe[0].clone().addClass(w("view")).html(t),c.parent(),l=e?parseFloat((l+i).toFixed(a)):parseFloat((l-i).toFixed(a)),n.children().val(l),o.children().val(l),c.before(n),c.after(o),p.animate({top:e?"-100%":"100%"},300,function(){f=!1,y(l),p.css("top",0),n.remove(),o.remove()})))}function m(){v(0)}function b(){v(1)}function y(e){void 0!==e?(l=g(e),h.change.call(t.public,l)):l=g(l),c.val(l)}return t.origin.length&&(t.origin.after(o),t.origin.remove(),t.transferStyles(),t.transferAttrs({accept:c,attrReg:"name|tabindex"})),y(),x.event(u).setTap(m),x.event(d).setTap(b),e=x.eventKeyShortcut({autoOn:!1}).add(x.key.UP,m).add(x.key.DOWN,b).add(x.key.ENTER,function(){c.blur()}),c.on(C.an.event[17],function(){e.on(),o.addClass("on")}).blur(function(){e.off(),y(c.val()),o.removeClass("on")}),x.extend(t.public,{val:function(e){return void 0!==e?(y(e),t.public):l},setChange:function(e){return h.change=e,t.public}})}})}),ud2.libExtend(function(Y,q){"use strict";Y.controlCreater("range",function(e,t){var n=e.className,R=Y.className(n);e.init=function(a){var r,s,l,c,u,d,p,e,t=a.getOptions([["both","isBoth"],"min","max","value","step"],function(e){var t;s=parseFloat(e.step),!isNaN(s)&&0!==s||(s=1),c=parseFloat(e.min),isNaN(c)&&(c=0),u=parseFloat(e.max),isNaN(u)&&(u=100),t=C(e.value),d=t[0],p=t[1],r=Y.boolCheck(e.both,!1),u<c&&(u=c),l=-1<s.toString().indexOf(".")?s.toString().split(".")[1].length:0}),n='<input type="text" maxlength="20" class="ud2-ctrl-textbox" /><div class="ud2-ctrl-power"><i class="ico ico-range-x"></i><i class="ico ico-solid-cancel"></i></div><div class="'+R("list")+'"><div class="'+R("end")+'" /><div class="'+R("back")+'" /></div>',o=a.current.html(n),f=o.children("input"),i=f.next(),h=i.next(),g=Y.jqe[2].clone().addClass(R("hand")),v=g.clone(),m=h.find(R("back",1)),b={max:0,bw:0,w:0,nl:0,nr:0},y=!1,w={open:Y.noop,close:Y.noop,change:Y.noop};function C(e){return e=void 0!==e?(""+e).split(","):[0,0],[parseFloat(e[0])||0,parseFloat(e[1])||0]}function x(){b.nl=T(d),r&&(b.nr=T(p))}function M(){b.w=g.outerWidth(),b.bw=h.width(),b.max=b.bw-b.w}function k(e){return e*b.max/b.bw*100}function T(e){return(e-c)/(u-c)}function S(e,t){var n,o,i;u<(e=e<c?c:e)&&(e=u),d=Math.round((e-c)/s)*s+c,d=parseFloat(d.toFixed(l)),u<d&&(d-=s),i=T(d),g.css("left",k(i)+"%"),i=r?(u<(t=t<c?c:t)&&(t=u),p=Math.round((t-c)/s)*s+c,p=parseFloat(p.toFixed(l)),u<p&&(p-=s),o=T(p),v.css({left:k(o)+"%"}),n=Math.min(i,o),e=Math.max(i,o),t=Math.min(d,p),o=Math.max(d,p),g.css("z-index",d+1e4),v.css("z-index",p+1e4),m.css({left:100*n+"%",width:100*(e-n)+"%"}),f.val(t+","+o),[t,o]):(m.css("width",100*i+"%"),f.val(d),d),w.change.call(a.public,i)}function D(){return y||(M(),t.both?S(d,p):S(d),x(),y=!0,o.addClass("on"),i.addClass(Y.prefix+"ctrl-power-on"),e.on(),w.open.call(a.public)),a.public}function L(){return y&&(y=!1,o.removeClass("on"),i.removeClass(Y.prefix+"ctrl-power-on"),e.off(),w.close.call(a.public)),a.public}function N(){return(y?L:D)(),a.public}function j(e,t){e=e*b.max+t,t=null;return(e=e<0?0:e)>b.max&&(e=b.max),t=parseFloat(((u-c)*e/b.max+c).toFixed(l)),t=isNaN(t)?c:t}function A(e){t.both?S(j(b.nl,e.x),p):S(j(b.nl,e.x))}function O(){b.nl=T(d)}function F(e){S(d,j(b.nr,e.x))}function E(){b.nr=T(p)}function I(){D()}function z(){var e=C(f.val());M(),S(e[0],e[1]),x()}return m.after(g),r&&m.after(v),a.origin.length&&(a.origin.after(o),a.origin.remove(),a.transferStyles(),a.transferAttrs({accept:f,attrReg:"name|tabindex"})),a.autoClose=L,x(),M(),S(d,p),q.event(i).setTap(N),q.event(g,{stopPropagation:!0}).setDown(M).setPan(A).setUp(O),q.event(v,{stopPropagation:!0}).setDown(M).setPan(F).setUp(E),e=q.eventKeyShortcut({autoOn:!1}).add(q.key.ENTER,function(){f.blur()}),q.callbacks.pageResize.add(function(){M(),S(d,p)}),f.on("focus",I).on("blur",z),q.extend(a.public,{val:function(e,t){return void 0!==e?(S((e=C(void 0!==t?[e,t].join(","):q.type.isArray(e)?e.join(","):e))[0],e[1]),a.public):r?[Math.min(d,p),Math.max(d,p)]:d},open:D,close:L,toggle:N,setOpen:function(e){return w.open=e,a.public},setClose:function(e){return w.close=e,a.public},setChange:function(e){return w.change=e,a.public}})}})}),ud2.libExtend(function(I,z){"use strict";I.controlCreater("date",function(e,t){var n=e.className,N=I.className(n),j=["上一年","下一年","上个月","下个月","前12年","后12年","年份选择","返回日期选择"],A=["日","一","二","三","四","五","六"],O=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],F=[31,28,31,30,31,30,31,31,30,31,30,31],E=z.time();e.init=function(i){i.getOptions(["placeholder","format","value","shortkey"],function(e){t=e.placeholder||"请选择日期",r=e.format||"yyyy/MM/dd",a=e.value||null,n=!1!==n});var t,r,a,n,o,e,s,d={seats:function(e){return(1===e.toString().length?"0":"")+e},toString:function(){return r.replace(/[Yy]{4}/,this.value.getFullYear()).replace(/[Yy]{2}/,this.value.getFullYear()-2e3).replace(/[Mm]{2}/,this.seats(this.value.getMonth()+1)).replace(/[Mm]/,this.value.getMonth()+1).replace(/[Dd]{2}/,this.seats(this.value.getDate())).replace(/[Dd]/,this.value.getDate())},setDateValue:function(e,t,n){var o=a;a=e instanceof Date?(this.value=new Date(e.getTime()),this.toString()):3===arguments.length?(this.value=new Date(e,t,n),this.toString()):(this.value=null,""),p.val(a),o!==a&&C.change.call(i.public,a)},selectReset:function(){this.select=new Date((this.value||this.now).getTime()),M()},now:new Date(E.valueOf()),select:new Date(E.valueOf()),value:null},l='<input type="text" placeholder="'+t+'" maxlength="20" class="ud2-ctrl-textbox" /><span class="ud2-ctrl-power"><i class="ico ico-calendar" /><i class="ico ico-solid-cancel" /></span><div class="'+N("list")+'"><div class="'+N("datelist")+'"><div class="'+N("tools")+'"><div class="'+N("tools-left")+'"><a class="ico" title="'+j[0]+'">&#xec00;</a><a class="ico" title="'+j[2]+'">&#xec01;</a></div><div class="'+N("tools-right")+'"><a class="ico" title="'+j[3]+'">&#xec02;</a><a class="ico" title="'+j[1]+'">&#xec03;</a></div><div class="'+N("tools-text")+'" title="'+j[6]+'">- 年 - 月</div></div><table /><div class="'+N("btns")+'"><button class="btn sm" tabindex="-1">今日</button> <button class="btn sm" tabindex="-1">清空</button></div></div><div class="'+N("ymlist")+'"><div class="'+N("tools")+'"><div class="'+N("tools-left")+'"><a class="ico" title="'+j[4]+'">&#xec00;</a></div><div class="'+N("tools-right")+'"><a class="ico" title="'+j[5]+'">&#xec03;</a></div><div class="'+N("tools-text")+'" title="'+j[7]+'">年份 / 月份</div></div><table /><div class="'+N("btns")+'"><button class="btn sm" tabindex="-1">确定</button></div></div></div>',c=i.current.html(l),u=c.children(N("list",1)),p=c.children("input"),f=p.next(),h=c.find(N("datelist",1)),g=c.find(N("ymlist",1)),v=h.find(N("tools-text",1)),m=g.find(N("tools-text",1)),b=h.find(N("btns button:eq(0)",1)),y=h.find(N("btns button:eq(1)",1)),w=!1,C={open:$.noop,close:$.noop,change:$.noop};function x(n){function o(e){return e=r.replace(/([\\\^\$\*\+\?\{\}\(\)\.\-\=\[\]])/g,"\\$1").replace(/[Yy]{4}/,0===e?"([0-9]{4})":"[0-9]{4}").replace(/[Yy]{2}/,1===e?"([0-9]{2})":"[0-9]{2}").replace(/[Mm]{2}/,2===e?"(0[1-9]|[1][012])":"(?:0[1-9]|[1][012])").replace(/[Mm]/,3===e?"(1[012]|[1-9])":"(?:1[012]|[1-9])").replace(/[Dd]{2}/,4===e?"(0[1-9]|[12][0-9]|3[01])":"(?:0[1-9]|[12][0-9]|3[01])").replace(/[Dd]/,5===e?"([12][0-9]|3[01]|[1-9])":"(?:[12][0-9]|3[01]|[1-9])"),new RegExp(e)}var e,t,i,a=function(e){var t=o(2*e).exec(n);return t=(t=t&&t[1])||(t=o(2*e+1).exec(n))&&t[1],parseInt(t)};n?(8===n.length&&(n=n.substring(0,4)+"/"+n.substring(4,6)+"/"+n.substring(6,8)),o().test(n)?(e=a(0)||d.now.getFullYear(),t=a(1)||1,i=a(2)||1,e<100&&(e+=2e3)):(a=new Date(n),i=isNaN(a)?(e=d.now.getFullYear(),t=d.now.getMonth()+1,d.now.getDate()):(e=a.getFullYear(),t=a.getMonth()+1,a.getDate())),d.setDateValue(e,t-1,i)):d.setDateValue(),d.selectReset()}function M(){var e,t,n,o=h.children("table"),i=h.find(N("tools-text",1)),a=[],r=d.select.getFullYear()%4==0,s=d.select.getMonth()-1<0?11:d.select.getMonth()-1,l=F[d.select.getMonth()],c=F[s],u=new Date(d.select.getFullYear(),d.select.getMonth(),1).getDay();for(e in i.html(d.select.getFullYear()+" 年 "+(d.select.getMonth()+1)+" 月"),r&&1===d.select.getMonth()&&(l=29),r&&2===d.select.getMonth()&&(c=29),a.push("<tr>"),A)a.push("<th>"+A[e]+"</th>");for(a.push("</tr><tr>"),t=-1,n=e=0;e<42;e++)e<u?(t++,a.push('<td class="',N("nomonth"),'">',c-u+e+1,"</td>")):e-t<=l?a.push('<td class="',(e+1)%7==0||(e+1)%7==1?N("weekend"):"",'" ',N("date"),'="',e-t,'" ',d.select.getFullYear()===d.now.getFullYear()&&d.select.getMonth()===d.now.getMonth()&&d.now.getDate()===e-t?N("today "):"",d.value&&d.select.getFullYear()===d.value.getFullYear()&&d.select.getMonth()===d.value.getMonth()&&d.value.getDate()===e-t?N("now "):"",">",e-t,"</td>"):(n++,a.push('<td class="',N("nomonth"),'">',n,"</td>")),(e+1)%7==0&&a.push("</tr><tr>");o.children().remove(),o.append(a.join("")),z.event(o.find("["+N("date")+"]")).setTap(function(){d.setDateValue(d.select.getFullYear(),d.select.getMonth(),this.attr(N("date"))),p.blur(),S(!0)})}function k(){var e,t=g.children("table"),n=[],o=N("year"),i="["+o+"]",a=N("month"),r="["+a+"]",s=N("now"),l=d.select.getFullYear()%12==0?d.select.getFullYear()-11:12*parseInt(d.select.getFullYear()/12)+1;for(n.push("<tr><td>"),e=0;e<12;e++)n.push("<div ",N("year"),'="',l+e,'" ',d.select.getFullYear()===l+e?s:"",">",l+e,"</div>");for(n.push("</td><td>"),e=0;e<12;e++)n.push("<div ",N("month"),'="',e,'" ',d.select.getMonth()===e?s:"",">",O[e],"</div>");n.push("</td></tr>"),t.children().remove(),t.append(n.join("")),z.event(t.find(i)).setTap(function(){d.select.setFullYear(this.attr(o)),t.find(i).removeAttr(s),this.attr(s,"")}),z.event(t.find(r)).setTap(function(){d.select.setMonth(this.attr(a)),t.find(r).removeAttr(s),this.attr(s,"")})}function T(){return w||(w=!0,c.addClass("on"),f.addClass(I.prefix+"ctrl-power-on"),h.show(),g.hide(),o.on(),L(I.win().width()),C.open.call(i.public)),i.public}function S(e){return w&&(w=!1,c.removeClass("on"),f.removeClass(I.prefix+"ctrl-power-on"),e||(""===(e=p.val())?x():x(e)),M(),o.off(),C.close.call(i.public)),i.public}function D(){return(w?S:T)(),i.public}function L(e){w&&(u.css("left",-1),e=e-(parseInt(u.offset().left)+parseInt(u.outerWidth())-1)-2,u.css("left",e<-1?e:-1))}return i.origin.length&&(i.origin.after(c),i.origin.remove(),i.transferStyles(),i.transferAttrs({accept:p,attrReg:"name|tabindex"})),i.autoClose=S,x(a),s=c.find(N("tools a",1)),M(),z.event(s.eq(0)).setTap(function(){d.select.setFullYear(d.select.getFullYear()-1),M()}),z.event(s.eq(3)).setTap(function(){d.select.setFullYear(d.select.getFullYear()+1),M()}),z.event(s.eq(1)).setTap(function(){d.select.setMonth(d.select.getMonth()-1),M()}),z.event(s.eq(2)).setTap(function(){d.select.setMonth(d.select.getMonth()+1),M()}),z.event(v).setTap(function(){h.slideUp(300),g.slideDown(300),k()}),z.event(b).setTap(function(){d.setDateValue(d.now.getFullYear(),d.now.getMonth(),d.now.getDate()),d.selectReset(),S(1)}),z.event(y).setTap(function(){d.setDateValue(),d.selectReset(),S(1)}),e=g.find(N("tools a",1)),s=g.find(N("btns button",1)),k(),z.event(e.eq(0)).setTap(function(){d.select.setFullYear(d.select.getFullYear()-12),k()}),z.event(e.eq(1)).setTap(function(){d.select.setFullYear(d.select.getFullYear()+12),k()}),z.event(s.eq(0)).setTap(function(){h.slideDown(300),g.slideUp(300),M()}),z.event(m).setTap(function(){h.slideDown(300),g.slideUp(300),M()}),z.event(f).setTap(D),n&&(o=z.eventKeyShortcut({autoOn:!1}).add(z.key.ENTER,function(){p.blur(),S()}).add(z.key.LEFT,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()-1))}).add(z.key.RIGHT,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()+1))}).add(z.key.UP,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()-7))}).add(z.key.DOWN,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()+7))})),p.on("focus",T),z.callbacks.pageResize.add(L),z.extend(i.public,{placeholder:function(e){return type.isString(e)?(t=e,p.attr("placeholder",t),i.public):t},format:function(e){return type.isString(e)?(r=e,d.setDateValue(d.value),i.public):r},val:function(e){return void 0!==e?(x(e),i.public):a},open:T,close:S,toggle:D,setOpen:function(e){return C.open=e,i.public},setClose:function(e){return C.close=e,i.public},setChange:function(e){return C.change=e,i.public}})}})}),ud2.libExtend(function(G,_){"use strict";G.controlCreater("file",function(e,B){var t=e.className,w=G.className(t),Q="length-error",V="type-error",J="size-error",W="repeat-error",H="server-error",K="server-return-error",X="standard",Z=G.createStyle("simple",X,"custom");e.init=function(a){a.getOptions(["maxlength","maxsize",["rename","isRename"],"renamLength","urlUpload","filter","style"],function(e){var t,n,o="(png|jpg|gif|bmp|svg|ico|html|js|cs|vb|css|less|scss|sass|mp3|mp4|wav|avi|ogg|mov|wmv|webm|flv|swf|txt|pdf|doc|docx|xls|xlsx|ppt|pptx|ett|wpt|dpt|rar|zip|iso)",o=new RegExp("^("+o+",)*"+o+"$");for(r=parseInt(e.maxlength)||20,s=parseInt(e.maxsize)||2048,i=G.boolCheck(e.rename,!0),l=parseInt(e.renameLength)||50,c=e.filter||"",n=(c="all"===(c=o.test(c)?c:"gif,jpg,png")?o.split("|"):c.split(",")).length,t=0;t<n;t++)c[c[t]]=c[t];u=e.urlUpload||"",d=e.style,Z[d]||(d="custom")});var r,s,i,l,c,u,d,e=a.current.html('<input type="file" multiple />'),t=e.children("input"),p=[],o=0,f=0,n=0,h={},g={add:$.noop,remove:$.noop,upload:$.noop,clear:$.noop,progress:$.noop,done:$.noop,fail:$.noop},v={error:function(e,t){switch(e){case Q:_.message.danger("您选择的文件数量已经超过最大个数限制，该限制为 "+r+" 个");break;case V:_.message.danger("您选择的文件类型不符合要求，请您重新选择文件");break;case J:_.message.danger("您选择的文件超出 "+s+"KB 限制，尺寸不符的文件："+t.join("、"));break;case W:_.message.warning("您选择的文件已存在于列表中，重复的文件："+t.join("、"));break;case H:_.message.danger("您的文件 "+t+" 已被阻止，请检查您的文件");break;case K:_.message.danger("文件 "+t+" 被服务器退回，请检查您的文件是否符合要求")}},complete:$.noop,done:$.noop,fail:$.fail};function m(t){var n=0,e=t.length;if(e+p.length>r)v.error.call(a.public,Q);else if(function(e){for(var t,n=0,o=e.length;n<o;n++)if(!(t=(t=e[n].name.split("."))[t.length-1].toLowerCase())||void 0===c[t])return;return 1}(t)){for(var o=[],i=[];n<e;n++)t[n].size>1024*s?o.push(t[n].name):p.some(function(e){return e.name===t[n].name&&e.size===t[n].size})?i.push(t[n].name):(p.push(t[n]),g.add(t[n]),0);0<i.length&&v.error.call(a.public,W,i),0<o.length&&v.error.call(a.public,J,o)}else v.error.call(a.public,V)}function b(){f++}function y(){n++}function w(){return e}function C(){return{state:i,length:l}}function x(){return p}function M(){return f}function k(){return n}function T(){return o}function S(e){return e=G.convertToJQ(e),_.event(e,{stopPropagation:!0}).setTap(function(){0===o&&t.trigger("click")}),h}function D(e,t){return e=G.convertToJQ(e),_.event(e,{stopPropagation:!0}).setTap(function(){0===o&&g.remove.call(this,t)}),h}function L(e){return e=G.convertToJQ(e),_.event(e,{stopPropagation:!0}).setTap(function(){var e,t;if(0===o&&0!==p.length){for(o=1,new FormData,e=0,t=p.length;e<t;e++)!function(t){var e=new FormData,n=u;e.append("file",t),i&&(n+="?name="+t.newname+"&tick="+(new Date).getTime()),$.ajax({type:"POST",url:n,data:e,contentType:!1,processData:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){e=parseInt(e.loaded/e.total*100);g.progress(t,e)},!1),e}}).done(function(e){b(),(e=void 0===(e=v.done.call(a.public,e,t))?!0:e)||(y(),v.error.call(ctrl.public,K,t.name)),g.done(e,t),f===p.length&&(o=2,v.complete.call(a.public))}).fail(function(e){b(),y(),v.fail.call(a.public,e,t),g.fail(t),v.error.call(ctrl.public,H,t.name),f===p.length&&(o=2,v.complete.call(a.public))})}(p[e]);g.upload.call(this)}}),h}function N(e){return e=G.convertToJQ(e),_.event(e,{stopPropagation:!0}).setTap(function(){0===o&&(p.length=0,g.clear.call(this))}),h}function j(e){return g.add=e,h}function A(e){return g.remove=e,h}function O(e){return g.upload=e,h}function F(e){return g.clear=e,h}function E(e){return g.progress=e,h}function I(e){return g.done=e,h}function z(e){return g.fail=e,h}function R(e){return v.error=e,a.public}function Y(e){return v.complete=e,a.public}function q(e){return v.done=e,a.public}function P(e){return v.fail=e,a.public}function U(){var e;m(this.files),""!==t.val()&&("form"!==t.parent().get(0).nodeName.toLowerCase()&&(e=$("<form />"),t.wrap(e)),(e=t.parent()).get(0).reset())}return a.origin.length&&(a.origin.after(e),a.origin.remove(),a.transferStyles(),a.transferAttrs({accept:t,attrReg:"name|tabindex"})),t.on("change",U),_.extend(a.public,{style:_.extend(h,{filesHandler:m,fileAddBtn:S,fileRemoveBtn:D,uploadBtn:L,clearBtn:N,fileAddFn:j,fileRemoveFn:A,uploadFn:O,clearFn:F,progressFn:E,doneFn:I,failFn:z}),getContent:w,getUpState:T,getRenameState:C,getUpfiles:x,getDoneNum:M,getErrorNum:k,setError:R,setComplete:Y,setDone:q,setFail:P}),d===X&&B.standard(a.public),a.public},B.style=Z,B.standard=function(t){var n,a,e,r,s,o,l,c,u,d,i=t&&t.ud2&&"file"===t.type?t:_.file.create.apply(B,arguments);function p(e){var t,n=$('<div class="'+w("full-figure")+'"><div class="'+w("full-img")+'"><img ondragstart="return false;" /></div>'+(c.state?'<div class="'+w("full-rename")+'"><input type="text" value="'+e.name.substring(0,c.length)+'" maxlength="'+c.length+'" /></div>':"<div>"+e.name+"</div>")+'<div class="'+w("full-close")+'"></div><div class="'+w("full-progress")+'"></div></div>'),o=n.find("input"),i=n.children(w("full-close",1));1===u.length&&(a.fadeOut(200),r.fadeIn(200),s.fadeIn(200)),/^image\/(png|jpeg|gif|bmp|svg)/.test(e.type)?((t=new FileReader).readAsDataURL(e),t.addEventListener("loadend",function(){n.find("img").attr("src",t.result)})):(n.find("img").attr("src","data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEzOCAxMTgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzOCAxMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnB7ZmlsbDojZmZmO30NCjwvc3R5bGU+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik05MS42LDQzLjJjLTEuMi0xLjctMy0zLjctNC45LTUuNmMtMS45LTEuOS0zLjktMy42LTUuNi00LjljLTIuOS0yLjEtNC4zLTIuNC01LjEtMi40SDQ4LjUNCgkJYy0yLjUsMC00LjUsMi00LjUsNC41djQ4LjJjMCwyLjUsMiw0LjUsNC41LDQuNWg0MS4xYzIuNSwwLDQuNS0yLDQuNS00LjVWNDguM0M5NCw0Ny41LDkzLjgsNDYuMSw5MS42LDQzLjJ6IE04NC4zLDQwLjINCgkJYzEuNywxLjcsMy4xLDMuMyw0LjEsNC41aC04LjZ2LTguNkM4MSwzNy4xLDgyLjUsMzguNSw4NC4zLDQwLjJMODQuMyw0MC4yeiBNOTAuNCw4My4xYzAsMC41LTAuNCwwLjktMC45LDAuOUg0OC41DQoJCWMtMC41LDAtMC45LTAuNC0wLjktMC45VjM0LjljMC0wLjUsMC40LTAuOSwwLjktMC45YzAsMCwyNy43LDAsMjcuNywwdjEyLjVjMCwxLDAuOCwxLjgsMS44LDEuOGgxMi41VjgzLjF6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDc2LjloLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw3Ni4xLDgyLjUsNzYuOSw4MS41LDc2Ljl6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDY5LjdoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2OC45LDgyLjUsNjkuNyw4MS41LDY5Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDYyLjZoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2MS44LDgyLjUsNjIuNiw4MS41LDYyLjZ6Ii8+DQo8L3N2Zz4="),n.find("img").css("background","#3f99d5")),n.data("file",e),e.element=n,d.fileRemoveBtn(i,e),c.state&&(e.newname=e.name,o.on(G.an.event[20],function(e){e.preventDefault(),$(this).select()}).on(G.an.event[18],function(){e.newname=$(this).val()})),l.before(n),window.setTimeout(function(){n.addClass(w("full-figure-on"))},150)}function f(e){var t=u.indexOf(e);u.splice(t,1),e.element.removeClass(w("full-figure-on")),window.setTimeout(function(){e.element.remove()},100),0===u.length&&(a.show(),r.hide(),s.hide())}function h(){r.children().not("["+w("add")+"]").remove(),a.show(),r.hide(),s.hide()}function g(e,t){e=e.element.find(w("full-progress",1));e.css("width",t+"%"),e.html(t+"%")}function v(e){r.find("["+w("add")+"]").hide(),r.find(w("full-close",1)).hide(),r.find(w("full-figure input")).attr("readonly","readonly"),s.html("文件开始上传...")}function m(e,t){e?t.element.addClass("success"):t.element.addClass("fail"),y()}function b(){file.element.addClass("fail"),y()}function y(){t.getDoneNum()===u.length?s.html('<span class="c-success">全部文件已上传完毕，共 '+t.getDoneNum()+" 个"+(0!==t.getErrorNum()?"，失败 "+t.getErrorNum()+" 个":"")+"</span>"):s.html("已上传文件 "+t.getDoneNum()+" 个"+(0!==t.getErrorNum()?"，失败 "+t.getErrorNum()+" 个":""))}return d=i.style,c=i.getRenameState(),u=i.getUpfiles(),n=G.jqe[0].clone().addClass(w("full")),a=$('<div class="'+w("full-nofile")+'"><button class="btn btn-solid c-blue" ud2-file-add><i class="ico ico-group-file"></i> 添加文件</button><em>拖拽文件上传 / 长按CTRL键可多选上传</em></div>'),e=$('<div class="'+w("full-drag")+'">请松开鼠标按钮，文件将进入待上传队列</div>'),r=$('<div class="'+w("full-list")+'"><div class="'+w("full-add")+'" ud2-file-add><div><i class="ico ico-hollow-plus"></i><em>继续添加文件</em></div></div></div>'),s=$('<div class="'+w("full-tools")+'"><button class="btn btn-solid">确定上传</button><button class="btn btn-solid">清空列表</button></div>'),n.append(r).append(a).append(e).append(s),o=n.find("["+w("add")+"]"),l=r.find("["+w("add")+"]"),i.getContent().append(n),d.fileAddBtn(o).uploadBtn(s.children().eq(0)).clearBtn(s.children().eq(1)).fileAddFn(p).fileRemoveFn(f).clearFn(h).progressFn(g).uploadFn(v).doneFn(m).failFn(b),n.on("dragenter",function(){0===t.getUpState()&&n.addClass("ud2-file-full-dragenter")}),e.on("dragleave",function(){0===t.getUpState()&&n.removeClass("ud2-file-full-dragenter")}).on("dragover",function(e){0===t.getUpState()&&(e.preventDefault(),n.addClass("ud2-file-full-dragenter"))}).on("drop",function(e){0===t.getUpState()&&(e.preventDefault(),e=(e=e.originalEvent).dataTransfer&&e.dataTransfer.files||e.target&&e.target.files,d.filesHandler(e),n.removeClass("ud2-file-full-dragenter"))}),delete i.style,i}})});
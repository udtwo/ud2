/*! ud2 - v1.0.0
 * (c) 2017 Peak(peak@udtwo.com)
 */
if("undefined"==typeof jQuery)throw new Error("ud2库需要JQuery支持");!function(a,b){"use strict";function c(a){var b=(a.attr(H)||"").split(" "),c=[];return b.forEach(function(a){0!==a.length&&c.push(a)}),c}function d(a){var b=a.split("-"),c=1,d=b.length;if(d>1)for(;c<d;c++)b[c].length>0&&(b[c]=b[c].substr(0,1).toUpperCase()+b[c].substr(1));return b.join("")}function e(){return Date.now&&Date.now()||(new Date).getTime()}function f(a){return a||(a="id"),Y[a]||(Y[a]=0),"id"===a?I+Y[a]++:I+a+"-"+Y[a]++}function g(){function a(b){var c,d,e;if(!M.isArray(b))return b=String(b),c=h.userOptions[b],void 0===c&&(c=h.getOriginAttr(b,1)),void 0===c&&(c=h.getOriginAttr(b)),c;for(d=0,e=b.length;d<e;d++)if(c=a(b[d]),void 0!==c)return c}var b,c,d,e,f=arguments,g=f.length,h=this;if(2===g){if(d=f[0],e=f[1],M.isArray(d)&&M.isFunction(e))return b={},d.forEach(function(c){b[M.isArray(c)?c[0]:c]=a(c)}),e(b),b}else if(3===g&&(b=f[0],c=f[1]||{},e=f[2],M.isObject(b)&&M.isObject(c)&&M.isFunction(e)))return b=o(b,c),e(b),b;return{}}function h(a){return function(b,c){return b=b||"",c=void 0!==c&&c,(c?".":"")+a+"-"+b}}function i(a,b,c,d){var e;return a=j(a),e=a.attr(b),void 0===e&&c&&(e=a.attr(c+"-"+b)),void 0===e&&(e=d),e}function j(a){return M.isJQuery(a)||(a=b(a)),a}function k(a,b){return void 0===a?b:"true"===a||"1"===a||"false"!==a&&"0"!==a&&!!a}function l(a){return Array.prototype.slice.call(a)}function m(){function a(a){return h.indexOf(a)===-1&&(h.push(a),!0)}function c(a){var b=h.indexOf(a);return b>-1&&(h.splice(b,1),!0)}function d(b){return a(b)&&g.addClass("on"),f}function e(a){return c(a)&&!h.length&&g.removeClass("on"),f}var f={},g=b('<div class="'+I+'backmask"></div>'),h=[];return function(){R.pageReady.add(function(){C.append(g)})}(),o(f,{open:d,close:e})}function n(){for(var a=arguments,b=a.length,c=0,d={};c<b;c++)d[arguments[c]]=arguments[c];return d}function o(a,b){M.isObject(a)||(a={}),M.isObject(b)||(b={});for(var c in b)a[c]=b[c];return a}function p(a,b){var c={};return o(c,a),o(c,b),c}function q(a){return o({},a)}function r(a,b){return function(){var c=arguments,d=c.length;return 0===d&&a?a.apply(this,c):b?b.apply(this,c):void 0}}function s(){var b=a.getComputedStyle(a.document.documentElement,"::before").getPropertyValue("content").replace(/(\"|\')/g,"");switch(b){case"p":return 0;case"s":return 1;case"m":return 2;case"l":return 3}}function t(a){a.each(function(){var a=b(this),e=H+"-lazy";a.attr(e)&&a.attr(H,a.attr(e)),c(a).forEach(function(b,c){var e=d(b),f=a.attr(I+b+"-ready"),g=a.attr(I+"id")||null;f||(g?K[e].create(g,a):K[e].create(a))})})}function u(){t(b("["+H+"]"))}function v(){t(b("["+H+"-lazy]"))}function w(a){M.isFunction(a)&&(_?a():R.pageReady.add(a))}function x(a){function b(a,b){a=a||{},a.transfer=a.transfer||i.origin||null,a.accept=a.accept||i.current||null,a.attrReg=a.attrReg||null,a.transfer&&a.accept&&b(a.transfer,a.accept,a.attrReg)}function c(a,b){a=a.ud2?a.getCurrent():j(a),(b=b||Z)(a)}function d(a){var b,c,d;if(a=j(a),b=a.parents(),a.get(0)!==i.current.get(0)){for(c=0,d=b.length;c<d;c++)if(b.eq(c).get(0)===i.current.get(0))return;i.autoClose()}}function e(a){if(void 0!==a){for(var b in P)i.style===P[b]&&i.current.removeClass(P[b].name);return i.style=a,i.current.addClass(a.name),i["public"]}return i.style}var f=this,h={},i={"public":{ud2:!0,collection:f["public"],type:a,appendTo:function(a){return c(a,function(a){a.last().append(i.current)}),this},prependTo:function(a){return c(a,function(a){a.last().prepend(i.current)}),this},insertBefore:function(a){return c(a,function(a){a.last().before(i.current)}),this},insertAfter:function(a){return c(a,function(a){a.last().after(i.current)}),this},style:e,getCurrent:function(){return i.current}},origin:null,current:V[0].clone(),userOptions:h,getOriginAttr:function(a,b){a=function(){return X[a]||(X[a]=a.match(W).join("-").toString().toLowerCase()),X[a]}();var c=b?a:f.className+"-"+a;return i.origin?i.origin.attr(c):null},getOptions:function(){return g.apply(this,arguments)},transferStyles:function(a){b(a,function(a,b){b.attr("style",a.attr("style")).addClass(a.attr("class")),a.removeAttr("style").removeClass()})},transferAttrs:function(a){b(a,function(a,b,c){for(var d,e=a.get(0),f=b.get(0),g=e?e.attributes.length:0,h=new RegExp("^("+c+")"),i=0,j=0;i<g;i++)d=e.attributes[j],h.test(d.name)?(f.setAttribute(d.name,d.value),e.removeAttribute(d.name)):j++})},style:P.normal,autoClose:Z,remove:function(){var a,b=this["public"].collection.indexOf(this);R.autoClose.remove(d),this["public"].collection.splice(b,1),delete this["public"].collection[this["public"].id];for(a in this["public"])delete this["public"][a];for(a in this)delete this[a]}};return R.autoClose.add(d),i}function y(a){var b={"public":[],init:Z,name:a,ctrlName:d(a),className:I+a};return b}function z(a,b,c){function d(){return b.apply(d,arguments)}return M.isFunction(b)||(b=Z),d.create=b,c?c[a]=d:K[a]=d,d}function A(a,b){var c=y(a),d=z(a,function e(){var b,g,h,i=x.call(c,a),k=arguments,l=k.length;switch(l){case 0:return e.call(d,void 0,void 0,{});case 1:return M.isString(k[0])?e.call(d,k[0],void 0,void 0):M.isJQuery(k[0])?e.call(d,void 0,k[0],void 0):M.isObject(k[0])?e.call(d,void 0,void 0,k[0]):e.call(d);case 2:if(M.isString(k[0])&&(M.isJQuery(k[1])||M.isString(k[1])))return e.call(d,k[0],k[1],void 0);if(M.isString(k[0])&&M.isObject(k[1]))return e.call(d,k[0],void 0,k[1]);if(M.isJQuery(k[0])&&M.isObject(k[1]))return e.call(d,void 0,k[0],k[1]);break;case 3:b=M.isString(k[0])&&k[0].length>0?k[0]:f(),g=j(k[1]).first(),h=M.isObject(k[2])?k[2]:{}}return o(i,{origin:g,userOptions:h}),o(i["public"],{id:b}),c["public"].push(i["public"]),c["public"][b]=i["public"],i.current.attr(H,a).attr(H+"-id",b).attr(c.className+"-ready",!0).addClass(c.className),c.init(i)||i["public"]});return b(c,d),c.name!==c.ctrlName&&(K[c.ctrlName]=d),d.collection=c["public"],d}function B(a){a(J,K)}var C,D,E=a.document,F=b(a),G=b(E),H="ud2",I=H+"-",J={},K={},L={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/,mail:/^([\w-\.]+)@(([\w-]+\.)+)([a-zA-Z]{2,4})$/,phone:/^[1][34578][0-9]{9}$/,idCard:/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|97|98|99)[0-9]{4}((?:19|20)?(?:[0-9]{2}(?:(?:0[13578]|1[12])(?:0[1-9]|[12][0-9]|3[01])|(?:0[469]|11)(?:0[1-9]|[12][0-9]|30)|02(?:0[1-9]|1[0-9]|2[0-8]))|(?:[02468][048]|[13579][26])0229)[0-9]{3}[\dxX])$/,loginName:/^[a-zA-Z][a-zA-Z0-9]+$/,percent:/^(100|([0-9]|[1-9][0-9])(\.[0-9]+)?)%$/,nonNegative:/^([0-9]|[1-9][0-9]+)(\.[0-9]+)?$/,naturalNumber:/^([1-9]\d+|[0-9])$/},M={isType:function(a){return function(b){return{}.toString.call(b)==="[object "+a+"]"}},isObject:function(a){return M.isType("Object")(a)},isFunction:function(a){return M.isType("Function")(a)},isString:function(a){return M.isType("String")(a)},isBoolean:function(a){return M.isType("Boolean")(a)},isNumber:function(a){return M.isType("Number")(a)},isNaturalNumber:function(a){return L.naturalNumber.test(a)},isJQuery:function(a){return a instanceof b},isArray:function(a){return Array.isArray(a)},isDatetime:function(a){return a instanceof Date}},N=function(){var b=E.createElement("div"),c=a.navigator.userAgent;return{ipad:!!c.match(/ipad/i),iphone:!!c.match(/iphone/i),ipod:!!c.match(/ipod/i),mac:!!c.match(/macintosh/i),apple:!!c.match(/(ipad|iphone|ipod|macintosh)/i),android:c.indexOf("Android")>-1,mobile:!!c.match(/mobile|mobi|mini/i),touch:"ontouchstart"in a||a.DocumentTouch&&E instanceof DocumentTouch,pointer:a.navigator.pointerEnabled,msPointer:a.navigator.msPointerEnabled,touchAction:void 0!==b.style.touchAction||void 0!==b.style.msTouchAction||!1,perspective:void 0!==b.style.perspective||void 0!==b.style.msPerspective||void 0!==b.style.mozPerspective||void 0!==b.style.webkitPerspective||!1,transition:void 0!==b.style.transition||void 0!==b.style.msTransition||void 0!==b.style.mozTransition||void 0!==b.style.webkitTransition||!1,animation:void 0!==b.style.animation||void 0!==b.style.msAnimation||void 0!==b.style.mozAnimation||void 0!==b.style.webkitAnimation||!1}}(),O=function(){function a(a){return a?String(a):""}return{isLength:function(b,c,d){return b=a(b),c=void 0===c?Number.MAX_VALUE:c,void 0!==d?(d<c&&(d=c),b.length<=d&&b.length>=c):b.length===c},isMinLength:function(b,c){return b=a(b),c=c||0,b.length>=c},isMaxLength:function(b,c){return b=a(b),c=c||Number.MAX_VALUE,b.length<=c},isPhone:function(b){return b=a(b),L.phone.test(b)},isMail:function(b){return b=a(b),L.mail.test(b)},isDate:function(b){return b=a(b),L.date.test(b)},isLoginName:function(b){return b=a(b),L.loginName.test(b)},isIDCard:function(b){if(b=a(b),b=b.toUpperCase(),L.idCard.test(b)){if(18===b.length){for(var c=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],d=["1","0","X","9","8","7","6","5","4","3","2"],e=b.split(""),f=0,g=0;g<17;g++)f+=e[g]*c[g];var h=d[f%11];if(h!==e[17])return!1}return!0}return!1}}}(),P=function(){for(var a={},b=["normal","info","success","warning","danger"],c=["","","","",""],d=0,e=b.length;d<e;d++)a[b[d]]={name:b[d],no:d,ico:c[d]};return a}(),Q=function(){for(var a={},b=["red","orange","green","blue","yellow","teal","pink","violet","purple","brown","dark","grey","white"],c=0,d=b.length;c<d;c++)a[b[c]]={name:"c-"+b[c],id:b[c]};return a}(),R={pageReady:b.Callbacks(),pageResize:b.Callbacks(),autoClose:b.Callbacks(),keyDown:b.Callbacks(),keyUp:b.Callbacks()},S=["center","full-screen","top-left","top-right","top-center","bottom-left","bottom-right","bottom-center"],T=function(){var a=[N.pointer?"pointerdown":"MSPointerDown",N.pointer?"pointermove":"MSPointerMove",N.pointer?"pointerup":"MSPointerUp",N.pointer?"pointercancel":"MSPointerCancel","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup","mouseout","mouseenter","mouseleave","keydown","keypress","keyup","focus","blur","click"];return a[20]=[a[0],a[4],a[8]].join(" "),a}(),U={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT:37,UP:38,RIGHT:39,DOWN:40,KEY0:48,KEY1:49,KEY2:50,KEY3:51,KEY4:52,KEY5:53,KEY6:54,KEY7:55,KEY8:56,KEY9:57,"`":192,BACK:8,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,ENTER:13,"NUM+":107,"NUM-":109,"NUM*":106,"NUM/":111,"-":189,"=":187,",":188,".":190,"/":191,"\\":220,SHIFT:16,CTRL:17,ALT:18,CAPS:20,TAB:9,"[":219,"]":221,";":186,"'":222,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},V=[b("<div />"),b("<span />"),b("<a />")],W=/(^[a-z0-9]{1,}|[A-Z][a-z0-9]{0,})/g,X={},Y={},Z=function(){},$=60,_=!1,aa=function(a,c){function d(a){return z.pan=a,y}function f(a){return z.tap=a,y}function h(a){return z.press=a,y}function i(a){return z.swipeLeft=a,y}function k(a){return z.swipeRight=a,y}function l(a){return z.swipeTop=a,y}function m(a){return z.swipeBottom=a,y}function n(a){return z.down=a,y}function p(a){return z.up=a,y}function q(a,b){function c(a){a&&(a.screenX&&(k.moveScreenX=a.screenX),a.screenY&&(k.moveScreenY=a.screenY),a.pageX&&(k.movePageX=a.pageX),a.pageY&&(k.movePageY=a.pageY),a.clientX&&(k.moveClientX=a.clientX),a.clientY&&(k.moveClientY=a.clientY))}function d(){return{x:k.movePageX-k.downPageX,y:k.movePageY-k.downPageY}}var e=b?b.screenX:0,f=b?b.screenY:0,g=b?b.pageX:0,h=b?b.pageY:0,i=b?b.clientX:0,j=b?b.clientY:0,k={del:!1,id:a,downScreenX:e,downScreenY:f,downPageX:g,downPageY:h,downClientX:i,downClientY:j,moveScreenX:e,moveScreenY:f,movePageX:g,movePageY:h,moveClientX:i,moveClientY:j};return o(k,{setMove:c,getMoveLength:d})}function r(a){function c(a){0===d()&&(C.id=a,C.time=e())}function d(){var a=0;for(var b in B)B[b].del||a++;return a}function f(){for(var a in B)B[a].del&&delete B[a]}function g(a){var c=b(a.target),d=c.prop("tagName").toLowerCase();"input"!==d&&"textarea"!==d&&a.preventDefault()}function h(a){g(a),u&&a.stopPropagation();var b=a.originalEvent,e=b.pointerId;c(e),0===d()&&(G.on(T[1],i),G.on(T[2],j),G.on(T[3],j)),B[e]&&!B[e].del||(B[e]=q(e,b),p(a,e))}function i(a){a.preventDefault(),u&&a.stopPropagation();var b=a.originalEvent,c=b.pointerId;B[c]&&(B[c].setMove(b),r(a,c))}function j(a){u&&a.stopPropagation();var b=a.originalEvent,c=b.pointerId;B[c]&&(s(a,c),B[c].del=!0,0===d()&&(G.off(T[1],i),G.off(T[2],j),G.off(T[3],j)))}function k(b){g(b),u&&b.stopPropagation();var e,f=b.type,h=b.originalEvent;if("touchstart"===f){e=h.changedTouches,0===d()&&(a.on(T[5],l),a.on(T[6],m),a.on(T[7],m)),c(e[0].identifier);for(var i=0,j=e.length;i<j;i++)B[e[i].identifier]&&!B[e[i].identifier].del||(B[e[i].identifier]=q(e[i].identifier,e[i])),p(b,e[i].identifier)}else c(0),B[0]=q(0,h),p(b,0),G.on(T[9],n),G.on(T[10],o),G.on(T[13],o)}function l(a){a.preventDefault(),u&&a.stopPropagation();for(var b=a.originalEvent,c=b.changedTouches,d=0,e=c.length;d<e;d++)B[c[d].identifier]&&B[c[d].identifier].setMove(c[d]),r(a,c[d].identifier)}function m(b){u&&b.stopPropagation();for(var c=b.originalEvent,e=c.changedTouches,f=0,g=e.length;f<g;f++)s(b,e[f].identifier),B[e[f].identifier].del=!0;0===d()&&(a.off(T[5],l),a.off(T[6],m),a.off(T[7],m))}function n(a){a.preventDefault(),u&&a.stopPropagation();var b=a.originalEvent;B[0]&&(B[0].setMove(b),r(a,0))}function o(a){u&&a.stopPropagation(),B[0]&&(s(a,0),void 0!==B[0]&&B[0].del===!1&&(B[0].del=!0),G.off(T[9],n),G.off(T[10],o))}function p(b,c){D=!1;for(var d=a.parents(),e=d.length,f=0;f<e;f++)if("1"===d.eq(f).attr(I+"scroll-runing")){D=!0;break}z.down.call(a,b)}function r(b,c){var d=B[c].getMoveLength();b.preventDefault(),z.pan.call(a,d,b)}function s(b,c){var d=null,e=B[c].getMoveLength(),g={x:Math.abs(e.x),y:Math.abs(e.y)};C.id===c&&(d=new Date-C.time,C.id=null,C.time=null),d&&(g.x<x&&g.y<x&&(D||(d<v?z.tap.call(a,b):z.press.call(a,b))),g.x>=x&&g.x>=g.y&&d<w&&(e.x<0?(b.preventDefault(),z.swipeLeft.call(a,b)):(b.preventDefault(),z.swipeRight.call(a,b))),g.y>=x&&g.y>=g.x&&d<w&&(e.y<0?(b.preventDefault(),z.swipeTop.call(a,b)):(b.preventDefault(),z.swipeBottom.call(a,b)))),z.up.call(a,b),f()}function t(b){var c=N.pointer||N.msPointer;b?(c?a.on(T[0],h):a.on(T[4]+" "+T[8],k),a.css({"-ms-touch-action":"none","touch-action":"none"})):(c?a.off(T[0],h):a.off(T[4]+" "+T[8],k),a.css({"-ms-touch-action":"auto","touch-action":"auto"}))}function y(){E||(E=!0,t(!0))}function A(){E&&(E=!1,t(!1))}var B={},C={id:null,time:null},D=!1,E=!1;return function(){y()}(),{bind:y,unbind:A}}function s(){A.forEach(function(){arguments[0].bind()})}function t(){A.forEach(function(){arguments[0].unbind()})}var u,v,w,x,y={},z=(g({stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:10},c,function(a){u=a.stopPropagation,v=a.tapMaxTime,w=a.swipeMaxTime,x=a.pointerValidLength}),{pan:Z,tap:Z,press:Z,swipeLeft:Z,swipeRight:Z,swipeTop:Z,swipeBottom:Z,down:Z,up:Z}),A=[];return function(){j(a).each(function(a,c){A.push(r(b(c)))})}(),o(y,{setPan:d,setTap:f,setPress:h,setSwipeLeft:i,setSwipeRight:k,setSwipeTop:l,setSwipeBottom:m,setDown:n,setUp:p,on:s,off:t})},ba=function(a){function c(a){return k.scroll=a,i}function d(a){return k.down=a,i}function e(a){return k.up=a,i}function f(a){function b(b){b.stopPropagation(),b.preventDefault();var c=b.originalEvent,d=c.deltaY/100||c.wheelDelta/-120||(Math.abs(c.detail)>2?c.detail/3:c.detail)||0;k.scroll.call(a,d,b),d>0?k.down.call(a,b):k.up.call(a,b)}function c(){e||(e=!0,a.on(l,b))}function d(){e&&(e=!1,a.off(l,b))}var e=!1;return function(){c()}(),{bind:c,unbind:d}}function g(){m.forEach(function(){arguments[0].bind()})}function h(){m.forEach(function(){arguments[0].unbind()})}var i={},k={scroll:Z,down:Z,up:Z},l="DOMMouseScroll mousewheel",m=[];return function(){j(a).each(function(a,c){m.push(f(b(c)))})}(),o(i,{setScroll:c,setDown:d,setUp:e,on:g,off:h})},ca=function(a){function b(a,b,c){var d=!c||c&&void 0===c.isCtrl?0:c.isCtrl?1:0,e=!c||c&&void 0===c.isAlt?0:c.isAlt?1:0,f=!c||c&&void 0===c.isShift?0:c.isShift?1:0,g=[a,d,e,f].join(l);return k[g]||(k[g]=b),j}function c(a,b,c){var d=!c||c&&void 0===c.isCtrl?0:c.isCtrl?1:0,e=!c||c&&void 0===c.isAlt?0:c.isAlt?1:0,f=!c||c&&void 0===c.isShift?0:c.isShift?1:0,g=[a,d,e,f].join(l);return k[g]&&delete k[g],j}function d(a){for(var b in k)if(b===[a.keyCode,a.ctrlKey?1:0,a.altKey?1:0,a.shiftKey?1:0].join(l)){a.preventDefault();break}}function e(a){for(var b in k)if(b===[a.keyCode,a.ctrlKey?1:0,a.altKey?1:0,a.shiftKey?1:0].join(l)){k[b]();break}}function f(){m||(m=!0,R.keyDown.add(d),R.keyUp.add(e))}function h(){m&&(m=!1,R.keyDown.remove(d),R.keyUp.remove(e))}var i,j={},k=(g({autoOn:!0},a,function(a){i=a.autoOn}),{}),l="＀",m=!1;return function(){i&&f()}(),o(j,{add:b,remove:c,on:f,off:h})};!function(){G.ready(function(){C=b("body"),N.apple&&E.body.addEventListener(T[4],b.noop),R.pageReady.fire(),_=!0,G.on(T[20],function(a){var b="ctrlCloseEvent",c=a.type,d=G.data(b);d&&c!==d||(G.data(b,c),R.autoClose.fire(a.target)),c===T[8]&&G.data(b,null)}),G.on(T[17],"input, button, .btn, .check, .radio, .textbox",function(){R.autoClose.fire(aa.target)}),G.on(T[20],".message:not([ud2]) .message-close",function(){b(this).parent().remove()})}),F.on("orientationchange resize",function(){D&&a.clearTimeout(D),D=a.setTimeout(function(){var a=F.width(),b=F.height();R.pageResize.fire(a,b)},$)}),G.on(T[14],function(a){R.keyDown.fire(a,a.keyCode,a.ctrlKey,a.altKey,a.shiftKey)}).on(T[16],function(a){R.keyUp.fire(a,a.keyCode,a.ctrlKey,a.altKey,a.shiftKey)}),R.pageReady.add(u)}(),o(J,{prefix:I,jqe:V,an:{pos:S,event:T},noop:Z,backmask:m(),win:function(){return F},body:function(){return C},argsToArray:l,attrValue:i,boolCheck:k,options:g,createStyle:n,creater:z,createControlID:f,controlCreater:A,convertToJQ:j,className:h}),a[H]=o(K,{libExtend:B,callbacks:R,extend:o,merge:p,clone:q,propertier:r,deviceScreenState:s,time:e,regex:L,type:M,support:N,form:O,color:Q,style:P,key:U,createAllControl:u,createLazyControl:v,ready:w,event:aa,eventMouseWheel:ba,eventKeyShortcut:ca})}(window,jQuery),ud2.libExtend(function(a,b){"use strict";function c(b){var c=a.convertToJQ(b),d=c.find("tr"),e=[];return c.find("td").filter("[colspan]").each(function(){var a,b,c=$(this),d=parseInt(c.attr("colspan"));if(c.removeAttr("colspan").attr("span-col",d),d>1)for(a=0,b=d-1;a<b;a++)c.after(c.clone().attr("merge","1"))}),c.find("td").filter("[rowspan]").each(function(){var a,b,c,e,f,g=$(this),h=parseInt(g.attr("rowspan"));if(g.removeAttr("rowspan").attr("span-row",h),h>1)for(a=0,b=h-1;a<b;a++)f=g.parent(),e=f.index(),c=g.index(),0===c?d.eq(e+a+1).prepend(g.clone().attr("merge","1")):d.eq(e+a+1).children().eq(c-1).after(g.clone().attr("merge","1"))}),d.each(function(){var b=[];d.parent().prop("nodeName").toLowerCase();$(this).children().each(function(){var c=$(this),d=a.prefix+"datagrid-",e=c.attr(d+"data-type"),f=c.attr("span-col"),g=c.attr("span-row"),h=c.attr("merge"),i={};i.value=c.html(),e&&(i.type=e),f&&(i.colspan=f),g&&(i.rowspan=g),h&&(i.merge=!0),b.push(i)}),e.push(b)}),e}function d(a){switch(!0){case b.type.isString(a):return g.string;case b.type.isNumber(a):return g.number;case b.type.isBoolean(a):return g["boolean"];case b.type.isDatetime(a):return g.datetime;default:return g.string}}function e(a,c){if(null!==a)switch(c){case g.string:b.type.isString(a)||(a=String(a));break;case g.number:b.type.isNumber(a)||(a=Number(a)),isNaN(a)&&(a=null);break;case g["boolean"]:b.type.isBoolean(a)||(a=Boolean(a));break;case g.datetime:b.type.isDatetime(a)||(a=new Date(a)),isNaN(a.valueOf())&&(a=null);break;default:return e(a,g.string)}return a}var f=[],g={string:"string",number:"number","boolean":"boolean",datetime:"datetime"},h="cell",i="row",j="column",k=function(a){function c(a){return void 0===a?e:(e=null!==a?String(a):null,h)}function d(a){return void 0===a?f:(g[a]||(a=null),f=a,i.forEach(function(a){a.dataType(f)}),h)}var e,f,h={type:j},i=[];return function(){a&&!b.type.isObject(a)?c(a):(!a&&(a={}),c(a.title?a.title:null),d(a.type))}(),b.extend(h,{cells:i,title:c,dataType:d})},l=function(a){function c(a){var c,f,g;for(b.type.isArray(a)||(a=[]),c=0,f=a.length;c<f;c++)g=a[c],b.type.isObject(g)?(g.type!==h&&(g=m(g)),g.bindRow(d),e.push(g)):e.push(m({value:g,row:d}))}var d={type:i},e=[];return function(){a&&b.type.isArray(a)?c(a):(!a&&(a={}),c(a.cells))}(),b.extend(d,{cells:e})},m=function(a){function c(a){return void 0===a?l:(l=e(a,m),n)}function d(a){return void 0===a?m:(g[a]||(a=null),m=a,c(l),n)}function f(a){return a&&a.type===i&&null===n.row&&(n.row=a),n}function k(a){return a&&a.type===j&&null===n.column&&(n.column=a),n}var l,m,n={type:h,column:null,row:null};return function(){a&&!b.type.isObject(a)?l=a:(b.type.isObject(a)||(a={}),k(a.columns),f(a.row),a.colspan&&(n.colspan=parseInt(a.colspan)||1),a.rowspan&&(n.rowspan=parseInt(a.rowspan)||1),a.merge&&(n.merge=!0),m=a.type,l=void 0===a.value||b.type.isArray(a.value)||b.type.isFunction(a.value)?null:a.value),m?c(l):m=null}(),b.extend(n,{val:c,dataType:d,bindRow:f,bindColumn:k})},n=a.creater("datatable",function(d){function e(a,b){var c,d;for(c=0,d=a.length;c<d;c++)g(a[c]);for(c=0,d=b.length;c<d;c++)h(b[c])}function g(a){var b,c=k(a);if(y.push(c),x.length>0)for(var d in x)b=m({row:x[d],column:c,type:c.dataType()}),c.cells.push(b),x[d].cells.push(b);return w}function h(a){for(var b,c=l(a),d=0,e=c.cells.length,f=y.length;d<e;d++)y[d]||g(),y[d].cells.push(c.cells[d]),c.cells[d].bindColumn(y[d]),c.cells[d].dataType(y[d].dataType());if(f>e)for(;d<f;d++)b=m({row:c,column:y[d]}),c.cells.push(b),y[d].cells.push(b);return x.push(c),r(),w}function n(a){var c,d;if(b.type.isNaturalNumber(a)){if(y[a])for(y.splice(a,1),d=x.length-1;d>=0;d--)x[d].cells.splice(a,1),0===x[d].cells.length&&x.splice(d,1)}else if(a&&a.type===j&&(c=y.indexOf(a),c!==-1))return n(c);return w}function o(a){var c,d;if(b.type.isNaturalNumber(a)){if(x[a]){x.splice(a,1);for(d in y)y[d].cells.splice(a,1)}}else if(a&&a.type===i&&(c=x.indexOf(a),c!==-1))return o(c);return w}function p(a){var d,e;switch(q(),!0){case b.type.isArray(a):for(d=0,e=a.length;d<e;d++)(b.type.isArray(a[d])||b.type.isObject(a[d]))&&h(a[d]);break;case b.type.isObject(a)&&"datatable"===a.type:a.rows.forEach(function(a){var b=[];for(d=0,e=Math.min(a.cells.length,y.length);d<e;d++)b.push({value:a.cells[d].val(),type:y[d].dataType()});h(b)});break;default:return p(c(a))}return w}function q(){for(var a=0,b=x.length;a<b;a++)o(0);return w}function r(){var a,b,c,d,e,f=0,g=0,h=x.length;for(a=0;a<h;a++)f!==x[a].cells.length&&g++,f<x[a].cells.length&&(f=x[a].cells.length);if(g>1)for(a=0;a<h;a++)if(d=x[a].cells.length,f>d)for(b=0,c=f-d;b<c;b++)e=m({row:x[a],column:y[d+b]}),x[a].cells.push(e),y[d+b].cells.push(e)}function s(){var a,b,c,d=[],e=0,f=0;for(console.group("value"),a=x.length;e<a;e++)for(d[e]=[],f=0,b=x[e].cells.length;f<b;f++)c=x[e].cells[f],d[e][f]="["+c.dataType()+"],"+c.val();for(console.table(d),console.groupEnd(),console.group("merge"),d=[],e=0,a=x.length;e<a;e++)for(d[e]=[],f=0,b=x[e].cells.length;f<b;f++)c=x[e].cells[f],d[e][f]=c.merge;for(console.table(d),console.groupEnd(),console.group("rowspan, colspan"),d=[],e=0,a=x.length;e<a;e++)for(d[e]=[],f=0,b=x[e].cells.length;f<b;f++)c=x[e].cells[f],d[e][f]=c.rowspan+","+c.colspan;console.table(d),console.groupEnd()}var t,u,v,w={},x=(a.options({columns:[],rows:[]},d,function(c){v=c.id||a.createControlID(),t=b.type.isArray(c.columns)?c.columns:[],u=b.type.isArray(c.rows)?c.rows:[]}),[]),y=[];return function(){e(t,u),f.push(w),v&&(f[v]=w)}(),b.extend(w,{type:"datatable",columns:y,rows:x,columnAdd:g,columnRemove:n,rowAdd:h,rowRemove:o,completion:r,dataFill:p,dataEmpty:q,debug:s})});return n.dataType=g,n.collection=f,n.getDataType=d,n.convertValue=e,n}),ud2.libExtend(function(a,b){"use strict";a.creater("scroll",function(c,d){function e(){var a,b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0;W.hasVertical&&(b=Y.height(),c=X.height(),ia.h=c,ia.ih=X.innerHeight(),ia.sh=b-c,ia.now.y<-ia.sh&&(ia.now.y=-ia.sh),e=ia.ih-2*W.barOffset,0!==c&&(a=ia.sh/(5*ia.ih),a=1-(a>1?1:a),d=e*a,d=d<W.barMinLength?W.barMinLength:d,d=d>e?e:d,ja.h=d,ja.mh=e,ja.sh=e-d,_.height(d))),W.hasHorizontal&&(f=Y.width(),g=X.width(),ia.w=g,ia.iw=X.innerWidth(),ia.sw=f-g,ia.now.x<-ia.sw&&(ia.now.x=-ia.sw),i=ia.iw-2*W.barOffset,0!==g&&(a=ia.sw/(5*ia.iw),a=1-(a>1?1:a),h=i*a,h=h<W.barMinLength?W.barMinLength:h,h=h>i?i:h,ja.w=h,ja.mw=i,ja.sw=i-h,Z.width(h)))}function f(){var a,b,c=Y.css("transform");return c=c.split(")")[0].split(", "),a=Math.round(+(c[12]||c[4])),b=Math.round(+(c[13]||c[5])),{x:a,y:b}}function g(a){ca!==a&&(ca=a,X.attr(ma,a?1:0))}function h(a,b){var c=b?"sh":"sw";return 0===ia[c]||0===ja[c]?0:a/ia[c]*ja[c]}function i(a,b){var c=b?"sh":"sw";return 0===ia[c]||0===ja[c]?0:a/ja[c]*ia[c]}function j(){0===W.barState&&(ja.timer&&window.clearTimeout(ja.timer),Z.stop().fadeIn(200),_.stop().fadeIn(200))}function k(){0===W.barState&&(ha||ga||ca||(ja.timer&&window.clearTimeout(ja.timer),ja.timer=window.setTimeout(function(){Z.stop().fadeOut(400),_.stop().fadeOut(400)},800)))}function l(a,b,c,d,e,f){var g,h,i=a-b,j=Math.abs(i)/c;return d=-d,e=e||0,f=f||5e-4,g=a+j*j/(2*f)*(i<0?-1:1),h=j/f,g<d?(g=e?d-e/2.5*(j/8):d,i=Math.abs(g-a),h=i/j):g>0&&(g=e?e/2.5*(j/8):0,i=Math.abs(a)+g,h=i/j),{destination:Math.round(g),duration:h}}function m(a,c,d,e){var f,g;if(d=d||0,e=e||aa.circular,a>0&&(a=0),c>0&&(c=0),c<-ia.sh&&(c=-ia.sh),a<-ia.sw&&(a=-ia.sw),n(e),o(d),Y.css("transform","translate("+a+"px, "+c+"px)"+(b.support.perspective?" translateZ(0)":"")),W.hasVertical&&_.css("transform","translate(0, "+h(-c,1)+"px)"+(b.support.perspective?" translateZ(0)":"")),W.hasHorizontal&&Z.css("transform","translate("+h(-a,0)+"px, 0)"+(b.support.perspective?" translateZ(0)":"")),ia.now={x:a,y:c},g=ka.length,0!==g)for(f=0;f<g;f++)ka[f].move(-a,-c,d)}function n(a){Y.css("transition-timing-function",a),_.css("transition-timing-function",a+", ease-out, ease-out, ease-out"),Z.css("transition-timing-function",a+", ease-out, ease-out, ease-out")}function o(a){var b=parseInt(a);Y.css("transition-duration",b+"ms"),_.css("transition-duration",b+"ms, 300ms, 300ms, 300ms"),Z.css("transition-duration",b+"ms, 300ms, 300ms, 300ms"),0!==b?(ea&&window.clearTimeout(ea),ea=window.setTimeout(function(){m(ia.now.x,ia.now.y,0),g(!1),k()},b)):(g(!1),k())}function p(){if(ka.length>0)for(var a in ka)ka[a].recountPosition()}function q(a){return a=parseInt(a)||0,e(),m(ia.now.x,ia.now.y,a),T}function r(){return Y}function s(a,b,c){return c=c||0,m(-a,-b,c),T}function t(a){return void 0!==a?(da=!!a,T):da}function u(a){return b.type.isObject(a)&&a.type&&a.type===la&&ka.push(a),T}function v(a){var c;return b.type.isObject(a)&&a.type&&a.type===la&&(c=ka.indexOf(a),c>-1&&ka.splice(c,1)),T}function w(){if(!da){p(),e(),j();var a=f();m(a.x,a.y),ba.moved=!1,ba.start=b.time(),ba.startMove={x:ia.now.x,y:ia.now.y},ba.lastMove={x:0,y:0}}}function x(a){if(!da){var c=b.time(),d=a.x,e=a.y,f=Math.abs(d),g=Math.abs(e),h=d-ba.lastMove.x,i=e-ba.lastMove.y,k=0,l=0;j(),ba.lastMove={x:d,y:e},c-ba.end>300&&f<fa&&g<fa||(ba.moved||(ba.moved=!0),W.hasVertical&&(l=i+ia.now.y),W.hasHorizontal&&(k=h+ia.now.x),0===h&&0===i||m(k,l),c-ba.start>=300&&(ba.start=c,ba.startMove.x=k,ba.startMove.y=l))}}function y(){if(!da){var a=ia.now.x,c=ia.now.y,d=a,e=c,f=null,h=null,i=b.time()-ba.start,n=0;if(ba.end=b.time(),k(),ba.moved&&W.isSlowMovning){if(i<300){var o=0,p=0;W.hasVertical&&(h=l(c,ba.startMove.y,i,ia.sh,W.bounce?ia.h:0),e=h.destination,p=h.duration),W.hasHorizontal&&(f=l(a,ba.startMove.x,i,ia.sw,W.bounce?ia.w:0),d=f.destination,o=f.duration),n=Math.max(o,p)}d===a&&e===c||(j(),g(!0),m(d,e,n))}}}function z(a){var b=ia.now.x,c=ia.now.y,d=300,f=R;p(),e(),"normal"===f&&(f=Math.round(ia.h)),a>0?c-=f:c+=f,c>0||c<-ia.sh?g(!1):(j(),g(!0)),m(b,c,d)}function A(){this.move=0,ga=!0,j(),p(),$(this).css("background",W.barColorOn)}function B(){ga=!1,k(),$(this).css("background",W.barColor)}function C(a,b){var c=b?ia.now.x:i(-(a.x-this.move),0)+ia.now.x,d=b?i(-(a.y-this.move),1)+ia.now.y:ia.now.y;b?this.move=a.y:this.move=a.x,m(c,d)}function D(){W.recountByResize&&b.callbacks.pageResize.add(q),0===W.barState&&X.on(a.an.event[12],function(){e(),ha=!0,j()}).on([a.an.event[13],a.an.event[6]].join(" "),function(){ha=!1,k()}),1===W.barState&&(X.on(a.an.event[12],function(){e(),ha=!0}),X.on([a.an.event[13],a.an.event[6]].join(" "),function(){ha=!1})),W.isTouchMode&&b.event(X,{stopPropagation:!0}).setDown(w).setUp(y).setPan(x),W.isMouseWheelMode&&b.eventMouseWheel(X).setScroll(z),W.isScrollMode&&(b.event(_,{stopPropagation:!0}).setPan(function(a){C.call(this,a,1)}).setDown(A).setUp(B),b.event(Z,{stopPropagation:!0}).setPan(function(a){C.call(this,a,0)}).setDown(A).setUp(B))}var E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T={},U=a.prefix+"scroll",V=a.className(U),W=a.options({recountByResize:!1,barState:0,hasHorizontal:!1,hasVertical:!0,barSize:6,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.4)",barColorOn:"rgba(0,0,0,.6)",barBorderRadiusState:!0,mouseWheelLength:"normal",isTouchMode:!0,isMouseWheelMode:!0,isScrollMode:!1,isSlowMovning:!0},d,function(a){E=a.recountByResize,F=a.barState,G=a.barSize,H=a.barMinLength,I=a.barOffset,J=a.barColor,K=a.barColorOn,L=a.barBorderRadiusState,M=a.hasHorizontal,N=a.hasVertical,O=a.isMouseWheelMode,P=a.isTouchMode,Q=a.isScrollMode,R=a.mouseWheelLength,S=a.isSlowMovning,"normal"!==R&&(R=b.type.isNaturalNumber(R)?parseInt(R):"normal")}),X=a.convertToJQ(c),Y=a.jqe[0].clone().addClass(V("wrapper")),Z=a.jqe[0].clone().addClass(V("bar")),_=Z.clone(),aa={quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)"},ba={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},ca=!1,da=!1,ea=null,fa=10,ga=!1,ha=!1,ia={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},ja={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null},ka=[],la="scroll",ma=V("runing");return function(){var a,c=X.length;if(c>1){for(a=1;a<c;a++)b.scroll(X.eq(a),d);X=X.eq(0)}var f=X.contents();0===f.length?X.append(Y):(f.wrapAll(Y),Y=X.children(V("wrapper",1))),Y.css("padding",X.css("padding-top")+" "+X.css("padding-right")+" "+X.css("padding-bottom")+" "+X.css("padding-left")),X.addClass(U),N&&(X.prepend(_),Y.css({height:"auto","min-height":"100%"})),M&&(X.prepend(Z),Y.css({width:"auto","min-width":"100%"})),_.css({top:I,right:I,width:G,background:J}),Z.css({left:I,bottom:I,height:G,background:J}),L&&(_.css("border-radius",G/2),Z.css("border-radius",G/2)),1===F&&(_.css("display","block"),Z.css("display","block")),e(),D()}(),b.extend(T,{type:la,move:s,oplock:t,followerBind:u,followerUnbind:v,recountPosition:q,getContent:r})})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("datagrid",function(c,d){var e=c.className,f=a.className(e),g=f("left"),h=f("center"),i=f("right"),j=f("grid"),k=f("header"),l=f("content"),m=f("footer"),n=f("row",1),o="rowDeselected",p="rowSelected",q={left:0,center:1,right:2},r={normal:0,flex:1,left:2,right:3},s={type:null,width:120,minWidth:50,mode:1,align:0};c.init=function(c){function d(d,e,f){var g,h,i,j,k,l=!0;if(X=d,X?b.type.isString(X)||b.type.isJQuery(X)?X=a.convertToJQ(X):(X=b.datatable().dataFill(X),l=!1):c.origin?X=a.convertToJQ(c.origin):(X=b.datatable(),jsJQ=!1),l&&(c.origin=X,g=X.find("thead"),h=X.find("tbody"),i=X.find("tfoot"),X=b.datatable().dataFill(h),g.length&&(Y=b.datatable().dataFill(g)),i.length&&(Z=b.datatable().dataFill(i))),e&&(Y=b.datatable().dataFill(e)),Y&&Y.columns.length<X.columns.length)for(j=0,k=X.columns.length-Y.columns.length;j<k;j++)Y.columnAdd();if(f&&(Z=b.datatable().dataFill(f)),Z&&Z.columns.length<X.columns.length)for(j=0,k=X.columns.length-Z.columns.length;j<k;j++)Z.columnAdd()}function e(a){ba=s,b.type.isObject(a)&&(ba=b.merge(ba,a))}function q(a){var d,e,g;for(a&&a.length||!c.origin||(a=[],c.origin.find("col").each(function(b,c){c=$(c);var d=parseInt(c.attr(f("width"))),e=parseInt(c.attr(f("min-width"))),g=c.attr(f("mode")),h=c.attr(f("align")),i=c.attr(f("type"));a[b]={},d&&(a[b].width=d),
e&&(a[b].minWidth=e),g&&(a[b].mode=g),h&&(a[b].align=h),i&&(a[b].type=i)})),d=Math.max(X.columns.length,Y?Y.columns.length:0,Z?Z.columns.length:0,a?a.length:0),_=a,b.type.isArray(_)||(_=[]),e=0;e<d;e++)b.type.isObject(_[e])||(_[e]={}),g=_[e]=b.merge(ba,_[e]),g.minWidth>g.width&&1===g.mode&&(g.width=g.minWidth),g.align=function(){switch(g.align){case 1:case"1":case"center":return"center";case 2:case"2":case"right":return"right";default:case 0:case"0":case"left":return"left"}}(),g.mode=function(){switch(g.mode){case 1:case"1":case"flex":return 1;case 2:case"2":case"left":return 2;case 3:case"3":case"rigth":return 3;default:case 0:case"0":case"normal":return 0}}()}function r(){var a,b,c,d=!!Y,e=!!Z,f=X.columns.length,g=_.length;if(f<g)for(c=0;c<g-f;c++)X.columnAdd();if(d)for(a=Y.columns.length,c=0;c<g-a;c++)Y.columnAdd();if(e)for(b=Z.columns.length,c=0;c<g-b;c++)Z.columnAdd();u()}function t(a){aa=a,b.type.isArray(aa)||(aa=[]),aa.header=[],aa.content=[],aa.footer=[]}function u(){X.columns.forEach(function(a,b){_[b]&&a.dataType(_[b].type)})}function v(){var a=A(),b=a.l,c=a.c,d=a.r,e=aa.footer.length;ua.css({width:b}),za.css({width:b}),Aa.css({width:b}),Ka.css({left:b-1,right:d>0?d-2:-1}),Pa.css({width:c}),Qa.css({width:c-1}),Ca.css({width:d}),Ha.css({width:d}),Ia.css({width:d}),e>0&&(Ba.css({width:b}),Ra.css({width:c}),Ja.css({width:d}))}function w(){var a=aa.header.length*ca,b=aa.footer.length*ca,c={height:a},d={top:a},e={bottom:b},f={height:b,bottom:0};H(da),wa.css(c),xa.css(d),Ma.css(c),Na.css(d),Ea.css(c),Fa.css(d),za.css({height:a}),Aa.css({height:ca*aa.content.length}),Pa.css({height:a}),Qa.css({height:ca*aa.content.length-1}),Ha.css({height:a}),Ia.css({height:ca*aa.content.length}),ta.css({top:a}),b&&(xa.css(e),ya.css(f),Ba.css({height:b}),Na.css(e),Oa.css(f),Ra.css({height:b}),Fa.css(e),Ga.css(f),Ja.css({height:b}),ta.css({bottom:b}))}function x(){var a=aa.header.length||0,b=aa.footer.length||0;B(),y(aa.content),a&&y(aa.header),b&&y(aa.footer)}function y(a){for(var b=0,c=a.length;b<c;b++)a[b].$.left.css("height",ca),a[b].$.center.css("height",ca),a[b].$.right.css("height",ca),_.forEach(function(c,d){var e,f,g=a[b]["public"].cells[d],h=c.widthNow,i=0,j=1;if(!g.merge){if(g.rowspan?(j++,e=ca*(g.rowspan||1)):e=ca,g.colspan){for(j++,f=g.colspan-1;f>0;f--)i++,h+=_[d+i]&&_[d+i].widthNow||0;g.getContent().css("text-align","center")}g.getContent().css({width:h,height:e,left:c.cellLeft,lineHeight:e-1+"px",zIndex:j})}})}function z(){0===aa.content.length?ta.addClass("on"):ta.removeClass("on"),v(),w(),x()}function A(){var a=0,b=0,c=0;return ga&&(b+=38),_.forEach(function(d){switch(d.widthNow=d.width,d.mode){case 0:case 1:a+=d.widthNow;break;case 2:d.cellLeft=b,b+=d.widthNow;break;case 3:d.cellLeft=c,c+=d.widthNow}}),_.gridSize={l:b,c:a,r:c},_.gridSize}function B(){var a,b=Na.width(),c=[],d=0,e=0,f=0;_.forEach(function(a){1===a.mode?(d+=a.width,c.push(a)):0===a.mode&&(e+=a.width)}),a=(b-e)/d,d=0,c.forEach(function(b){var c=a*b.width,e=b.minWidth;c<e&&(c=e),b.widthNow=c,d+=c}),_.forEach(function(a){0!==a.mode&&1!==a.mode||(a.cellLeft=f,f+=a.widthNow)}),Qa.css("width",d+e)}function C(){D(X),Y&&Y.rows.length&&D(Y,1),Z&&Z.rows.length&&D(Z,2)}function D(a,c){var d,e,f,g,h,i,j,k=0;for(c=c||0,d=a.rows.length,0===c&&(j=aa.content),1===c&&(j=aa.header),2===c&&(j=aa.footer);k<d;k++)(function(){var d;e=Va.clone().appendTo(Sa[c]),f=Va.clone().appendTo(Ta[c]),g=Va.clone().appendTo(Ua[c]),d={$:{left:e,center:f,right:g},"public":{cells:[]}},j.push(d),ga&&(c&&0===k||!c)&&(h=Wa.clone().addClass("checkbox").css({textAlign:"center",width:38}),h.html('<input type="checkbox" class="check" />').appendTo(e),c?(i=1===c?Y.rows.length*ca:Z.rows.length*ca,h.css({height:i,"line-height":i-2+"px"})):h.css({height:ca,"line-height":ca-3+"px"}),!ha&&c&&h.addClass("disabled"),d.$.check=h.children(),d.checkEvent=b.event(h).setTap(function(){c?F():E.call(this,d)})),_.forEach(function(b,c){var h,i,j,l=a.rows[k].cells[c];switch(d["public"].cells[c]=i={},l.merge?h=Wa.clone():(j=l.val(),h=Wa.clone().css({textAlign:b.align}).html(j).attr("title",j?j.toString().replace(/<[^>]+>/g,""):"")),b.mode){case 0:case 1:h.appendTo(f);break;case 2:h.appendTo(e);break;case 3:h.appendTo(g)}i.getContent=function(){return h},i.val=l.val,l.colspan&&(i.colspan=l.colspan),l.rowspan&&(i.rowspan=l.rowspan),l.merge&&(i.merge=l.merge)})})()}function E(a){var b=oa.indexOf(a),d=oa.length;b===-1?(!ha&&d>0&&(oa[0].$.check.removeAttr("checked"),oa.splice(0,1),Ya[o].call(c["public"],a["public"])),a.$.check.attr("checked","checked"),oa.push(a),ha&&d+1===aa.content.length&&G(!0)):(a.$.check.removeAttr("checked"),oa.splice(b,1),Xa&&G(!1)),Ya[b>-1?o:p].call(c["public"],a["public"])}function F(){var a=[],b=Xa;0!==aa.content.length&&ha&&(b?(G(!1),oa.forEach(function(b){b.$.check.removeAttr("checked"),a.push(b["public"])}),oa.splice(0,oa.length)):(G(!0),aa.content.forEach(function(b){oa.indexOf(b)===-1&&(b.$.check.attr("checked","checked"),oa.push(b),a.push(b["public"]))})),Ya[b?o:p].call(c["public"],a))}function G(a){a?(Xa=!0,aa.header[0].$.check.attr("checked","checked"),aa.footer[0]&&aa.footer[0].$.check.attr("checked","checked")):(Xa=!1,aa.header[0].$.check.removeAttr("checked"),aa.footer[0]&&aa.footer[0].$.check.removeAttr("checked"))}function H(a){return void 0===a?ra.height():((b.regex.percent.test(a)||b.regex.nonNegative.test(a))&&(ra.css("height",a),da=a),c["public"])}function I(a){return N(),na.move(0,0),a&&"datatable"===a.type?(X.dataFill(a),D(X),z(),c["public"]):I(b.datatable().dataFill(a))}function J(a){var d=[];if(a&&"datatable"===a.type)a.rows[0]&&(_.forEach(function(b,c){a.rows[0].cells[c]?a.rows[0].cells[c].dataType(b.type):a.columnAdd({type:b.type}),d[c]=a.rows[0].cells[c].val()}),D(a),z(),Xa&&G(!1));else if(void 0!==a)return J(b.datatable().rowAdd(a));return c["public"]}function K(){return oa.map(function(a){return a["public"]})}function L(a){var d,e,f,g,h;if(b.type.isArray(a))for(g=0,h=a.length;g<h;g++)L(a[g]);else d=aa.content.filter(function(b){return b["public"]===a}),d.length&&(ga&&(f=oa.indexOf(d[0]),d[0].checkEvent.off(),d[0].$.check.remove(),oa.splice(f,1),0===oa.length&&Xa&&G(!1)),e=aa.content.indexOf(d[0]),d[0].$.left.remove(),d[0].$.center.remove(),d[0].$.right.remove(),aa.content.splice(e,1));return c["public"]}function M(){return aa.content.map(function(a){return a["public"]})}function N(){var a,b=0,c=0,d=aa.content,e=d.length;if(ga){if(a=oa.length,Xa&&G(!1),a>0)for(;c<a;c++)E(oa[b]);for(oa.splice(0,a);b<e;b++)d[b].checkEvent.off()}Aa.empty(),Qa.empty(),Ia.empty(),ta.addClass("on"),aa.content.splice(0,e)}function O(a){return Ya.rowSelected=a,c["public"]}function P(a){return Ya.rowDeselected=a,c["public"]}function Q(){x()}function R(){ea&&ra.on([a.an.event[12],a.an.event[13]].join(" "),n,function(b){var c,d,e=$(this),g=b.type;e.parents(f("content",1)).length>0&&(c=e.index(),d={"background-color":g===a.an.event[12]?fa:""},Aa.children(n).eq(c).children().css(d),Qa.children(n).eq(c).children().css(d),Ia.children(n).eq(c).children().css(d))})}function S(){var a={barState:0,barColor:"rgba(60, 60, 60, .3)",barColorOn:"rgba(60, 60, 60, .6)",barSize:5,hasVertical:!0,hasHorizontal:!0,isScrollMode:!0,recountByResize:!0},c={barState:2,hasHorizontal:!1,hasVertical:!0,isTouchMode:!1,isMouseWheelMode:!1,isScrollMode:!1},d={barState:2,hasHorizontal:!0,hasVertical:!1,isTouchMode:!1,isMouseWheelMode:!1,isScrollMode:!1};na=b.scroll(Na,a),ja=b.scroll(xa,c),ka=b.scroll(Fa,c),la=b.scroll(Ma,d),ma=b.scroll(Oa,d),na.followerBind(ja).followerBind(ka).followerBind(la).followerBind(ma),b.callbacks.pageResize.add(Q),R()}function T(){return Za.apply(c["public"],arguments),z(),c["public"]}function U(){return $a.apply(c["public"],arguments),z(),c["public"]}function V(){return _a.apply(c["public"],arguments),z(),c["public"]}function W(){return ab.apply(c["public"],arguments),z(),c["public"]}var X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa=[],pa=(c.getOptions(["datas","datasHeader","datasFooter","columns","columnDefault","cellHeight","height",["hover","isHover"],"hoverColor",["selected","isSelected"],["selectedMultiple","isSelectedMultiple"],"emptyText"],function(b){ca=parseInt(b.cellHeight)||34,da=b.height||null,ea=a.boolCheck(b.hover,!0),fa=b.hoverColor||"#EDF7FF",ga=a.boolCheck(b.selected,!1),ha=a.boolCheck(b.selectedMultiple,!0),ia=b.emptyText||"此处没有任何数据",d(b.datas,b.datasHeader,b.datasFooter),e(b.columnDefault),q(b.columns),t(),r()}),'<div class="'+g+'"><div class="'+k+'"><div class="'+j+'" /></div><div class="'+l+'"><div class="'+j+'" /></div><div class="'+m+'"><div class="'+j+'" /></div></div><div class="'+i+'"><div class="'+k+'"><div class="'+j+'" /></div><div class="'+l+'"><div class="'+j+'" /></div><div class="'+m+'"><div class="'+j+'" /></div></div><div class="'+h+'"><div class="'+k+'"><div class="'+j+'" /></div><div class="'+l+'"><div class="'+j+'" /></div><div class="'+m+'"><div class="'+j+'" /></div></div><div class="'+f("empty")+'"><div>'+ia+"</div></div>"),qa=c.current,ra=qa.html(pa),sa=ra.children(),ta=sa.last(),ua=sa.eq(0),va=ua.children(),wa=va.eq(0),xa=va.eq(1),ya=va.eq(2),za=wa.children(),Aa=xa.children(),Ba=ya.children(),Ca=sa.eq(1),Da=Ca.children(),Ea=Da.eq(0),Fa=Da.eq(1),Ga=Da.eq(2),Ha=Ea.children(),Ia=Fa.children(),Ja=Ga.children(),Ka=sa.eq(2),La=Ka.children(),Ma=La.eq(0),Na=La.eq(1),Oa=La.eq(2),Pa=Ma.children(),Qa=Na.children(),Ra=Oa.children(),Sa=[Aa,za,Ba],Ta=[Qa,Pa,Ra],Ua=[Ia,Ha,Ja],Va=a.jqe[0].clone().addClass(f("row")),Wa=a.jqe[0].clone().addClass(f("cell")),Xa=!1,Ya={rowSelected:a.noop,rowDeselected:a.noop};!function(){C(),z(),c.origin.length&&(c.origin.after(ra),c.origin.remove(),c.transferStyles(),z()),S()}();var Za=c["public"].appendTo,$a=c["public"].prependTo,_a=c["public"].insertAfter,ab=c["public"].insertBefore;return b.extend(c["public"],{appendTo:T,prependTo:U,insertAfter:V,insertBefore:W,height:H,setRowSelected:O,setRowDeselected:P,dataFill:I,dataRowAdd:J,dataRowRemove:L,dataRowSelected:K,dataAll:M,dataEmpty:N})},d.align=q,d.mode=r})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("tabs",function(c,d){var e=c.className,f=a.className(e),g=a.jqe[0].clone().addClass(f("content")),h={normal:"normal",simple:"simple"},i="tabs",j=i+".page",k="tabs-page";a.creater("page",function(){function c(a){switch(a){case"url":case 1:case"1":s=1;break;default:case"html":case 0:case"0":s=0}}function d(a){return void 0!==a?(t=String(a),x.attr("title",t).children("span").html(t),A.attr("title",t).children("span").html(t),E):t}function e(a){if(void 0!==a){switch(u=String(a),s){case 0:y.html(u);break;case 1:y.children("iframe").attr("src",u)}return E}return u}function h(a){return a&&a.type===i&&!E.tabs&&a.pageAdd(E),E}function l(){return E.tabs&&E.tabs.pageRemove(E),E}function m(a){return void 0===a?F:(F=!!a,F?(x.addClass("on"),y.addClass("on"),A.addClass("on")):(x.removeClass("on"),y.removeClass("on"),A.removeClass("on")),E)}function n(){return x}function o(){return A}function p(){return y}function q(){return z}function r(){return s}var s,t,u,v,w,x,y,z,A,B=arguments,C=B.length,D=B[0],E={tabs:null},F=!1;return function(){switch(1===C&&b.type.isObject(D=B[0])?(s=D.type,w=D.name,t=D.title,u=D.details,v=D.btnClose):2===C?(t=B[0],u=B[1],v=0):3===C?(s=B[0],t=B[1],u=B[2]):5===C&&(s=B[0],w=B[1],t=B[2],u=B[3],v=B[4]),c(s),w=w||a.createControlID(k),t=t||"未命名选项卡",u=u||(1===s?"about:blank":""),v=a.boolCheck(v,!0),x=a.jqe[0].clone().addClass(f("tab")).attr("title",t).append(a.jqe[1].clone().html(t)),A=a.jqe[0].clone().addClass(f("menu-item")).attr("title",t).append(a.jqe[1].clone().html(t)),y=g.clone(),v&&(x.append('<i class="ico ico-solid-cancel" />'),A.append('<i class="ico ico-hollow-cancel" />')),s){case 0:y.append(u);break;case 1:z=$('<iframe id="'+w+'" name="'+w+'" src="'+u+'" />'),y.append(z).addClass("iframe"),b.support.apple&&(y.css({"-webkit-overflow-scrolling":"touch","overflow-y":"scroll"}),z.on("load",function(){z.timer=window.setInterval(function(){var a=z.contents().find("body").height();z.h&&a===z.h||(z.h=a,z.height(a))},500)}))}}(),b.extend(E,{name:w,type:j,getTab:n,getTabLink:o,getContent:p,getIframe:q,getPageType:r,openState:m,title:d,details:e,tabsIn:h,tabsOut:l})},d),c.init=function(c){function g(a){switch(0===C&&P.removeClass(f("top")),1===C&&P.removeClass(f("bottom")),2===C&&P.removeClass(f("left")),3===C&&P.removeClass(f("right")),Y.forEach(function(a){a.getTab().removeAttr("style")}),a){default:case"top":case"0":case 0:C=0,P.addClass(f("top"));break;case"bottom":case"1":case 1:C=1,P.addClass(f("bottom"));break;case"left":case"2":case 2:C=2,P.addClass(f("left"));break;case"right":case"3":case 3:C=3,P.addClass(f("right"))}l()}function i(a){H="auto"===a?null:parseInt(a)||150}function k(a){switch(I&&P.removeClass(f(h[I])),a){default:case h.normal:case"0":case 0:I=null;break;case h.simple:case"1":case 1:I=h.simple,P.addClass(f(h[I]))}}function l(a){void 0===a?(Z=0,Y.forEach(function(b){0===C||1===C?(a=Math.ceil(b.getTab().width()),H&&H<a&&(a=H),b.getTab().css("width",a)):(a=Math.ceil(b.getTab().height()),b.getTab().css("height",a)),b.size=a,l(a)})):(Z+=a,0===C||1===C?R.width(Z+2*Y.length):R.height(Z+2*Y.length))}function m(a){var b,c;D&&(K.recountPosition(),E&&(b=0!==a.getTab().prev().length?a.getTab().prev().position():a.getTab().position(),0===C||1===C?K.move(b.left,0,300):K.move(0,b.top,300))),B&&(J.recountPosition(),F&&(c=0!==a.getTabLink().prev().length?a.getTabLink().prev().position():a.getTabLink().position(),J.move(0,c.top-5,300)))}function n(a){var b=Y.filter(function(b){return b.name===a});return b&&b[0]}function o(){if(c.origin.length)for(var b,g,h,i,j,k,l,m="["+f("page")+"]",n=c.origin.children(m),o=0,p=n.length;o<p;o++)b=n.eq(o),g=a.attrValue(b,"page-type",e),i=a.attrValue(b,"page-name",e),h=a.attrValue(b,"page-title",e),j=b.html(),k=a.attrValue(b,"page-btn-close",e,1),l=a.boolCheck(a.attrValue(b,"page-open",e,0),0),s(d.page({type:g,title:h,name:i,details:j,btnClose:k}),l)}function p(a){return void 0!==a?(g(a),l(),c["public"]):C}function q(a){return void 0!==a?(k(a),c["public"]):I?I:h.normal}function r(a){return void 0===a?P.height():((b.regex.percent.test(a)||b.regex.nonNegative.test(a)||"auto"===a)&&(P.css("height",a),"auto"===a?P.addClass(f("auto")):P.removeClass(f("auto")),G=a),c["public"])}function s(a,d){var e,f,g;return!a||a.type!==j||a.tabs||w(a.name)||(a.tabs=c["public"],Y.push(a),R.append(a.getTab()),S.append(a.getContent()),0===C||1===C?(e=Math.ceil(a.getTab().width()),H&&H<e&&(e=H),a.getTab().css("width",e)):(e=Math.ceil(a.getTab().height()),a.getTab().css("height",e)),a.size=e,l(e),D&&K.recountPosition(),B&&(X.append(a.getTabLink()),J.recountPosition()),(1===Y.length||d)&&u(a),1===Y.length&&W.removeClass("empty"),f=$().add(a.getTab().children("span")),g=$().add(a.getTab().find("i")),B&&(f=f.add(a.getTabLink().children("span")),g=g.add(a.getTabLink().find("i"))),a.event=b.event(f).setTap(function(){u(a),y()}),a.closeEvent=b.event(g).setTap(function(){t(a)})),c["public"]}function t(a){var d,e;if(a&&a.type===j&&a.tabs===c["public"])a.getTab().detach(),a.getTabLink().detach(),a.getContent().detach(),a.event.off(),a.closeEvent.off(),1===a.getPageType()&&(b.support.apple&&(a.getIframe().off("load"),window.clearInterval(a.getIframe().timer)),a.getIframe().detach()),a.tabs=null,d=Y.indexOf(a),L===a&&(a.openState(0),d>0?L=Y[d-1].openState(1):Y.length>1&&(L=Y[1].openState(1))),Y.splice(d,1),e=-a.size,delete a.size,l(e),0===Y.length?(L=null,W.addClass("empty")):m(L);else if(a)return t(v(a));return c["public"]}function u(a){if(a&&a.type===j&&a.tabs===c["public"]&&L!==a)L&&L.openState(!1),a.openState(!0),m(a),L=a,_.change.call(c["public"],a);else if(a)return u(v(a));return c["public"]}function v(a){return n(a)||null}function w(a){return!!n(a)}function x(a){return _.change=a,c["public"]}function y(){T.removeClass("on")}function z(){T.toggleClass("on")}function A(){var a={barState:2,recountByResize:!0,isScrollMode:!1};D&&(0===C||1===C?(a.hasHorizontal=!0,a.hasVertical=!1):(a.hasHorizontal=!1,a.hasVertical=!0),K=b.scroll(Q,a)),B&&(b.event(V).setTap(z),J=b.scroll(W,{barSize:3,barColor:"#d5d5d5"})),b.event(Q).setDown(function(){U.show()}).setUp(function(){U.hide()})}var B,C,D,E,F,G,H,I,J,K,L,M=c.getOptions(["layout",["menu","isMenu"],"height","maxWidth","theme",["tabScroll","isTabScroll"],["tabAutoMove","isTabAutoMove"],["menuAutoMove","isMenuAutoMove"]],function(b){B=a.boolCheck(b.menu,!0),D=a.boolCheck(b.tabScroll,!0),E=a.boolCheck(b.tabAutoMove,!0),F=a.boolCheck(b.menuAutoMove,!0),G=b.height||null,H=b.maxWidth,I=b.theme,C=b.layout}),N='<div class="'+f("bar")+'"><div class="'+f("bar-inner")+'" /></div><div class="'+f("main")+'" />',O=c.current,P=O.html(N),Q=P.children(f("bar",1)),R=P.find(f("bar-inner",1)),S=P.find(f("main",1)),T=$('<div class="'+f("menu")+'"><div class="'+f("menu-btn")+'" /></div>'),U=$('<div class="'+f("mask")+'" />'),V=T.children(":first"),W=$('<div class="'+f("menu-list")+' empty" '+f("empty")+'="这里是空的"><div class="'+f("menu-inner")+'" /></div>'),X=W.children(),Y=[],Z=0,_={change:a.noop};return function(){c.origin.length&&(c.origin.after(P),c.origin.remove(),c.transferStyles()),g(C),i(M.maxWidth),k(I),B&&(P.prepend(T),T.after(W)),r(G),P.append(U),A(),o()}(),b.extend(c["public"],{height:r,layout:p,theme:q,pages:Y,pageAdd:s,pageRemove:t,pageOpen:u,pageFind:v,hasName:w,setChange:x})},d.theme=h,d.layout={top:0,bottom:1,left:2,right:3},d.pageType={html:0,url:1}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("page",function(c,d){var e=c.className,f=a.className(e);c.init=function(c){function d(){var a,c=[],d=K.find("["+f("num")+"]");if(d.remove(),0!==D){for(H&&H.off(),a=z;a>=1;a--)x-a>0&&c.push('<a class="btn btn-solid" '+f("num")+'="'+(x-a)+'">'+(x-a)+"</a>");for(c.push('<a class="btn" '+f("num")+'="'+x+'" '+f("now")+">"+x+"</a>"),a=1;a<=z;a++)x+a<=y&&c.push('<a class="btn btn-solid" '+f("num")+'="'+(x+a)+'">'+(x+a)+"</a>");L.eq(1).after(c.join("")),d=K.find("["+f("num")+"]"),H=b.event(d).setTap(function(){var a=this.attr(f("num"));h(a)})}}function e(){g();for(var a=1;a<=y;a++){var c=a===x;G.optionAdd(b.select.option(a,a,!1,c))}}function g(){M=!0;for(var a=G.options,b=a.length,c=0;c<b;c++)a[0].selectOut();M=!1}function h(a){a>y&&(a=y),a<1&&(a=1),A&&(M=!0,G.val(a),M=!1),i(a)}function i(a){a=parseInt(a)||1,a!==x&&(x=a,d(),N.change.call(c["public"],x))}function j(a){D=0===a||"0"===a||"small"===a?0:1,d(),A&&(0===D?G.insertAfter(L.eq(1)):G.appendTo(K))}function k(a){return void 0!==a?(E||j(a),c["public"]):D}function l(a){return void 0!==a?(C=!!a,C?K.removeClass("notext"):K.addClass("notext"),c["public"]):C}function m(a){return void 0!==a?(B=!!a,B?K.removeClass("noico"):K.addClass("noico"),c["public"]):B}function n(a){return void 0!==a?(a=parseInt(a)||x,a<1&&(a=1),a>y&&(a=y),h(a),c["public"]):x}function o(a){return void 0!==a?(y=parseInt(a)||y,y<1&&(y=1),A&&e(),y<x?h(y):d(),c["public"]):y}function p(a){return void 0!==a?(z=parseInt(a)||z,z<0&&(z=0),d(),c["public"]):z}function q(a){return N.change=a,c["public"]}function r(){var a=K.parent(),b=a.width();j(b<F?0:1)}function s(){b.event(L).setTap(function(){var a=parseInt(this.attr(f("fn")));switch(a){case 0:h(1);break;case 1:h(x-1);break;case 2:h(x+1);break;case 3:h(y)}}),A&&G.setChange(function(a){M||i(a)})}function t(){return O.apply(c["public"],arguments),r(),c["public"]}function u(){return P.apply(c["public"],arguments),r(),c["public"]}function v(){return Q.apply(c["public"],arguments),r(),c["public"]}function w(){return R.apply(c["public"],arguments),r(),c["public"]}var x,y,z,A,B,C,D,E,F,G,H,I=(c.getOptions(["now","max","show",["menu","isMenu"],["ico","isIco"],["text","isText"],"layout","relayout","relayoutWidth"],function(b){x=parseInt(b.now)||1,y=parseInt(b.max)||x,x<1&&(x=1),y<x&&(y=x),z=parseInt(b.show)||2,A=a.boolCheck(b.menu,!0),B=a.boolCheck(b.ico,!0),C=a.boolCheck(b.text,!0),B||C||(C=!0),E=a.boolCheck(b.relayout,!0),F=parseInt(b.relayoutWidth)||767,D=b.layout}),'<a class="btn" '+f("fn")+'="0"><i class="ico">&#xec00;</i><span>首页</span></a><a class="btn" '+f("fn")+'="1"><i class="ico">&#xec01;</i><span>上页</span></a><a class="btn" '+f("fn")+'="2"><span>下页</span><i class="ico">&#xec02;</i></a><a class="btn" '+f("fn")+'="3"><span>末页</span><i class="ico">&#xec03;</i></a>'),J=c.current,K=J.html(I).addClass("group"),L=K.children("a"),M=!1,N={change:a.noop};!function(){c.origin.length&&(c.origin.after(K),c.origin.remove(),c.transferStyles()),A&&(G=b.select(c["public"].id+"-select",{dir:b.select.direction.up,moveSelected:!0}),e()),B||K.addClass("noico"),C||K.addClass("notext"),E?(r(),b.callbacks.pageResize.add(r)):j(D),s()}();var O=c["public"].appendTo,P=c["public"].prependTo,Q=c["public"].insertAfter,R=c["public"].insertBefore;return b.extend(c["public"],{appendTo:t,prependTo:u,insertAfter:v,insertBefore:w,layout:k,isText:l,isIco:m,now:n,max:o,show:p,setChange:q})},d.layout={small:0,normal:1}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("dialog",function(c,d){function e(a,c,d){return b.type.isArray(a)&&2===a.length?a={x:a[0],y:a[1]}:b.type.isObject(a)?a={x:a.x||a.width||a.w,y:a.y||a.height||a.h}:b.type.isString(a)?(a=a.split(a.indexOf(",")>-1?",":" "),a=2===a.length?{x:a[0],y:a[1]}:{x:a[0],y:a[1]}):a=b.type.isNumber(a)?{x:a,y:a}:{x:0,y:0},a.x=parseInt(a.x)||c,a.y=parseInt(a.y)||d,a}function f(c,d){var e,f,g,h,i,j,k=c.length;return 1===k&&b.type.isObject(c[0])?(e=c[0].title||"",f=c[0].content||"",g=c[0].ico,h=c[0].icoStyle,i=c[0].sendFn,j=c[0].cancelFn):(e=c[0]||"",f=c[1]||"",3===k&&(b.type.isFunction(c[2])?i=c[2]:h=c[2]),4===k&&(b.type.isFunction(c[2])&&b.type.isFunction(c[3])?(i=c[2],j=c[3]):b.type.isObject(c[2])&&b.type.isFunction(c[3])?(h=c[2],i=c[3]):(g=c[2],h=c[3])),5===k&&(b.type.isObject(c[2])&&b.type.isFunction(c[3])&&b.type.isFunction(c[4])?(h=c[2],i=c[3],j=c[4]):(g=c[2],h=c[3],i=c[4])),6===k&&(g=c[2],h=c[3],i=c[4],j=c[5])),h=!h||h.name&&h.ico?h:style.normal,i=b.type.isFunction(i)?i:a.noop,j=b.type.isFunction(j)?j:a.noop,d(e,f,g,h,i,j)}function g(a,c,d,e,f,g){var h,i;d.send&&(h=b.event(c.eq(0)).setTap(function(){e&&e(g&&g.val()),h&&h.off(),i&&i.off(),a.remove()})),d.cancel&&(i=b.event(c.eq(1)).setTap(function(){f&&f(g&&g.val()),h&&h.off(),i&&i.off(),a.remove()}))}function h(a,b,c,d){var e=$("<table><tr><td></td></tr></table>"),f=e.find("td");a.addClass(j("built")),void 0!==b?f.before('<td><i class="ico fc-'+c.name+'">'+b+"</i></td>"):void 0!==c&&"normal"!==c.name&&f.before('<td><i class="ico fc-'+c.name+'">'+c.ico+"</i></td>"),e.find("td:last").append(d),a.append(e)}var i=c.className,j=a.className(i),k='<a class="btn">确 定</a>',l='<a class="btn">取 消</a>';c.init=function(c){function d(b){switch(b){case a.an.pos[0]:case"0":s=a.an.pos[0];break;case a.an.pos[1]:case"1":case"full":case"fullScreen":s=a.an.pos[1];break;case a.an.pos[2]:case"2":case"topLeft":s=a.an.pos[2];break;case a.an.pos[3]:case"3":case"topRight":s=a.an.pos[3];break;case a.an.pos[5]:case"4":case"bottomLeft":s=a.an.pos[5];break;case a.an.pos[6]:case"5":case"bottomRight":s=a.an.pos[6];break;default:s=e(s,0,0)}}function f(a){switch(a){case"url":case 1:case"1":v=1;break;default:case"html":case 0:case"0":v=0}}function g(){function c(c){if(b.type.isObject(c)){var e=a.jqe[2].clone().addClass("btn"),f=b.event(e);e.html(c.text||""),e.event=f,c["class"]&&e.addClass(c["class"]),c.tap&&f.setTap(c.tap),d.push(e)}}var d=[];b.type.isArray(w)?w.forEach(function(a){c(a)}):c(w),d.forEach(function(a){C.append(a)}),w=d}function h(){return B}function i(){return C}function k(){return F||E||(F=!0,E=!0,a.backmask.open(c["public"]),window.setTimeout(function(){A.addClass("on")},10),window.setTimeout(function(){E=!1,H.open.call(c["public"])},310)),c["public"]}function l(){return F&&!E&&(F=!1,E=!0,a.backmask.close(c["public"]),window.setTimeout(function(){A.removeClass("on")},10),window.setTimeout(function(){E=!1,H.close.call(c["public"])},310)),c["public"]}function m(){return F||E?(F&&l(),window.setTimeout(m,310),null):(b.type.isArray(w)&&w.forEach(function(a){a.event.off()}),A.remove(),G.off(),c.remove(),null)}function n(a){return H.open=a,c["public"]}function o(a){return H.close=a,c["public"]}function p(){var d,e={};switch(s!==a.an.pos[1]&&(e.width=r.x,e.height=r.y),s===a.an.pos[2]?A.addClass(j(a.an.pos[2])):s===a.an.pos[3]?A.addClass(j(a.an.pos[3])):s===a.an.pos[5]?A.addClass(j(a.an.pos[5])):s===a.an.pos[6]?A.addClass(j(a.an.pos[6])):s===a.an.pos[1]?A.addClass(j(a.an.pos[1])):s===a.an.pos[0]?A.addClass(j(a.an.pos[0])):(e.top=s.y,e.left=s.x),A.css(e),x||D.detach(),v){case 0:c.origin.length?B.append(c.origin.html()):B.append(u);break;case 1:d=c.origin.length?c.origin.html():u,B.append('<iframe src="'+d+'" />'),b.support.apple&&B.css({"-webkit-overflow-scrolling":"touch","overflow-y":"scroll"})}null===w?C.remove():(!b.type.isObject(w)&&!b.type.isArray(w)||b.type.isJQuery(w)?C.html(w):g(),B.css("bottom","3em")),a.body().append(A)}function q(){G=b.event(D).setTap(l)}var r,s,t,u,v,w,x,y=(c.getOptions(["size","position","title",["btnClose","isBtnClose"],"content","contentType","footer"],function(b){t=b.title||"未定义标题",u=b.content||null,w=void 0===b.footer?null:b.footer,f(b.contentType),r=e(b.size,400,300),s=b.position,s=void 0===s?a.an.pos[0]:s,d(s),x=a.boolCheck(b.btnClose,!0)}),'<div class="'+j("header")+'">'+t+'</div><div class="'+j("body")+'" /><div class="'+j("footer")+'" /><a class="'+j("close")+' ico">&#xed1f;</a>'),z=c.current,A=z.html(y),B=(A.children("div").eq(0),A.children("div").eq(1)),C=A.children("div").eq(2),D=A.children("a"),E=!1,F=!1,G=null,H={open:a.noop,close:a.noop};return function(){p(),q()}(),b.extend(c["public"],{getContent:h,getFooterContent:i,open:k,close:l,remove:m,setOpen:n,setClose:o})},d.position={center:a.an.pos[0],fullScreen:a.an.pos[1],topLeft:a.an.pos[2],topRight:a.an.pos[3],bottomLeft:a.an.pos[5],bottomRight:a.an.pos[6]},d.contentType={html:0,url:1},d.alert=function(){return f.call(this,a.argsToArray(arguments),function(a,b,c,e,f){var i=d({title:a,size:[300,220],btnClose:!1,footer:k}),j=i.getContent(),l=i.getFooterContent(),m={send:1};!function(){h(j,c,e,b),i.setOpen(function(){g(i,l.children("a"),m,f)}).open()}()})},d.confirm=function(){return f.call(this,a.argsToArray(arguments),function(a,b,c,e,f,i){var j=d({title:a,size:[300,220],btnClose:!1,footer:k+l}),m=j.getContent(),n=j.getFooterContent(),o={send:1,cancel:1};!function(){h(m,c,e,b),j.setOpen(function(){g(j,n.children("a"),o,f,i)}).open()}()})},d.prompt=function(){return f.call(this,a.argsToArray(arguments),function(a,b,c,e,f,i){var j=d({title:a,size:[300,220],btnClose:!1,footer:k+l}),m=j.getContent(),n=j.getFooterContent(),o=$('<input type="text" class="textbox" />'),p={send:1,cancel:1};!function(){h(m,c,e,b),m.find("td:last").append(o),j.setOpen(function(){g(j,n.children("a"),p,f,i,o)}).open()}()})}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("message",function(c,d){var e=(c.className,{}),f=12;e[a.an.pos[2]]=[],e[a.an.pos[4]]=[],e[a.an.pos[3]]=[],e[a.an.pos[5]]=[],e[a.an.pos[7]]=[],e[a.an.pos[6]]=[],c.init=function(c){function d(b){switch(b){case a.an.pos[2]:case"topLeft":case"1":case 1:n=a.an.pos[2];break;case a.an.pos[3]:case"topRight":case"2":case 2:n=a.an.pos[3];break;case a.an.pos[7]:case"bottomCenter":case"3":case 3:n=a.an.pos[7];break;case a.an.pos[5]:case"bottomLeft":case"4":case 4:n=a.an.pos[5];break;case a.an.pos[6]:case"bottomRight":case"5":case 5:n=a.an.pos[6];break;default:case a.an.pos[4]:case"topCenter":case"0":case 0:n=a.an.pos[4]}}function g(){return w}function h(){var b,d,g,h,i;if(!y){switch(b=w.outerWidth(),d=w.outerHeight(),h=e[n].length,y=!0,e[n].push(c["public"]),i=f+h*(d+f),n){case a.an.pos[4]:g={top:i,left:"50%",marginLeft:-b/2};break;case a.an.pos[2]:g={top:i,left:f};break;case a.an.pos[3]:g={top:i,right:f};break;case a.an.pos[7]:g={bottom:i,left:"50%",marginLeft:-b/2};break;case a.an.pos[5]:g={bottom:i,left:f};break;case a.an.pos[6]:g={bottom:i,right:f}}c["public"].data={tb:i},w.css(g).addClass("on"),A.open.call(c["public"]),s!==-1&&q&&(z=window.setTimeout(function(){j()},s))}return c["public"]}function i(){var b,d,g,h,i,j;if(y){for(null!==z&&window.clearTimeout(z),b=w.outerHeight(),d=e[n].indexOf(c["public"]),g=e[n].length,y=!1,h=d;h<g;h++)i=e[n][h].data.tb,j=i-b-f,e[n][h].data.tb=j,n===a.an.pos[2]||n===a.an.pos[3]||n===a.an.pos[4]?e[n][h].getContent().css("top",j):e[n][h].getContent().css("bottom",j);e[n].splice(d,1),w.removeClass("on"),A.close.call(c["public"])}return c["public"]}function j(){return y?(i(),window.setTimeout(j,310),null):(w.remove(),t.off(),c.remove(),null)}function k(a){return A.open=a,c["public"]}function l(a){return A.close=a,c["public"]}function m(){t=b.event(x).setTap(function(){j()})}var n,o,p,q,r,s,t,u=(c.getOptions(["position","message","style","autoSwitch",["btnClose","isBtnClose"],"closeTime"],function(b){q=a.boolCheck(b.autoSwitch,!0),d(b.position),c.origin.length?(o=b.message||c.origin.text()||"未知消息",c.origin.remove()):o=b.message||"未知消息",p=b.style||"",r=a.boolCheck(b.btnClose,!0),s=b.closeTime||5e3}),'<div class="message-content">'+o+"</div>"),v=c.current,w=v.html(u),x=a.jqe[2].clone().addClass("message-close"),y=!1,z=null,A={open:a.noop,close:a.noop};return function(){w.addClass("message"),a.body().append(w),""!==p&&w.addClass(p.name?p.name:p),r&&w.append(x),q&&h(),m()}(),b.extend(c["public"],{getContent:g,open:h,close:i,remove:j,setOpen:k,setClose:l})},d.position={topCenter:a.an.pos[4],topLeft:a.an.pos[2],topRight:a.an.pos[3],bottomCenter:a.an.pos[7],bottomLeft:a.an.pos[5],bottomRight:a.an.pos[6]},d.info=function(a){d({message:a,style:b.style.info})},d.warning=function(a){d({message:a,style:b.style.warning})},d.success=function(a){d({message:a,style:b.style.success})},d.danger=function(a){d({message:a,style:b.style.danger})}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("switch",function(c,d){var e=c.className,f=a.className(e);c.init=function(c){function d(a){o!==a&&(o=a,u.val(o),w.change.call(c["public"],o),1===o?w.open.call(c["public"]):w.close.call(c["public"]))}function e(a){return void 0!==a?(a?h():i(),c["public"]):o}function g(a){return void 0!==a?(p!==a&&(p=!!a,a?t.attr(f("disabled"),"true"):t.removeAttr(f("disabled"))),c["public"]):p}function h(){return o||(t.addClass("checked"),d(1)),c["public"]}function i(){return o&&(t.removeClass("checked"),d(0)),c["public"]}function j(){return o?i():h(),c["public"]}function k(a){return w.open=a,c["public"]}function l(a){return w.close=a,c["public"]}function m(a){return w.change=a,c["public"]}function n(){b.event(t).setTap(function(){p||j()})}var o,p,q,r=(c.getOptions(["value",["disabled","isDisabled"],"color"],function(b){o=1===parseInt(b.value)?1:0,p=a.boolCheck(b.disabled,!1),q=b.color||""}),'<input type="checkbox" /><input type="hidden" />'),s=c.current,t=s.html(r),u=t.children('[type="hidden"]'),v=t.children('[type="checkbox"]'),w={open:a.noop,close:a.noop,change:a.noop};return function(){c.origin.length&&(c.origin.after(t),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:v,attrReg:"tabindex"}),c.transferAttrs({accept:u,attrReg:"name"})),""!==q&&t.addClass(q.name?q.name:q),1===o&&t.addClass("checked"),u.val(o),p&&t.attr(f("disabled"),!0),n()}(),b.extend(c["public"],{val:e,disabled:g,open:h,close:i,toggle:j,setOpen:k,setClose:l,setChange:m})}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("select",function(c,d){var e=c.className,f=a.className(e),g="select",h=g+".group",i=g+".option";a.creater("group",function(){function c(a){return void 0!==a?(m=String(a),o.attr("title",m),s):m}function d(a){var b,c;if(void 0!==a){if(n!==a)if(n=!!a,a){if(o.attr(f("disabled"),"true"),c=r.length,0!==c)for(b=0;b<c;b++)s.select.valOption(r[b],0)}else o.removeAttr(f("disabled"));return s}return n}function e(a){return a&&a.type===g&&!s.select&&a.groupAdd(s),s}function h(){return s.select&&s.select.groupRemove(s),s}function j(a){return a&&a.type===i&&!a.group&&(n&&a.selected()&&a.selected(0),a.group=s,r.push(a),o.append(a.getContent()),s.select&&a.selectIn(s.select)),s}function k(a){var b;return a&&a.type===i&&a.group===s&&(b=r.indexOf(a),b>-1&&(r.splice(b,1),
a.group=null,a.getContent().detach(),a.select&&a.selectOut())),s}function l(){return o}var m,n,o,p=arguments,q=p.length,r=[],s={select:null},t=p[0];return function(){1===q&&b.type.isObject(t)?(m=t.label,n=!!t.isDisabled):(m=p[0]||"未命名选项组",n=!!p[1]),m=String(m),o=a.jqe[0].clone().attr("title",m).addClass(f("group")),n&&o.attr(f("disabled"),"true")}(),b.extend(s,{type:"select.group",options:r,getContent:l,label:c,disabled:d,optionAdd:j,optionRemove:k,selectIn:e,selectOut:h})},d),a.creater("option",function(){function c(a){return void 0!==a?(o=String(a),s.html(o).attr("title",o),v):o}function d(a){return void 0!==a?(p=String(a),s.attr(f("value"),p),v):p}function e(a){return void 0!==a?(!a||q||null!==v.group&&(null===v.group||v.group.disabled())?(r=!1,s.removeClass("on")):(r=!0,s.addClass("on")),v):r}function i(a){return void 0!==a?(a=!!a,a?(q=!0,s.attr(f("disabled"),"true"),r&&null!==v.select&&v.select.valOption(v,!1)):(q=!1,s.removeAttr(f("disabled"))),v):q}function j(a){return!a||a.type!==h||v.group||v.select||a.optionAdd(v),v}function k(){return v.group&&v.group.optionRemove(v),v}function l(a){return a&&a.type===g&&!v.select&&a.optionAdd(v),v}function m(){return v.select&&v.select.optionRemove(v),v}function n(){return s}var o,p,q,r,s,t=arguments,u=t.length,v={group:null,select:null},w=t[0];return function(){1===u&&b.type.isObject(w)?(o=w.label,p=w.value,q=!!w.isDisabled,r=!q&&!!w.isSelected):(o=t[0]||"未命名选项",p=t[1],q=!!t[2],r=!q&&!!t[3]),o=String(o),p=String(p)||o,s=a.jqe[2].clone().html(o).attr("title",o).attr(f("value"),p).addClass(f("option")),q&&s.attr(f("disabled"),"true"),r&&e(!0),b.event(s).setTap(function(){v.disabled()||v.group&&(!v.group||v.group.disabled())||v.select&&(v.select.valOption(v),v.select.multiple()||v.select.close())})}(),b.extend(v,{type:"select.option",getContent:n,label:c,val:d,selected:e,disabled:i,groupIn:j,groupOut:k,selectIn:l,selectOut:m})},d),d.direction={up:1,down:0},c.init=function(c){function e(a){switch(a){case"up":case"1":case 1:K=1,Q.removeClass(f("dir-down")).addClass(f("dir-up"));break;default:case"down":case"0":case 0:K=0,Q.removeClass(f("dir-up")).addClass(f("dir-down"))}}function g(a){I=a,T.html(I)}function j(a){L=a,v().attr(f("empty"),L)}function k(){if(c.origin.length){var a="optgroup, ["+f("optgroup")+"]",b=c.origin.children(a);l();for(var e,g=0,h=b.length;g<h;g++){var i=b.eq(g),j=i.attr("label")||i.attr(f("label"))||"",k=!!(void 0!==i.attr("disabled")&&"false"!==i.attr("disabled")||void 0!==i.attr(f("disabled"))&&"false"!==i.attr(f("disabled")));e=d.group(j,k),y(e),l(e,i)}}}function l(a,b){for(var e,g=void 0===a,h="option, ["+f("option")+"]",i=g?c.origin.children(h):b.children(h),j=0,k=i.length;j<k;j++){var l=(i.eq(j),i.eq(j).html()),m=i.eq(j).val()||i.eq(j).attr("value")||i.eq(j).attr(f("value")),n=!!(void 0!==i.eq(j).attr("disabled")&&"false"!==i.eq(j).attr("disabled")||void 0!==i.eq(j).attr(f("disabled"))&&"false"!==i.eq(j).attr(f("disabled"))),o=!!(void 0!==i.eq(j).attr("selected")&&"false"!==i.eq(j).attr("selected")||void 0!==i.eq(j).attr(f("selected"))&&"false"!==i.eq(j).attr(f("selected")));e=d.option(l,m,n,o),g?A(e):a.optionAdd(e)}}function m(){if($[0]){var a;a=$[0].getContent().position().top,N.move(0,a,0)}}function n(){var a=Z.length,b=X.length,d=0;return d=2.5*a+2*b,d=d>H?H:d,R.css("height",(0===d?2:d)+"em"),N.recountPosition(),c["public"]}function o(a){return b.type.isString(a)?(g(a),c["public"]):I}function p(a){return b.type.isString(a)?(j(a),c["public"]):L}function q(a){return void 0!==a?(e(a),c["public"]):K}function r(a){var b,d;if(void 0!==a){if(a=!!a,a!==J){if(J=a,d=$.length,d>1&&!J)for(b=0;b<d-1;b++)$[0].selected(0),$.splice(0,1);d>0&&(J?T.html("1个项目"):T.html($[0].label())),_.change.call(c["public"],w())}return c["public"]}return J}function s(){return W||(W=!0,Q.addClass("on").focus(),n(),M&&m(),_.open.call(c["public"])),c["public"]}function t(){return W&&(W=!1,Q.removeClass("on"),_.close.call(c["public"])),c["public"]}function u(){return W?t():s(),c["public"]}function v(){return N.getContent()}function w(d){var e,f=[];if(void 0!==d){if(!b.type.isArray(d))return w(a.argsToArray(arguments));for(d=d.map(function(a){return null===a?a:String(a)}),e=$.length-1;e>=0;e--)x($[e],!1);for(e=0;e<Z.length;e++)Z[e].disabled()||Z[e].group&&(!Z[e].group||Z[e].group.disabled())||d.indexOf(Z[e].val())===-1||x(Z[e]);return c["public"]}for(e=0;e<$.length;e++)f.push($[e].val());return V.val(f.join(",")),J?f:f[0]?f[0]:null}function x(a,b){var d,e=void 0!==b;if(a&&a.type&&a.type===i){if(d=Z.indexOf(a),d===-1)return c["public"];if(d=$.indexOf(a),J){if(e&&(b&&d>-1||!b&&d===-1))return c["public"];(!e||e&&!b)&&d>-1?(a.selected(0),$.splice(d,1)):(!e||e&&b)&&d===-1&&(a.selected(1),$.push(a)),0===$.length?T.removeAttr(f("value")).html(I):T.attr(f("value"),!0).html($.length+"个项目")}else{if(d>-1&&(!e||e&&b)||d===-1&&e&&!b)return c["public"];$[0]&&($[0].selected(0),$.splice(0,1)),d>-1&&e&&!b?T.removeAttr(f("value")).html(I):(a.selected(1),$.push(a),T.attr(f("value"),!0).html(a.label()))}return _.change.call(c["public"],w()),c["public"]}return $}function y(a){var b,d;if(a&&a.type===h&&!a.select&&(a.select=c["public"],X.push(a),N.getContent().append(a.getContent()),d=a.options.length,0!==d))for(b=0;b<d;b++)a.options[b].selectIn(c["public"]);return c["public"]}function z(a){var b,d;if(a&&a.type===h&&a.select===c["public"]){if(d=a.options.length,d>0)for(b=0;b<d;b++)a.options[b].selected()&&(x(a.options[b],!1),a.options[b].selected(1)),Z.splice(Z.indexOf(a.options[b]),1),a.options[b].select=null;X.splice(X.indexOf(a),1),a.select=null,a.getContent().detach()}return c["public"]}function A(a){var b;return a&&a.type===i&&!a.select&&(a.group?(a.select=c["public"],Z.push(a)):(a.select=c["public"],Z.push(a),Y.push(a),b=Y.length,1===b?N.getContent().prepend(a.getContent()):Y[b-2].getContent().after(a.getContent())),a.selected()&&x(a)),c["public"]}function B(a){return a&&a.type===i&&a.select===c["public"]&&(a.group||Y.splice(Y.indexOf(a),1),a.selected()&&(x(a,!1),a.selected(1)),Z.splice(Z.indexOf(a),1),a.select=null,a.getContent().detach(),a.group&&a.groupOut()),c["public"]}function C(a){return _.open=a,c["public"]}function D(a){return _.close=a,c["public"]}function E(a){return _.change=a,c["public"]}function F(){b.event(S).setTap(u),U.on(a.an.event[17],s)}function G(){b.extend(c["public"],{getContent:v,placeholder:o,emptyText:p,direction:q,multiple:r,groups:X,options:Z,optionsByValue:$,optionsDefault:Y,groupAdd:y,groupRemove:z,optionAdd:A,optionRemove:B,val:w,valOption:x,open:s,close:t,toggle:u,setOpen:C,setClose:D,setChange:E})}var H,I,J,K,L,M,N,O=(c.getOptions(["maxheight","placeholder",["multiple","isMultiple"],"dir","emptyText",["moveSelected","isMoveSelected"]],function(b){H=parseInt(b.maxheight),(isNaN(H)||0===H)&&(H=20),I=b.placeholder||"请选择以下项目",J=a.boolCheck(b.multiple,!1),L=b.emptyText||"当前列表未包含任何项",M=a.boolCheck(b.moveSelected,!1),K=b.dir}),'<div class="'+f("put")+'"><a class="'+f("btn")+'" /><i class="ud2-ctrl-arrow" /></div><div class="'+f("list")+'" /><input type="checkbox" /><input type="hidden" />'),P=c.current,Q=P.html(O),R=Q.children("div:last"),S=Q.children("div:first"),T=S.children("a"),U=Q.children('[type="checkbox"]'),V=Q.children('[type="hidden"]'),W=!1,X=[],Y=[],Z=[],$=[],_={open:a.noop,close:a.noop,change:a.noop};return function(){c.origin.length&&(c.origin.after(Q),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:U,attrReg:"tabindex"}),c.transferAttrs({accept:V,attrReg:"name"})),e(K),g(I),N=b.scroll(R,{barState:0,isScrollMode:!0,barColor:"rgba(0,0,0,.2)",barColorOn:"rgba(0,0,0,.4)"}),v().attr(f("empty"),L),c.autoClose=t,F(),G(),k()}(),c["public"]}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("number",function(c,d){var e=c.className,f=a.className(e);c.init=function(c){function d(a){return a=parseFloat(a),(isNaN(a)||a<o)&&(a=o),a>p&&(a=p),a=Math.round((a-o)/m)*m+o,a=parseFloat(a.toFixed(n)),a>p&&(a-=m),a}function e(b){if(!z){if(z=!0,b&&q+m>p||!b&&q-m<o)return void(z=!1);var c='<input class="ud2-ctrl-textbox" />',d=a.jqe[0].clone().addClass(f("view")).html(c),e=a.jqe[0].clone().addClass(f("view")).html(c);v.parent();q=b?parseFloat((q+m).toFixed(n)):parseFloat((q-m).toFixed(n)),d.children().val(q),e.children().val(q),v.before(d),v.after(e),y.animate({top:b?"-100%":"100%"},300,function(){z=!1,i(q),y.css("top",0),d.remove(),e.remove()})}}function g(){e(0)}function h(){e(1)}function i(a){void 0!==a?(q=d(a),A.change.call(c["public"],q)):q=d(q),v.val(q)}function j(a){return void 0!==a?(i(a),c["public"]):q}function k(a){return A.change=a,c["public"]}function l(){b.event(w).setTap(g),b.event(x).setTap(h),r=b.eventKeyShortcut({autoOn:!1}).add(b.key.UP,g).add(b.key.DOWN,h).add(b.key.ENTER,function(){v.blur()}),v.on(a.an.event[17],function(){r.on(),u.addClass("on")}).blur(function(){r.off(),i(v.val()),u.removeClass("on")})}var m,n,o,p,q,r,s=(c.getOptions(["step","min","max","value"],function(a){m=parseFloat(a.step),(isNaN(m)||0===m)&&(m=1),o=parseFloat(a.min),isNaN(o)&&(o=0),p=parseFloat(a.max),isNaN(p)&&(p=100),q=a.value,o>p&&(p=o),q=d(q),n=m.toString().indexOf(".")>-1?m.toString().split(".")[1].length:0}),'<a class="'+f("ico")+' ud2-ctrl-ico">&#xe106;</a><div class="'+f("move")+'"><input type="text" value="0" class="ud2-ctrl-textbox" /></div><a class="'+f("ico")+' ud2-ctrl-ico">&#xe107;</a>'),t=c.current,u=t.html(s),v=u.find("input"),w=u.children("a:first"),x=u.children("a:last"),y=w.next(),z=!1,A={change:a.noop};return function(){c.origin.length&&(c.origin.after(u),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:v,attrReg:"name|tabindex"})),i(),l()}(),b.extend(c["public"],{val:j,setChange:k})}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("range",function(c,d){var e=c.className,f=a.className(e);c.init=function(c){function d(a){var b=null,c=null;return a=void 0!==a?(""+a).split(","):[0,0],b=parseFloat(a[0])||0,c=parseFloat(a[1])||0,[b,c]}function e(){R.nl=i(E),z&&(R.nr=i(F))}function g(){R.w=O.outerWidth(),R.bw=N.width(),R.max=R.bw-R.w}function h(a){return a*R.max/R.bw*100}function i(a){var b=(a-C)/(D-C);return b}function j(a,b){var d,e,f,g,j,k,l;a<C&&(a=C),a>D&&(a=D),E=Math.round((a-C)/A)*A+C,E=parseFloat(E.toFixed(B)),E>D&&(E-=A),d=i(E),O.css("left",h(d)+"%"),z?(b<C&&(b=C),b>D&&(b=D),F=Math.round((b-C)/A)*A+C,F=parseFloat(F.toFixed(B)),F>D&&(F-=A),e=i(F),P.css({left:h(e)+"%"}),f=Math.min(d,e),g=Math.max(d,e),j=Math.min(E,F),k=Math.max(E,F),O.css("z-index",E+1e4),P.css("z-index",F+1e4),Q.css({left:100*f+"%",width:100*(g-f)+"%"}),L.val(j+","+k),l=[j,k]):(Q.css("width",100*d+"%"),L.val(E),l=E),T.change.call(c["public"],l)}function k(){return S||(g(),H.both?j(E,F):j(E),e(),S=!0,K.addClass("on"),M.addClass(a.prefix+"ctrl-power-on"),G.on(),T.open.call(c["public"])),c["public"]}function l(){return S&&(S=!1,K.removeClass("on"),M.removeClass(a.prefix+"ctrl-power-on"),G.off(),T.close.call(c["public"])),c["public"]}function m(){return S?l():k(),c["public"]}function n(a,e){if(void 0!==a)return a=d(void 0!==e?[a,e].join(","):b.type.isArray(a)?a.join(","):a),j(a[0],a[1]),c["public"];if(z){var f=Math.min(E,F),g=Math.max(E,F);return[f,g]}return E}function o(a){return T.open=a,c["public"]}function p(a){return T.close=a,c["public"]}function q(a){return T.change=a,c["public"]}function r(a,b){var c=a*R.max+b,d=null;return c<0&&(c=0),c>R.max&&(c=R.max),d=parseFloat(((D-C)*c/R.max+C).toFixed(B)),d=isNaN(d)?C:d}function s(a){H.both?j(r(R.nl,a.x),F):j(r(R.nl,a.x))}function t(){R.nl=i(E)}function u(a){j(E,r(R.nr,a.x))}function v(){R.nr=i(F)}function w(){k()}function x(){var a=d(L.val());g(),j(a[0],a[1]),e()}function y(){b.event(M).setTap(m),b.event(O,{stopPropagation:!0}).setDown(g).setPan(s).setUp(t),b.event(P,{stopPropagation:!0}).setDown(g).setPan(u).setUp(v),G=b.eventKeyShortcut({autoOn:!1}).add(b.key.ENTER,function(){L.blur()}),b.callbacks.pageResize.add(function(){g(),j(E,F)}),L.on("focus",w).on("blur",x)}var z,A,B,C,D,E,F,G,H=c.getOptions([["both","isBoth"],"min","max","value","step"],function(b){var c;A=parseFloat(b.step),(isNaN(A)||0===A)&&(A=1),C=parseFloat(b.min),isNaN(C)&&(C=0),D=parseFloat(b.max),isNaN(D)&&(D=100),c=d(b.value),E=c[0],F=c[1],z=a.boolCheck(b.both,!1),C>D&&(D=C),B=A.toString().indexOf(".")>-1?A.toString().split(".")[1].length:0}),I='<input type="text" maxlength="20" class="ud2-ctrl-textbox" /><div class="ud2-ctrl-power"><i class="ico ico-range-x"></i><i class="ico ico-solid-cancel"></i></div><div class="'+f("list")+'"><div class="'+f("end")+'" /><div class="'+f("back")+'" /></div>',J=c.current,K=J.html(I),L=K.children("input"),M=L.next(),N=M.next(),O=a.jqe[2].clone().addClass(f("hand")),P=O.clone(),Q=N.find(f("back",1)),R={max:0,bw:0,w:0,nl:0,nr:0},S=!1,T={open:a.noop,close:a.noop,change:a.noop};return function(){Q.after(O),z&&Q.after(P),c.origin.length&&(c.origin.after(K),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:L,attrReg:"name|tabindex"})),c.autoClose=l,e(),g(),j(E,F),y()}(),b.extend(c["public"],{val:n,open:k,close:l,toggle:m,setOpen:o,setClose:p,setChange:q})}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("date",function(c,d){var e=c.className,f=a.className(e),g=["上一年","下一年","上个月","下个月","前12年","后12年","年份选择","返回日期选择"],h=["日","一","二","三","四","五","六"],i=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],j=[31,28,31,30,31,30,31,31,30,31,30,31],k=b.time();c.init=function(c){function d(a){var b,c,d,e=function(a){var b=C.replace(/([\\\^\$\*\+\?\{\}\(\)\.\-\=\[\]])/g,"\\$1").replace(/[Yy]{4}/,0===a?"([0-9]{4})":"[0-9]{4}").replace(/[Yy]{2}/,1===a?"([0-9]{2})":"[0-9]{2}").replace(/[Mm]{2}/,2===a?"(0[1-9]|[1][012])":"(?:0[1-9]|[1][012])").replace(/[Mm]/,3===a?"(1[012]|[1-9])":"(?:1[012]|[1-9])").replace(/[Dd]{2}/,4===a?"(0[1-9]|[12][0-9]|3[01])":"(?:0[1-9]|[12][0-9]|3[01])").replace(/[Dd]/,5===a?"([12][0-9]|3[01]|[1-9])":"(?:[12][0-9]|3[01]|[1-9])");return new RegExp(b)},f=function(b){var c;return c=e(2*b).exec(a),c=c&&c[1],c||(c=e(2*b+1).exec(a),c=c&&c[1]),parseInt(c)};if(a){if(e().test(a))b=f(0)||F.now.getFullYear(),c=f(1)||1,d=f(2)||1,b<100&&(b+=2e3);else{var g=new Date(a);isNaN(g)?(b=F.now.getFullYear(),c=F.now.getMonth()+1,d=F.now.getDate()):(b=g.getFullYear(),c=g.getMonth()+1,d=g.getDate())}F.setDateValue(b,c-1,d),F.selectReset()}else F.setDateValue(),F.selectReset()}function e(){var a=I.find(f("tools a",1));l(),b.event(a.eq(0)).setTap(function(){F.select.setFullYear(F.select.getFullYear()-1),l()}),b.event(a.eq(3)).setTap(function(){F.select.setFullYear(F.select.getFullYear()+1),l()}),b.event(a.eq(1)).setTap(function(){F.select.setMonth(F.select.getMonth()-1),l()}),b.event(a.eq(2)).setTap(function(){F.select.setMonth(F.select.getMonth()+1),l()}),b.event(O).setTap(function(){M.slideUp(300),N.slideDown(300),n()}),b.event(Q).setTap(function(){F.setDateValue(F.now.getFullYear(),F.now.getMonth(),F.now.getDate()),F.selectReset(),t(1)}),b.event(R).setTap(function(){F.setDateValue(),F.selectReset(),t(1)})}function l(){var a,c,d,e=M.children("table"),g=M.find(f("tools-text",1)),i=[],k=F.select.getFullYear()%4===0,l=F.select.getMonth()-1<0?11:F.select.getMonth()-1,m=j[F.select.getMonth()],n=j[l],o=new Date(F.select.getFullYear(),F.select.getMonth(),1).getDay();g.html(F.select.getFullYear()+" 年 "+(F.select.getMonth()+1)+" 月"),k&&1===F.select.getMonth()&&(m=29),k&&2===F.select.getMonth()&&(n=29),i.push("<tr>");for(a in h)i.push("<th>"+h[a]+"</th>");for(i.push("</tr><tr>"),a=0,c=-1,d=0;a<42;a++)a<o?(c++,i.push('<td class="',f("nomonth"),'">',n-o+a+1,"</td>")):a-c<=m?i.push('<td class="',(a+1)%7===0||(a+1)%7===1?f("weekend"):"",'" ',f("date"),'="',a-c,'" ',F.select.getFullYear()===F.now.getFullYear()&&F.select.getMonth()===F.now.getMonth()&&F.now.getDate()===a-c?f("today "):"",F.value&&F.select.getFullYear()===F.value.getFullYear()&&F.select.getMonth()===F.value.getMonth()&&F.value.getDate()===a-c?f("now "):"",">",a-c,"</td>"):(d++,i.push('<td class="',f("nomonth"),'">',d,"</td>")),(a+1)%7===0&&i.push("</tr><tr>");e.children().remove(),e.append(i.join("")),b.event(e.find("["+f("date")+"]")).setTap(function(){F.setDateValue(F.select.getFullYear(),F.select.getMonth(),this.attr(f("date"))),K.blur(),t(1)})}function m(){var a=N.find(f("tools a",1)),c=N.find(f("btns button",1));n(),b.event(a.eq(0)).setTap(function(){F.select.setFullYear(F.select.getFullYear()-12),n()}),b.event(a.eq(1)).setTap(function(){F.select.setFullYear(F.select.getFullYear()+12),n()}),b.event(c.eq(0)).setTap(function(){M.slideDown(300),N.slideUp(300),l()}),b.event(P).setTap(function(){M.slideDown(300),N.slideUp(300),l()})}function n(){var a,c=N.children("table"),d=[],e=0,g=f("year"),h="["+g+"]",j=f("month"),k="["+j+"]",l=f("now");for(e=F.select.getFullYear()%12===0?F.select.getFullYear()-11:12*parseInt(F.select.getFullYear()/12)+1,d.push("<tr><td>"),a=0;a<12;a++)d.push("<div ",f("year"),'="',e+a,'" ',F.select.getFullYear()===e+a?l:"",">",e+a,"</div>");for(d.push("</td><td>"),a=0;a<12;a++)d.push("<div ",f("month"),'="',a,'" ',F.select.getMonth()===a?l:"",">",i[a],"</div>");d.push("</td></tr>"),c.children().remove(),c.append(d.join("")),b.event(c.find(h)).setTap(function(){F.select.setFullYear(this.attr(g)),c.find(h).removeAttr(l),this.attr(l,"")}),b.event(c.find(k)).setTap(function(){F.select.setMonth(this.attr(j)),c.find(k).removeAttr(l),this.attr(l,"")})}function o(a){B=a,K.attr("placeholder",B)}function p(a){C=a,F.setDateValue(F.value)}function q(a){return type.isString(a)?(o(a),c["public"]):B}function r(a){return type.isString(a)?(p(a),c["public"]):C}function s(){return S||(S=!0,I.addClass("on"),L.addClass(a.prefix+"ctrl-power-on"),M.show(),N.hide(),E.on(),z(a.win().width()),T.open.call(c["public"])),c["public"]}function t(b){var e;return S&&(S=!1,I.removeClass("on"),L.removeClass(a.prefix+"ctrl-power-on"),b||(e=K.val(),""===e?d():d(e)),l(),E.off(),T.close.call(c["public"])),c["public"]}function u(){return S?t():s(),c["public"]}function v(a){return void 0!==a?(d(a),c["public"]):D}function w(a){return T.open=a,c["public"]}function x(a){return T.close=a,c["public"]}function y(a){return T.change=a,c["public"]}function z(a){var b,c;S&&(J.css("left",-1),c=parseInt(J.offset().left)+parseInt(J.outerWidth())-1,b=a-c-2,J.css("left",b<-1?b:-1))}function A(){b.event(L).setTap(u),E=b.eventKeyShortcut({autoOn:!1}).add(b.key.ENTER,function(){K.blur(),t()}).add(b.key.LEFT,function(){null!==F.value&&d(F.value.setDate(F.value.getDate()-1))}).add(b.key.RIGHT,function(){null!==F.value&&d(F.value.setDate(F.value.getDate()+1))}).add(b.key.UP,function(){null!==F.value&&d(F.value.setDate(F.value.getDate()-7))}).add(b.key.DOWN,function(){null!==F.value&&d(F.value.setDate(F.value.getDate()+7))}),K.on("focus",s),b.callbacks.pageResize.add(z)}var B,C,D,E,F=(c.getOptions(["placeholder","format","value"],function(a){B=a.placeholder||"请选择日期",C=a.format||"yyyy/MM/dd",D=a.value||null}),{seats:function(a){return(1===a.toString().length?"0":"")+a},toString:function(){var a=C.replace(/[Yy]{4}/,this.value.getFullYear()).replace(/[Yy]{2}/,this.value.getFullYear()-2e3).replace(/[Mm]{2}/,this.seats(this.value.getMonth()+1)).replace(/[Mm]/,this.value.getMonth()+1).replace(/[Dd]{2}/,this.seats(this.value.getDate())).replace(/[Dd]/,this.value.getDate());return a},setDateValue:function(a,b,d){var e=D;a instanceof Date?(this.value=new Date(a.getTime()),D=this.toString()):3===arguments.length?(this.value=new Date(a,b,d),D=this.toString()):(this.value=null,D=""),K.val(D),e!==D&&T.change.call(c["public"],D)},selectReset:function(){this.select=new Date(this.value?this.value.getTime():this.now.getTime()),l()},now:new Date(k.valueOf()),select:new Date(k.valueOf()),value:null}),G='<input type="text" placeholder="'+B+'" maxlength="20" class="ud2-ctrl-textbox" /><span class="ud2-ctrl-power"><i class="ico ico-calendar" /><i class="ico ico-solid-cancel" /></span><div class="'+f("list")+'"><div class="'+f("datelist")+'"><div class="'+f("tools")+'"><div class="'+f("tools-left")+'"><a class="ico" title="'+g[0]+'">&#xec00;</a><a class="ico" title="'+g[2]+'">&#xec01;</a></div><div class="'+f("tools-right")+'"><a class="ico" title="'+g[3]+'">&#xec02;</a><a class="ico" title="'+g[1]+'">&#xec03;</a></div><div class="'+f("tools-text")+'" title="'+g[6]+'">- 年 - 月</div></div><table /><div class="'+f("btns")+'"><button class="btn sm" tabindex="-1">今日</button> <button class="btn sm" tabindex="-1">清空</button></div></div><div class="'+f("ymlist")+'"><div class="'+f("tools")+'"><div class="'+f("tools-left")+'"><a class="ico" title="'+g[4]+'">&#xec00;</a></div><div class="'+f("tools-right")+'"><a class="ico" title="'+g[5]+'">&#xec03;</a></div><div class="'+f("tools-text")+'" title="'+g[7]+'">年份 / 月份</div></div><table /><div class="'+f("btns")+'"><button class="btn sm" tabindex="-1">确定</button></div></div></div>',H=c.current,I=H.html(G),J=I.children(f("list",1)),K=I.children("input"),L=K.next(),M=I.find(f("datelist",1)),N=I.find(f("ymlist",1)),O=I.find(f("tools-text",1)),P=N.find(f("tools-text",1)),Q=M.find(f("btns button:eq(0)",1)),R=M.find(f("btns button:eq(1)",1)),S=!1,T={open:$.noop,close:$.noop,change:$.noop};return function(){c.origin.length&&(c.origin.after(I),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:K,attrReg:"name|tabindex"})),c.autoClose=t,d(D),e(),m(),A()}(),b.extend(c["public"],{placeholder:q,format:r,val:v,open:s,close:t,toggle:u,setOpen:w,setClose:x,setChange:y})}})}),ud2.libExtend(function(a,b){"use strict";a.controlCreater("file",function(c,d){var e=c.className,f=a.className(e),g="length-error",h="type-error",i="size-error",j="repeat-error",k="server-error",l="server-return-error",m="simple",n="standard",o="custom",p=a.createStyle(m,n,o);c.init=function(c){function e(a){for(var b,c=0,d=a.length;c<d;c++)if(b=a[c].name.split("."),b=b[b.length-1].toLowerCase(),!b||void 0===V[b])return!1;return!0}function f(a){var b=0,d=a.length;if(d+ba.length>R)ha.error.call(c["public"],g);else if(e(a)){for(var f=[],k=[],l=0;b<d;b++)a[b].size>1024*S?f.push(a[b].name):ba.some(function(c){return c.name===a[b].name&&c.size===a[b].size})?k.push(a[b].name):(ba.push(a[b]),ga.add(a[b]),l++);k.length>0&&ha.error.call(c["public"],j,k),f.length>0&&ha.error.call(c["public"],i,f)}else ha.error.call(c["public"],h)}function m(a){var b=new FormData,d=W;b.append("file",a),T&&(d+="?name="+a.newname+"&tick="+(new Date).getTime()),$.ajax({type:"POST",url:d,data:b,contentType:!1,processData:!1,xhr:function(){var b=$.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(b){var c=parseInt(b.loaded/b.total*100);ga.progress(a,c)},!1),b}}).done(function(b){var d;q(),d=ha.done.call(c["public"],b,a),void 0===d&&(d=!0),d||(r(),ha.error.call(ctrl["public"],l,a.name)),ga.done(d,a),v()===ba.length&&(ca=2,ha.complete.call(c["public"]))}).fail(function(b){q(),r(),ha.fail.call(c["public"],b,a),ga.fail(a),ha.error.call(ctrl["public"],k,a.name),v()===ba.length&&(ca=2,ha.complete.call(c["public"]))})}function q(){da++}function r(){ea++}function s(){return _}function t(){return{state:T,length:U}}function u(){return ba}function v(){return da}function w(){return ea}function x(){return ca}function y(c){return c=a.convertToJQ(c),b.event(c,{stopPropagation:!0}).setTap(function(){0===ca&&aa.trigger("click")}),fa}function z(c,d){return c=a.convertToJQ(c),b.event(c,{stopPropagation:!0}).setTap(function(){0===ca&&ga.remove.call(this,d)}),fa}function A(c){return c=a.convertToJQ(c),b.event(c,{stopPropagation:!0}).setTap(function(){var a,b,c;if(0===ca&&0!==ba.length){for(ca=1,a=new FormData,b=0,c=ba.length;b<c;b++)m(ba[b]);ga.upload.call(this)}}),fa}function B(c){return c=a.convertToJQ(c),b.event(c,{stopPropagation:!0}).setTap(function(){0===ca&&(ba.length=0,ga.clear.call(this))}),fa}function C(a){return ga.add=a,fa}function D(a){return ga.remove=a,fa}function E(a){return ga.upload=a,fa}function F(a){return ga.clear=a,fa}function G(a){return ga.progress=a,fa}function H(a){return ga.done=a,fa}function I(a){return ga.fail=a,fa}function J(a){return ha.error=a,c["public"]}function K(a){return ha.complete=a,c["public"]}function L(a){return ha.done=a,c["public"]}function M(a){return ha.fail=a,c["public"]}function N(){f(this.files),O()}function O(){var a;""!==aa.val()&&("form"!==aa.parent().get(0).nodeName.toLowerCase()&&(a=$("<form />"),aa.wrap(a)),a=aa.parent(),a.get(0).reset())}function P(){aa.on("change",N)}function Q(){b.extend(c["public"],{style:b.extend(fa,{filesHandler:f,fileAddBtn:y,fileRemoveBtn:z,uploadBtn:A,clearBtn:B,fileAddFn:C,fileRemoveFn:D,uploadFn:E,clearFn:F,progressFn:G,doneFn:H,failFn:I}),getContent:s,getUpState:x,getRenameState:t,getUpfiles:u,getDoneNum:v,getErrorNum:w,setError:J,setComplete:K,setDone:L,setFail:M})}var R,S,T,U,V,W,X,Y=(c.getOptions(["maxlength","maxsize",["rename","isRename"],"renamLength","urlUpload","filter","style"],function(b){var c,d,e="(png|jpg|gif|bmp|svg|ico|html|js|cs|vb|css|less|scss|sass|mp3|mp4|wav|avi|ogg|mov|wmv|webm|flv|swf|txt|pdf|doc|docx|xls|xlsx|ppt|pptx|ett|wpt|dpt|rar|zip|iso)",f=new RegExp("^("+e+",)*"+e+"$");for(R=parseInt(b.maxlength)||20,S=parseInt(b.maxsize)||2048,T=a.boolCheck(b.rename,!0),U=parseInt(b.renameLength)||50,V=b.filter||"",V=f.test(V)?V:"gif,jpg,png",V="all"===V?f.split("|"):V.split(","),d=V.length,c=0;c<d;c++)V[V[c]]=V[c];W=b.urlUpload||"",X=b.style,p[X]||(X=o)}),'<input type="file" multiple />'),Z=c.current,_=Z.html(Y),aa=_.children("input"),ba=[],ca=0,da=0,ea=0,fa={},ga={add:$.noop,remove:$.noop,upload:$.noop,clear:$.noop,progress:$.noop,done:$.noop,fail:$.noop},ha={error:function(a,c){switch(a){case g:b.message.danger("您选择的文件数量已经超过最大个数限制，该限制为 "+R+" 个");break;case h:b.message.danger("您选择的文件类型不符合要求，请您重新选择文件");break;case i:b.message.danger("您选择的文件超出 "+S+"KB 限制，尺寸不符的文件："+c.join("、"));break;case j:b.message.warning("您选择的文件已存在于列表中，重复的文件："+c.join("、"));break;case k:b.message.danger("您的文件 "+c+" 已被阻止，请检查您的文件");break;case l:b.message.danger("文件 "+c+" 被服务器退回，请检查您的文件是否符合要求")}},complete:$.noop,done:$.noop,fail:$.fail};return function(){if(c.origin.length&&(c.origin.after(_),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:aa,attrReg:"name|tabindex"})),P(),Q(),X===n)return d.standard(c["public"])}(),c["public"]},d.style=p,d.standard=function(c){function e(b){var c,d=$('<div class="'+f("full-figure")+'"><div class="'+f("full-img")+'"><img ondragstart="return false;" /></div>'+(v.state?'<div class="'+f("full-rename")+'"><input type="text" value="'+b.name.substring(0,v.length)+'" maxlength="'+v.length+'" /></div>':"<div>"+b.name+"</div>")+'<div class="'+f("full-close")+'"></div><div class="'+f("full-progress")+'"></div></div>'),e=d.find("input"),g=d.children(f("full-close",1));1===w.length&&(p.fadeOut(200),r.fadeIn(200),s.fadeIn(200)),/^image\/(png|jpeg|gif|bmp|svg)/.test(b.type)?(c=new FileReader,c.readAsDataURL(b),c.addEventListener("loadend",function(){d.find("img").attr("src",c.result)})):(d.find("img").attr("src","data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEzOCAxMTgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzOCAxMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnB7ZmlsbDojZmZmO30NCjwvc3R5bGU+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik05MS42LDQzLjJjLTEuMi0xLjctMy0zLjctNC45LTUuNmMtMS45LTEuOS0zLjktMy42LTUuNi00LjljLTIuOS0yLjEtNC4zLTIuNC01LjEtMi40SDQ4LjUNCgkJYy0yLjUsMC00LjUsMi00LjUsNC41djQ4LjJjMCwyLjUsMiw0LjUsNC41LDQuNWg0MS4xYzIuNSwwLDQuNS0yLDQuNS00LjVWNDguM0M5NCw0Ny41LDkzLjgsNDYuMSw5MS42LDQzLjJ6IE04NC4zLDQwLjINCgkJYzEuNywxLjcsMy4xLDMuMyw0LjEsNC41aC04LjZ2LTguNkM4MSwzNy4xLDgyLjUsMzguNSw4NC4zLDQwLjJMODQuMyw0MC4yeiBNOTAuNCw4My4xYzAsMC41LTAuNCwwLjktMC45LDAuOUg0OC41DQoJCWMtMC41LDAtMC45LTAuNC0wLjktMC45VjM0LjljMC0wLjUsMC40LTAuOSwwLjktMC45YzAsMCwyNy43LDAsMjcuNywwdjEyLjVjMCwxLDAuOCwxLjgsMS44LDEuOGgxMi41VjgzLjF6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDc2LjloLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw3Ni4xLDgyLjUsNzYuOSw4MS41LDc2Ljl6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDY5LjdoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2OC45LDgyLjUsNjkuNyw4MS41LDY5Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDYyLjZoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2MS44LDgyLjUsNjIuNiw4MS41LDYyLjZ6Ii8+DQo8L3N2Zz4="),d.find("img").css("background","#3f99d5")),d.data("file",b),b.element=d,x.fileRemoveBtn(g,b),v.state&&(b.newname=b.name,e.on(a.an.event[20],function(a){a.preventDefault(),$(this).select()}).on(a.an.event[18],function(){b.newname=$(this).val()})),u.before(d),window.setTimeout(function(){d.addClass(f("full-figure-on"))},150)}function g(a){var b=w.indexOf(a);w.splice(b,1),a.element.removeClass(f("full-figure-on")),window.setTimeout(function(){a.element.remove()},100),0===w.length&&(p.show(),r.hide(),s.hide())}function h(){r.children().not("["+f("add")+"]").remove(),p.show(),r.hide(),s.hide()}function i(a,b){var c=a.element.find(f("full-progress",1));c.css("width",b+"%"),c.html(b+"%")}function j(a){r.find("["+f("add")+"]").hide(),r.find(f("full-close",1)).hide(),r.find(f("full-figure input")).attr("readonly","readonly"),s.html("文件开始上传...")}function k(a,b){a?b.element.addClass("success"):b.element.addClass("fail"),m()}function l(){file.element.addClass("fail"),m()}function m(){c.getDoneNum()===w.length?s.html('<span class="c-success">全部文件已上传完毕，共 '+c.getDoneNum()+" 个"+(0!==c.getErrorNum()?"，失败 "+c.getErrorNum()+" 个":"")+"</span>"):s.html("已上传文件 "+c.getDoneNum()+" 个"+(0!==c.getErrorNum()?"，失败 "+c.getErrorNum()+" 个":""))}function n(){o.on("dragenter",function(){0===c.getUpState()&&o.addClass("ud2-file-full-dragenter")}),q.on("dragleave",function(){0===c.getUpState()&&o.removeClass("ud2-file-full-dragenter")}).on("dragover",function(a){0===c.getUpState()&&(a.preventDefault(),o.addClass("ud2-file-full-dragenter"))}).on("drop",function(a){if(0===c.getUpState()){a.preventDefault(),a=a.originalEvent;var b=a.dataTransfer&&a.dataTransfer.files||a.target&&a.target.files;x.filesHandler(b),o.removeClass("ud2-file-full-dragenter")}})}var o,p,q,r,s,t,u,v,w,x,y=c&&c.ud2&&"file"===c.type?c:b.file.create.apply(d,arguments);return function(){x=y.style,v=y.getRenameState(),w=y.getUpfiles(),o=a.jqe[0].clone().addClass(f("full")),p=$('<div class="'+f("full-nofile")+'"><button class="btn btn-solid c-blue" ud2-file-add><i class="ico ico-group-file"></i> 添加文件</button><em>拖拽文件上传 / 长按CTRL键可多选上传</em></div>'),q=$('<div class="'+f("full-drag")+'">请松开鼠标按钮，文件将进入待上传队列</div>'),r=$('<div class="'+f("full-list")+'"><div class="'+f("full-add")+'" ud2-file-add><div><i class="ico ico-hollow-plus"></i><em>继续添加文件</em></div></div></div>'),s=$('<div class="'+f("full-tools")+'"><button class="btn btn-solid">确定上传</button><button class="btn btn-solid">清空列表</button></div>'),o.append(r).append(p).append(q).append(s),t=o.find("["+f("add")+"]"),u=r.find("["+f("add")+"]"),y.getContent().append(o),x.fileAddBtn(t).uploadBtn(s.children().eq(0)).clearBtn(s.children().eq(1)).fileAddFn(e).fileRemoveFn(g).clearFn(h).progressFn(i).uploadFn(j).doneFn(k).failFn(l),n()}(),delete y.style,y}})});
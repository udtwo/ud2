/*! ud2 - v1.0.11
 * (c) 2018 Peak(peak@udtwo.com) */

if("undefined"==typeof jQuery)throw new Error("ud2库需要JQuery支持");!function(e,L){"use strict";var t,n,o,i,a,r=e.document,l=L(e),D=L(r),c="ud2",N=c+"-",s={},u={},d={date:/^(?:[12]\d{3}([\.\-\/])(?:(?:0?[13578]|1[02])\1(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\1(?:0?[1-9]|[12]\d|30)|0?2\1(?:0?[1-9]|1\d|2[0-8]))$|[12]\d(?:[02468][048]|[13579][26])([\.\-\/])(?:(?:0?[13578]|1[02])\2(?:0?[1-9]|[12]\d|3[01])|(?:0?[469]|11)\2(?:0?[1-9]|[12]\d|30)|0?2\2(?:0?[1-9]|1\d|2[0-9])))$/,mail:/^([\w-\.]+)@(([\w-]+\.)+)([a-zA-Z]{2,4})$/,phone:/^[1][34578][0-9]{9}$/,idCard:/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|97|98|99)[0-9]{4}((?:19|20)?(?:[0-9]{2}(?:(?:0[13578]|1[12])(?:0[1-9]|[12][0-9]|3[01])|(?:0[469]|11)(?:0[1-9]|[12][0-9]|30)|02(?:0[1-9]|1[0-9]|2[0-8]))|(?:[02468][048]|[13579][26])0229)[0-9]{3}[\dxX])$/,loginName:/^[a-zA-Z][a-zA-Z0-9]+$/,percent:/^(100|([0-9]|[1-9][0-9])(\.[0-9]+)?)%$/,nonNegative:/^([0-9]|[1-9][0-9]+)(\.[0-9]+)?$/,naturalNumber:/^([1-9]\d+|[0-9])$/},p={isType:function(t){return function(e){return{}.toString.call(e)==="[object "+t+"]"}},isObject:function(e){return p.isType("Object")(e)},isFunction:function(e){return p.isType("Function")(e)},isString:function(e){return p.isType("String")(e)},isBoolean:function(e){return p.isType("Boolean")(e)},isNumber:function(e){return p.isType("Number")(e)},isNaturalNumber:function(e){return d.naturalNumber.test(e)},isJQuery:function(e){return e instanceof L},isArray:function(e){return Array.isArray(e)},isDatetime:function(e){return e instanceof Date}},j=(i=r.createElement("div"),{ipad:!!(a=e.navigator.userAgent).match(/ipad/i),iphone:!!a.match(/iphone/i),ipod:!!a.match(/ipod/i),mac:!!a.match(/macintosh/i),apple:!!a.match(/(ipad|iphone|ipod|macintosh)/i),android:-1<a.indexOf("Android"),mobile:!!a.match(/mobile|mobi|mini/i),touch:"ontouchstart"in e||e.DocumentTouch&&r instanceof DocumentTouch,pointer:e.navigator.pointerEnabled,msPointer:e.navigator.msPointerEnabled,touchAction:void 0!==i.style.touchAction||void 0!==i.style.msTouchAction||!1,perspective:void 0!==i.style.perspective||void 0!==i.style.msPerspective||void 0!==i.style.mozPerspective||void 0!==i.style.webkitPerspective||!1,transition:void 0!==i.style.transition||void 0!==i.style.msTransition||void 0!==i.style.mozTransition||void 0!==i.style.webkitTransition||!1,animation:void 0!==i.style.animation||void 0!==i.style.msAnimation||void 0!==i.style.mozAnimation||void 0!==i.style.webkitAnimation||!1}),f=function(){function a(e){return e?String(e):""}return{isLength:function(e,t,n){return e=a(e),t=void 0===t?Number.MAX_VALUE:t,void 0!==n?(n<t&&(n=t),e.length<=n&&e.length>=t):e.length===t},isMinLength:function(e,t){return t=t||0,(e=a(e)).length>=t},isMaxLength:function(e,t){return e=a(e),t=t||Number.MAX_VALUE,e.length<=t},isPhone:function(e){return e=a(e),d.phone.test(e)},isMail:function(e){return e=a(e),d.mail.test(e)},isDate:function(e){return e=a(e),d.date.test(e)},isLoginName:function(e){return e=a(e),d.loginName.test(e)},isIDCard:function(e){if(e=(e=a(e)).toUpperCase(),d.idCard.test(e)){if(18===e.length){for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=e.split(""),o=0,i=0;i<17;i++)o+=n[i]*t[i];if(["1","0","X","9","8","7","6","5","4","3","2"][o%11]!==n[17])return!1}return!0}return!1}}}(),h=function(){for(var e={},t=["normal","info","success","warning","danger"],n=["","","","",""],o=0,i=t.length;o<i;o++)e[t[o]]={name:t[o],no:o,ico:n[o]};return e}(),g=function(){for(var e={},t=["red","orange","green","blue","yellow","teal","pink","violet","purple","brown","dark","grey","white"],n=0,o=t.length;n<o;n++)e[t[n]]={name:"c-"+t[n],id:t[n]};return e}(),v={pageReady:L.Callbacks(),pageResize:L.Callbacks(),autoClose:L.Callbacks(),keyDown:L.Callbacks(),keyUp:L.Callbacks()},A=((o=[j.pointer?"pointerdown":"MSPointerDown",j.pointer?"pointermove":"MSPointerMove",j.pointer?"pointerup":"MSPointerUp",j.pointer?"pointercancel":"MSPointerCancel","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseup","mouseout","mouseenter","mouseleave","keydown","keypress","keyup","focus","blur","click"])[20]=[o[0],o[4],o[8]].join(" "),o[21]="focusin",o[22]="focusout",o[23]=[o[0],o[4],o[8],o[21]].join(" "),o),m=[L("<div />"),L("<span />"),L("<a />")],b=/(^[a-z0-9]{1,}|[A-Z][a-z0-9]{0,})/g,y={},w={},O=function(){},C=!1;function x(e){var t=e.split("-"),n=1,o=t.length;if(1<o)for(;n<o;n++)0<t[n].length&&(t[n]=t[n].substr(0,1).toUpperCase()+t[n].substr(1));return t.join("")}function F(){return Date.now&&Date.now()||(new Date).getTime()}function M(e){return e||(e="id"),w[e]||(w[e]=0),"id"===e?N+w[e]++:N+e+"-"+w[e]++}function E(){var t,e,n,o,i=arguments,a=i.length,r=this;if(2===a){if(n=i[0],o=i[1],p.isArray(n)&&p.isFunction(o))return t={},n.forEach(function(e){t[p.isArray(e)?e[0]:e]=function e(t){var n,o,i;if(!p.isArray(t))return t=String(t),void 0===(n=r.userOptions[t])&&(n=r.getOriginAttr(t)),void 0===n&&(n=r.getOriginAttr(t,1)),n;for(o=0,i=t.length;o<i;o++)if(void 0!==(n=e(t[o])))return n}(e)}),o(t),t}else if(3===a&&(t=i[0],e=i[1]||{},o=i[2],p.isObject(t)&&p.isObject(e)&&p.isFunction(o)))return o(t=z(t,e)),t;return{}}function I(e){return p.isJQuery(e)||(e=L(e)),e}function z(e,t){for(var n in p.isObject(e)||(e={}),p.isObject(t)||(t={}),t)e[n]=t[n];return e}function T(e){e.each(function(){var e,t,n,a=L(this),o=c+"-lazy";a.attr(o)&&a.attr(c,a.attr(o)),(e=a,t=(e.attr(c)||"").split(" "),n=[],t.forEach(function(e){0!==e.length&&n.push(e)}),n).forEach(function(e,t){var n=x(e),o=a.attr(N+e+"-ready"),i=a.attr(N+"id")||null;o||(i?u[n].create(i,a):u[n].create(a))})})}function k(){T(L("["+c+"]"))}function S(e,t,n){function o(){return t.apply(o,arguments)}return p.isFunction(t)||(t=O),o.create=t,n?n[e]=o:u[e]=o,o}var R,Y,P;D.ready(function(){t=L("body"),j.apple&&r.body.addEventListener(A[4],L.noop),v.pageReady.fire(),C=!0,D.on(A[23],function(e){var t="ctrlCloseEvent",n=e.type,o=D.data(t);o&&n!==o||(D.data(t,n),v.autoClose.fire(e.target)),n!==A[8]&&n!==A[21]||D.data(t,null)}),D.on(A[20],".message:not([ud2]) .message-close",function(){L(this).parent().remove()})}),l.on("orientationchange resize",function(){n&&e.clearTimeout(n),n=e.setTimeout(function(){var e=l.width(),t=l.height();v.pageResize.fire(e,t)},60)}),D.on(A[14],function(e){v.keyDown.fire(e,e.keyCode,e.ctrlKey,e.altKey,e.shiftKey)}).on(A[16],function(e){v.keyUp.fire(e,e.keyCode,e.ctrlKey,e.altKey,e.shiftKey)}),v.pageReady.add(k),z(s,{prefix:N,jqe:m,an:{pos:["center","full-screen","top-left","top-right","top-center","bottom-left","bottom-right","bottom-center"],event:A},noop:O,backmask:(R={},Y=L('<div class="'+N+'backmask"></div>'),P=[],v.pageReady.add(function(){t.append(Y)}),z(R,{open:function(e){var t;return t=e,-1===P.indexOf(t)&&(P.push(t),1)&&Y.addClass("on"),R},close:function(e){var t,n;return t=e,-1<(n=P.indexOf(t))&&(P.splice(n,1),1)&&!P.length&&Y.removeClass("on"),R}})),win:function(){return l},body:function(){return t},argsToArray:function(e){return Array.prototype.slice.call(e)},attrValue:function(e,t,n,o){var i;return void 0===(i=(e=I(e)).attr(t))&&n&&(i=e.attr(n+"-"+t)),void 0===i&&(i=o),i},boolCheck:function(e,t){return void 0===e?t:"true"===e||"1"===e||"false"!==e&&"0"!==e&&!!e},options:E,createStyle:function(){for(var e=arguments.length,t=0,n={};t<e;t++)n[arguments[t]]=arguments[t];return n},creater:S,createControlID:M,controlCreater:function(r,e){var t,l={public:[],init:O,name:t=r,ctrlName:x(t),className:N+t},s=S(r,function e(){var t,n,o,i=function(e){var o=this,i={public:{ud2:!0,collection:o.public,type:e,appendTo:function(e){return n(e,function(e){e.last().append(i.current)}),this},prependTo:function(e){return n(e,function(e){e.last().prepend(i.current)}),this},insertBefore:function(e){return n(e,function(e){e.last().before(i.current)}),this},insertAfter:function(e){return n(e,function(e){e.last().after(i.current)}),this},style:function(e){if(void 0===e)return i.style;for(var t in h)i.style===h[t]&&i.current.removeClass(h[t].name);return i.style=e,i.current.addClass(e.name),i.public},getCurrent:function(){return i.current}},origin:null,current:m[0].clone(),userOptions:{},getOriginAttr:function(e,t){y[e]||(y[e]=e.match(b).join("-").toString().toLowerCase()),e=y[e];var n=t?e:o.className+"-"+e;return i.origin?i.origin.attr(n):null},getOptions:function(){return E.apply(this,arguments)},transferStyles:function(e){t(e,function(e,t){t.attr("style",e.attr("style")).addClass(e.attr("class")),e.removeAttr("style").removeClass()})},transferAttrs:function(e){t(e,function(e,t,n){for(var o,i=e.get(0),a=t.get(0),r=i?i.attributes.length:0,l=new RegExp("^("+n+")"),s=0,c=0;s<r;s++)o=i.attributes[c],l.test(o.name)?(a.setAttribute(o.name,o.value),i.removeAttribute(o.name)):c++})},style:h.normal,autoClose:O,remove:function(){var e,t=this.public.collection.indexOf(this);for(e in v.autoClose.remove(a),this.public.collection.splice(t,1),delete this.public.collection[this.public.id],this.public)delete this.public[e];for(e in this)delete this[e]}};function t(e,t){(e=e||{}).transfer=e.transfer||i.origin||null,e.accept=e.accept||i.current||null,e.attrReg=e.attrReg||null,e.transfer&&e.accept&&t(e.transfer,e.accept,e.attrReg)}function n(e,t){e=e.ud2?e.getCurrent():I(e),(t=t||O)(e)}function a(e){var t,n,o;if(t=(e=I(e)).parents(),e.get(0)!==i.current.get(0)){for(n=0,o=t.length;n<o;n++)if(t.eq(n).get(0)===i.current.get(0))return;i.autoClose()}}return v.autoClose.add(a),i}.call(l,r),a=arguments;switch(a.length){case 0:return e.call(s,void 0,void 0,{});case 1:return p.isString(a[0])?e.call(s,a[0],void 0,void 0):p.isJQuery(a[0])?e.call(s,void 0,a[0],void 0):p.isObject(a[0])?e.call(s,void 0,void 0,a[0]):e.call(s);case 2:if(p.isString(a[0])&&(p.isJQuery(a[1])||p.isString(a[1])))return e.call(s,a[0],a[1],void 0);if(p.isString(a[0])&&p.isObject(a[1]))return e.call(s,a[0],void 0,a[1]);if(p.isJQuery(a[0])&&p.isObject(a[1]))return e.call(s,void 0,a[0],a[1]);break;case 3:t=p.isString(a[0])&&0<a[0].length?a[0]:M(),n=I(a[1]).first(),o=p.isObject(a[2])?a[2]:{}}return z(i,{origin:n,userOptions:o}),z(i.public,{id:t}),l.public.push(i.public),l.public[t]=i.public,i.current.attr(c,r).attr(c+"-id",t).attr(l.className+"-ready",!0).addClass(l.className),l.init(i)||i.public});return e(l,s),l.name!==l.ctrlName&&(u[l.ctrlName]=s),s.collection=l.public,s},convertToJQ:I,className:function(n){return function(e,t){return((t=void 0!==t&&t)?".":"")+n+"-"+(e=e||"")}}}),e[c]=z(u,{libExtend:function(e){e(s,u)},callbacks:v,extend:z,merge:function(e,t){var n={};return z(n,e),z(n,t),n},clone:function(e){return z({},e)},propertier:function(t,n){return function(){var e=arguments;return 0===e.length&&t?t.apply(this,e):n?n.apply(this,e):void 0}},deviceScreenState:function(){switch(e.getComputedStyle(e.document.documentElement,"::before").getPropertyValue("content").replace(/(\"|\')/g,"")){case"p":return 0;case"s":return 1;case"m":return 2;case"l":return 3}},time:F,regex:d,type:p,support:j,form:f,color:g,style:h,key:{A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT:37,UP:38,RIGHT:39,DOWN:40,KEY0:48,KEY1:49,KEY2:50,KEY3:51,KEY4:52,KEY5:53,KEY6:54,KEY7:55,KEY8:56,KEY9:57,"`":192,BACK:8,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,ENTER:13,"NUM+":107,"NUM-":109,"NUM*":106,"NUM/":111,"-":189,"=":187,",":188,".":190,"/":191,"\\":220,SHIFT:16,CTRL:17,ALT:18,CAPS:20,TAB:9,"[":219,"]":221,";":186,"'":222,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},createAllControl:k,createLazyControl:function(){T(L("["+c+"-lazy]"))},ready:function(e){p.isFunction(e)&&(C?e():v.pageReady.add(e))},event:function(e,t){var C,x,M,T,n={},k=(E({stopPropagation:!1,tapMaxTime:300,swipeMaxTime:500,pointerValidLength:10},t,function(e){C=e.stopPropagation,x=e.tapMaxTime,M=e.swipeMaxTime,T=e.pointerValidLength}),{pan:O,tap:O,press:O,swipeLeft:O,swipeRight:O,swipeTop:O,swipeBottom:O,down:O,up:O}),o=[];function S(e,t){var n=t?t.screenX:0,o=t?t.screenY:0,i=t?t.pageX:0,a=t?t.pageY:0,r=t?t.clientX:0,l=t?t.clientY:0,s={del:!1,id:e,downScreenX:n,downScreenY:o,downPageX:i,downPageY:a,downClientX:r,downClientY:l,moveScreenX:n,moveScreenY:o,movePageX:i,movePageY:a,moveClientX:r,moveClientY:l};return z(s,{setMove:function(e){e&&(e.screenX&&(s.moveScreenX=e.screenX),e.screenY&&(s.moveScreenY=e.screenY),e.pageX&&(s.movePageX=e.pageX),e.pageY&&(s.movePageY=e.pageY),e.clientX&&(s.moveClientX=e.clientX),e.clientY&&(s.moveClientY=e.clientY))},getMoveLength:function(){return{x:s.movePageX-s.downPageX,y:s.movePageY-s.downPageY}}})}function i(r){var l={},s={id:null,time:null},c=!1,e=!1;function u(e){0===d()&&(s.id=e,s.time=F())}function d(){var e=0;for(var t in l)l[t].del||e++;return e}function p(e){var t=L(e.target).prop("tagName").toLowerCase();"input"!==t&&"textarea"!==t&&e.preventDefault()}function n(e){p(e),C&&e.stopPropagation();var t=e.originalEvent,n=t.pointerId;u(n),0===d()&&(D.on(A[1],o),D.on(A[2],i),D.on(A[3],i)),l[n]&&!l[n].del||(l[n]=S(n,t),m(e))}function o(e){e.preventDefault(),C&&e.stopPropagation();var t=e.originalEvent,n=t.pointerId;l[n]&&(l[n].setMove(t),b(e,n))}function i(e){C&&e.stopPropagation();var t=e.originalEvent.pointerId;l[t]&&(y(e,t),l[t].del=!0,0===d()&&(D.off(A[1],o),D.off(A[2],i),D.off(A[3],i)))}function a(e){C&&e.stopPropagation();var t,n=e.type,o=e.originalEvent;if("touchstart"===n){p(e),t=o.changedTouches,0===d()&&(r.on(A[5],f),r.on(A[6],h),r.on(A[7],h)),u(t[0].identifier);for(var i=0,a=t.length;i<a;i++)l[t[i].identifier]&&!l[t[i].identifier].del||(l[t[i].identifier]=S(t[i].identifier,t[i])),m(e,t[i].identifier)}else u(0),l[0]=S(0,o),m(e),D.on(A[9],g),D.on(A[10],v),D.on(A[13],v)}function f(e){e.preventDefault(),C&&e.stopPropagation();for(var t=e.originalEvent.changedTouches,n=0,o=t.length;n<o;n++)l[t[n].identifier]&&l[t[n].identifier].setMove(t[n]),b(e,t[n].identifier)}function h(e){C&&e.stopPropagation();for(var t=e.originalEvent.changedTouches,n=0,o=t.length;n<o;n++)y(e,t[n].identifier),l[t[n].identifier].del=!0;0===d()&&(r.off(A[5],f),r.off(A[6],h),r.off(A[7],h))}function g(e){e.preventDefault(),C&&e.stopPropagation();var t=e.originalEvent;l[0]&&(l[0].setMove(t),b(e,0))}function v(e){C&&e.stopPropagation(),l[0]&&(y(e,0),void 0!==l[0]&&!1===l[0].del&&(l[0].del=!0),D.off(A[9],g),D.off(A[10],v))}function m(e,t){c=!1;for(var n=r.parents(),o=n.length,i=0;i<o;i++)if("1"===n.eq(i).attr(N+"scroll-runing")){c=!0;break}k.down.call(r,e)}function b(e,t){var n=l[t].getMoveLength();e.preventDefault(),k.pan.call(r,n,e)}function y(e,t){var n=null,o=l[t].getMoveLength(),i=Math.abs(o.x),a=Math.abs(o.y);s.id===t&&(n=new Date-s.time,s.id=null,s.time=null),n&&(i<T&&a<T&&(c||(n<x?k.tap.call(r,e):k.press.call(r,e))),T<=i&&a<=i&&n<M&&(o.x<0?(e.preventDefault(),k.swipeLeft.call(r,e)):(e.preventDefault(),k.swipeRight.call(r,e))),T<=a&&i<=a&&n<M&&(o.y<0?(e.preventDefault(),k.swipeTop.call(r,e)):(e.preventDefault(),k.swipeBottom.call(r,e)))),k.up.call(r,e),function(){for(var e in l)l[e].del&&delete l[e]}()}function t(e){var t=j.pointer||j.msPointer;e?(t?r.on(A[0],n):r.on(A[4]+" "+A[8],a),r.css({"-ms-touch-action":"none","touch-action":"none"})):(t?r.off(A[0],n):r.off(A[4]+" "+A[8],a),r.css({"-ms-touch-action":"auto","touch-action":"auto"}))}function w(){e||t(e=!0)}return w(),{bind:w,unbind:function(){e&&t(e=!1)}}}return I(e).each(function(e,t){o.push(i(L(t)))}),z(n,{setPan:function(e){return k.pan=e,n},setTap:function(e){return k.tap=e,n},setPress:function(e){return k.press=e,n},setSwipeLeft:function(e){return k.swipeLeft=e,n},setSwipeRight:function(e){return k.swipeRight=e,n},setSwipeTop:function(e){return k.swipeTop=e,n},setSwipeBottom:function(e){return k.swipeBottom=e,n},setDown:function(e){return k.down=e,n},setUp:function(e){return k.up=e,n},on:function(){o.forEach(function(){arguments[0].bind()})},off:function(){o.forEach(function(){arguments[0].unbind()})}})},eventMouseWheel:function(e){var t={},i={scroll:O,down:O,up:O},a="DOMMouseScroll mousewheel",n=[];return I(e).each(function(e,t){n.push(function(o){var e=!1;function t(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent,n=t.deltaY/100||t.wheelDelta/-120||(2<Math.abs(t.detail)?t.detail/3:t.detail)||0;i.scroll.call(o,n,e),0<n?i.down.call(o,e):i.up.call(o,e)}function n(){e||(e=!0,o.on(a,t))}return n(),{bind:n,unbind:function(){e&&(e=!1,o.off(a,t))}}}(L(t)))}),z(t,{setScroll:function(e){return i.scroll=e,t},setDown:function(e){return i.down=e,t},setUp:function(e){return i.up=e,t},on:function(){n.forEach(function(){arguments[0].bind()})},off:function(){n.forEach(function(){arguments[0].unbind()})}})},eventKeyShortcut:function(e){var t,i={},a=(E({autoOn:!0},e,function(e){t=e.autoOn}),{}),r="＀",n=!1;function o(e){for(var t in a)if(t===[e.keyCode,e.ctrlKey?1:0,e.altKey?1:0,e.shiftKey?1:0].join(r)){e.preventDefault();break}}function l(e){for(var t in a)if(t===[e.keyCode,e.ctrlKey?1:0,e.altKey?1:0,e.shiftKey?1:0].join(r)){a[t]();break}}function s(){n||(n=!0,v.keyDown.add(o),v.keyUp.add(l))}return t&&s(),z(i,{add:function(e,t,n){var o=[e,!n||n&&void 0===n.isCtrl?0:n.isCtrl?1:0,!n||n&&void 0===n.isAlt?0:n.isAlt?1:0,!n||n&&void 0===n.isShift?0:n.isShift?1:0].join(r);return a[o]||(a[o]=t),i},remove:function(e,t,n){var o=[e,!n||n&&void 0===n.isCtrl?0:n.isCtrl?1:0,!n||n&&void 0===n.isAlt?0:n.isAlt?1:0,!n||n&&void 0===n.isShift?0:n.isShift?1:0].join(r);return a[o]&&delete a[o],i},on:s,off:function(){n&&(n=!1,v.keyDown.remove(o),v.keyUp.remove(l))}})}})}(window,jQuery),ud2.libExtend(function(f,h){"use strict";var a=[],g={string:"string",number:"number",boolean:"boolean",datetime:"datetime"},v="column";function l(e,t){if(null!==e)switch(t){case g.string:h.type.isString(e)||(e=String(e));break;case g.number:h.type.isNumber(e)||(e=Number(e)),isNaN(e)&&(e=null);break;case g.boolean:h.type.isBoolean(e)||(e=Boolean(e));break;case g.datetime:h.type.isDatetime(e)||(e=new Date(e)),isNaN(e.valueOf())&&(e=null);break;default:return l(e,g.string)}return e}var m=function(e){var t,n,o={type:"cell",column:null,row:null};function i(e){return void 0===e?t:(t=l(e,n),o)}function a(e){return e&&"row"===e.type&&null===o.row&&(o.row=e),o}function r(e){return e&&e.type===v&&null===o.column&&(o.column=e),o}return t=e&&!h.type.isObject(e)?e:(h.type.isObject(e)||(e={}),r(e.columns),a(e.row),e.colspan&&(o.colspan=parseInt(e.colspan)||1),e.rowspan&&(o.rowspan=parseInt(e.rowspan)||1),e.merge&&(o.merge=!0),n=e.type,void 0===e.value||h.type.isArray(e.value)||h.type.isFunction(e.value)?null:e.value),n?i(t):n=null,h.extend(o,{val:i,dataType:function(e){return void 0===e?n:(g[e]||(e=null),n=e,i(t),o)},bindRow:a,bindColumn:r})},e=f.creater("datatable",function(e){var t,n,o,l={},s=(f.options({columns:[],rows:[]},e,function(e){o=e.id||f.createControlID(),t=h.type.isArray(e.columns)?e.columns:[],n=h.type.isArray(e.rows)?e.rows:[]}),[]),c=[];function r(e){var t,n=function(e){var t,n,o={type:v},i=[];function a(e){return void 0===e?t:(t=null!==e?String(e):null,o)}function r(e){return void 0===e?n:(g[e]||(e=null),n=e,i.forEach(function(e){e.dataType(n)}),o)}return e&&!h.type.isObject(e)?a(e):(!e&&(e={}),a(e.title?e.title:null),r(e.type)),h.extend(o,{cells:i,title:a,dataType:r})}(e);if(c.push(n),0<s.length)for(var o in s)t=m({row:s[o],column:n,type:n.dataType()}),n.cells.push(t),s[o].cells.push(t);return l}function u(e){for(var t,n=function(e){var i={type:"row"},a=[];function t(e){var t,n,o;for(h.type.isArray(e)||(e=[]),t=0,n=e.length;t<n;t++)o=e[t],h.type.isObject(o)?("cell"!==o.type&&(o=m(o)),o.bindRow(i),a.push(o)):a.push(m({value:o,row:i}))}return e&&h.type.isArray(e)?t(e):(!e&&(e={}),t(e.cells)),h.extend(i,{cells:a})}(e),o=0,i=n.cells.length,a=c.length;o<i;o++)c[o]||r(),c[o].cells.push(n.cells[o]),n.cells[o].bindColumn(c[o]),n.cells[o].dataType(c[o].dataType());if(i<a)for(;o<a;o++)t=m({row:n,column:c[o]}),n.cells.push(t),c[o].cells.push(t);return s.push(n),p(),l}function i(e){var t,n;if(h.type.isNaturalNumber(e)){if(s[e])for(n in s.splice(e,1),c)c[n].cells.splice(e,1)}else if(e&&"row"===e.type&&-1!==(t=s.indexOf(e)))return i(t);return l}function d(){for(var e=0,t=s.length;e<t;e++)i(0);return l}function p(){var e,t,n,o,i,a=0,r=0,l=s.length;for(e=0;e<l;e++)a!==s[e].cells.length&&r++,a<s[e].cells.length&&(a=s[e].cells.length);if(1<r)for(e=0;e<l;e++)if((o=s[e].cells.length)<a)for(t=0,n=a-o;t<n;t++)i=m({row:s[e],column:c[o+t]}),s[e].cells.push(i),c[o+t].cells.push(i)}return function(e,t){var n,o;for(n=0,o=e.length;n<o;n++)r(e[n]);for(n=0,o=t.length;n<o;n++)u(t[n])}(t,n),a.push(l),o&&(a[o]=l),h.extend(l,{type:"datatable",columns:c,rows:s,columnAdd:r,columnRemove:function e(t){var n,o;if(h.type.isNaturalNumber(t)){if(c[t])for(c.splice(t,1),o=s.length-1;0<=o;o--)s[o].cells.splice(t,1),0===s[o].cells.length&&s.splice(o,1)}else if(t&&t.type===v&&-1!==(n=c.indexOf(t)))return e(n);return l},rowAdd:u,rowRemove:i,completion:p,dataFill:function e(t){var n,o,i,a,r,s;switch(d(),!0){case h.type.isArray(t):for(n=0,o=t.length;n<o;n++)(h.type.isArray(t[n])||h.type.isObject(t[n]))&&u(t[n]);break;case h.type.isObject(t)&&"datatable"===t.type:t.rows.forEach(function(e){var t=[];for(n=0,o=Math.min(e.cells.length,c.length);n<o;n++)t.push({value:e.cells[n].val(),type:c[n].dataType()});u(t)});break;default:return e((i=t,a=f.convertToJQ(i),r=a.find("tr"),s=[],a.find("td").filter("[colspan]").each(function(){var e,t,n=$(this),o=parseInt(n.attr("colspan"));if(n.removeAttr("colspan").attr("span-col",o),1<o)for(e=0,t=o-1;e<t;e++)n.after(n.clone().attr("merge","1"))}),a.find("td").filter("[rowspan]").each(function(){var e,t,n,o,i=$(this),a=parseInt(i.attr("rowspan"));if(i.removeAttr("rowspan").attr("span-row",a),1<a)for(e=0,t=a-1;e<t;e++)o=i.parent().index(),0===(n=i.index())?r.eq(o+e+1).prepend(i.clone().attr("merge","1")):r.eq(o+e+1).children().eq(n-1).after(i.clone().attr("merge","1"))}),r.each(function(){var l=[];r.parent().prop("nodeName").toLowerCase(),$(this).children().each(function(){var e=$(this),t=f.prefix+"datagrid-",n=e.attr(t+"data-type"),o=e.attr("span-col"),i=e.attr("span-row"),a=e.attr("merge"),r={};r.value=e.html(),n&&(r.type=n),o&&(r.colspan=o),i&&(r.rowspan=i),a&&(r.merge=!0),l.push(r)}),s.push(l)}),s))}return l},dataEmpty:d,debug:function(){var e,t,n,o=[],i=0,a=0;for(console.group("value"),e=s.length;i<e;i++)for(o[i]=[],a=0,t=s[i].cells.length;a<t;a++)n=s[i].cells[a],o[i][a]="["+n.dataType()+"],"+n.val();for(console.table(o),console.groupEnd(),console.group("merge"),o=[],i=0,e=s.length;i<e;i++)for(o[i]=[],a=0,t=s[i].cells.length;a<t;a++)n=s[i].cells[a],o[i][a]=n.merge;for(console.table(o),console.groupEnd(),console.group("rowspan, colspan"),o=[],i=0,e=s.length;i<e;i++)for(o[i]=[],a=0,t=s[i].cells.length;a<t;a++)n=s[i].cells[a],o[i][a]=n.rowspan+","+n.colspan;console.table(o),console.groupEnd()}})});return e.dataType=g,e.collection=a,e.getDataType=function(e){switch(!0){case h.type.isString(e):return g.string;case h.type.isNumber(e):return g.number;case h.type.isBoolean(e):return g.boolean;case h.type.isDatetime(e):return g.datetime;default:return g.string}},e.convertValue=l,e}),ud2.libExtend(function(K,X){"use strict";K.creater("scroll",function(e,o){var i,a,r,l,s,c,u,d,p={},f=K.prefix+"scroll",h=K.className(f),g=K.options({recountByResize:!1,barState:0,hasHorizontal:!1,hasVertical:!0,barSize:6,barMinLength:30,barOffset:1,barColor:"rgba(0,0,0,.4)",barColorOn:"rgba(0,0,0,.6)",barBorderRadiusState:!0,mouseWheelLength:"normal",isTouchMode:!0,isMouseWheelMode:!0,isScrollMode:!1,isSlowMovning:!0},o,function(e){e.recountByResize,i=e.barState,a=e.barSize,e.barMinLength,r=e.barOffset,l=e.barColor,e.barColorOn,s=e.barBorderRadiusState,c=e.hasHorizontal,u=e.hasVertical,e.isMouseWheelMode,e.isTouchMode,e.isScrollMode,d=e.mouseWheelLength,e.isSlowMovning,"normal"!==d&&(d=X.type.isNaturalNumber(d)?parseInt(d):"normal")}),v=K.convertToJQ(e),m=K.jqe[0].clone().addClass(h("wrapper")),b=K.jqe[0].clone().addClass(h("bar")),y=b.clone(),w={quadratic:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",circular:"cubic-bezier(0.1, 0.57, 0.1, 1)"},C={id:null,start:0,end:0,moved:!1,startMove:{x:0,y:0},lastMove:{x:0,y:0}},t=!1,x=!1,M=null,T=10,n=!1,k=!1,S={h:0,ih:0,sh:0,w:0,iw:0,sw:0,now:{x:0,y:0},isMoved:!1},L={h:0,mh:0,sh:0,w:0,mw:0,sw:0,timer:null},D=[],N="scroll",j=h("runing");function A(){var e,t=0,n=0,o=0,i=0,a=0,r=0,l=0,s=0;g.hasVertical&&(t=m.height(),n=v.height(),S.h=n,S.ih=v.innerHeight(),S.sh=t-n,S.now.y<-S.sh&&(S.now.y=-S.sh),i=S.ih-2*g.barOffset,0!==n&&(o=i<(o=(o=i*(e=1-(1<(e=S.sh/(5*S.ih))?1:e)))<g.barMinLength?g.barMinLength:o)?i:o,L.h=o,L.mh=i,L.sh=i-o,y.height(o))),g.hasHorizontal&&(a=m.width(),r=v.width(),S.w=r,S.iw=v.innerWidth(),S.sw=a-r,S.now.x<-S.sw&&(S.now.x=-S.sw),s=S.iw-2*g.barOffset,0!==r&&(l=s<(l=(l=s*(e=1-(1<(e=S.sw/(5*S.iw))?1:e)))<g.barMinLength?g.barMinLength:l)?s:l,L.w=l,L.mw=s,L.sw=s-l,b.width(l)))}function O(e){t!==e&&(t=e,v.attr(j,e?1:0))}function F(e,t){var n=t?"sh":"sw";return 0===S[n]||0===L[n]?0:e/S[n]*L[n]}function E(e,t){var n=t?"sh":"sw";return 0===S[n]||0===L[n]?0:e/L[n]*S[n]}function I(){0===g.barState&&(L.timer&&window.clearTimeout(L.timer),b.stop().fadeIn(200),y.stop().fadeIn(200))}function z(){0===g.barState&&(k||n||t||(L.timer&&window.clearTimeout(L.timer),L.timer=window.setTimeout(function(){b.stop().fadeOut(400),y.stop().fadeOut(400)},800)))}function R(e,t,n,o,i,a){var r,l,s=e-t,c=Math.abs(s)/n;return i=i||0,l=c/(a=a||5e-4),(r=e+c*c/(2*a)*(s<0?-1:1))<(o=-o)?(r=i?o-i/2.5*(c/8):o,l=(s=Math.abs(r-e))/c):0<r&&(r=i?i/2.5*(c/8):0,l=(s=Math.abs(e)+r)/c),{destination:Math.round(r),duration:l}}function Y(e,t,n,o){var i,a,r,l;if(n=n||0,o=o||w.circular,0<e&&(e=0),0<t&&(t=0),t<-S.sh&&(t=-S.sh),e<-S.sw&&(e=-S.sw),r=o,m.css("transition-timing-function",r),y.css("transition-timing-function",r+", ease-out, ease-out, ease-out"),b.css("transition-timing-function",r+", ease-out, ease-out, ease-out"),l=parseInt(n),m.css("transition-duration",l+"ms"),y.css("transition-duration",l+"ms, 300ms, 300ms, 300ms"),b.css("transition-duration",l+"ms, 300ms, 300ms, 300ms"),0!==l?(M&&window.clearTimeout(M),M=window.setTimeout(function(){Y(S.now.x,S.now.y,0),O(!1),z()},l)):(O(!1),z()),m.css("transform","translate("+e+"px, "+t+"px)"+(X.support.perspective?" translateZ(0)":"")),g.hasVertical&&y.css("transform","translate(0, "+F(-t,1)+"px)"+(X.support.perspective?" translateZ(0)":"")),g.hasHorizontal&&b.css("transform","translate("+F(-e,0)+"px, 0)"+(X.support.perspective?" translateZ(0)":"")),S.now={x:e,y:t},0!==(a=D.length))for(i=0;i<a;i++)D[i].move(-e,-t,n)}function P(){if(0<D.length)for(var e in D)D[e].recountPosition()}function q(e){return e=parseInt(e)||0,A(),Y(S.now.x,S.now.y,e),p}function U(){if(!x){P(),A(),I();var e,t=(e=(e=m.css("transform")).split(")")[0].split(", "),{x:Math.round(+(e[12]||e[4])),y:Math.round(+(e[13]||e[5]))});Y(t.x,t.y),C.moved=!1,C.start=X.time(),C.startMove={x:S.now.x,y:S.now.y},C.lastMove={x:0,y:0}}}function B(e){if(!x){var t=X.time(),n=e.x,o=e.y,i=Math.abs(n),a=Math.abs(o),r=n-C.lastMove.x,l=o-C.lastMove.y,s=0,c=0;I(),C.lastMove={x:n,y:o},300<t-C.end&&i<T&&a<T||(C.moved||(C.moved=!0),g.hasVertical&&(c=l+S.now.y),g.hasHorizontal&&(s=r+S.now.x),0===r&&0===l||Y(s,c),300<=t-C.start&&(C.start=t,C.startMove.x=s,C.startMove.y=c))}}function Q(){if(!x){var e=S.now.x,t=S.now.y,n=e,o=t,i=null,a=null,r=X.time()-C.start,l=0;if(C.end=X.time(),z(),C.moved&&g.isSlowMovning){if(r<300){var s=0,c=0;g.hasVertical&&(o=(a=R(t,C.startMove.y,r,S.sh,g.bounce?S.h:0)).destination,c=a.duration),g.hasHorizontal&&(n=(i=R(e,C.startMove.x,r,S.sw,g.bounce?S.w:0)).destination,s=i.duration),l=Math.max(s,c)}n===e&&o===t||(I(),O(!0),Y(n,o,l))}}}function V(e){var t=S.now.x,n=S.now.y,o=d;P(),A(),"normal"===o&&(o=Math.round(S.h)),0<e?n-=o:n+=o,0<n||n<-S.sh?O(!1):(I(),O(!0)),Y(t,n,300)}function H(){this.move=0,n=!0,I(),P(),$(this).css("background",g.barColorOn)}function W(){n=!1,z(),$(this).css("background",g.barColor)}function J(e,t){var n=t?S.now.x:E(-(e.x-this.move),0)+S.now.x,o=t?E(-(e.y-this.move),1)+S.now.y:S.now.y;this.move=t?e.y:e.x,Y(n,o)}return function(){var e,t=v.length;if(1<t){for(e=1;e<t;e++)X.scroll(v.eq(e),o);v=v.eq(0)}var n=v.contents();0===n.length?v.append(m):(n.wrapAll(m),m=v.children(h("wrapper",1))),m.css("padding",v.css("padding-top")+" "+v.css("padding-right")+" "+v.css("padding-bottom")+" "+v.css("padding-left")),v.addClass(f),u&&(v.prepend(y),m.css({height:"auto","min-height":"100%"})),c&&(v.prepend(b),m.css({width:"auto","min-width":"100%"})),y.css({top:r,right:r,width:a,background:l}),b.css({left:r,bottom:r,height:a,background:l}),s&&(y.css("border-radius",a/2),b.css("border-radius",a/2)),1===i&&(y.css("display","block"),b.css("display","block")),A(),g.recountByResize&&X.callbacks.pageResize.add(q),0===g.barState&&v.on(K.an.event[12],function(){A(),k=!0,I()}).on([K.an.event[13],K.an.event[6]].join(" "),function(){k=!1,z()}),1===g.barState&&(v.on(K.an.event[12],function(){A(),k=!0}),v.on([K.an.event[13],K.an.event[6]].join(" "),function(){k=!1})),g.isTouchMode&&X.event(v,{stopPropagation:!0}).setDown(U).setUp(Q).setPan(B),g.isMouseWheelMode&&X.eventMouseWheel(v).setScroll(V),g.isScrollMode&&(X.event(y,{stopPropagation:!0}).setPan(function(e){J.call(this,e,1)}).setDown(H).setUp(W),X.event(b,{stopPropagation:!0}).setPan(function(e){J.call(this,e,0)}).setDown(H).setUp(W))}(),X.extend(p,{type:N,move:function(e,t,n){return Y(-e,-t,n=n||0),p},oplock:function(e){return void 0!==e?(x=!!e,p):x},followerBind:function(e){return X.type.isObject(e)&&e.type&&e.type===N&&D.push(e),p},followerUnbind:function(e){var t;return X.type.isObject(e)&&e.type&&e.type===N&&-1<(t=D.indexOf(e))&&D.splice(t,1),p},recountPosition:q,getContent:function(){return m}})})}),ud2.libExtend(function(je,Ae){"use strict";je.controlCreater("datagrid",function(e,t){var n=e.className,be=je.className(n),ye=be("left"),we=be("center"),Ce=be("right"),xe=be("grid"),Me=be("header"),Te=be("content"),ke=be("footer"),Se=be("row",1),Le="rowDeselected",De="rowSelected",Ne={type:null,width:120,minWidth:50,mode:1,align:0};e.init=function(c){var u,p,f,h,g,o,v,r,n,a,m,b,i,l,s,d,y,w,C=[],e=(c.getOptions(["datas","datasHeader","datasFooter","columns","columnDefault","cellHeight","height",["hover","isHover"],"hoverColor",["selected","isSelected"],["selectedMultiple","isSelectedMultiple"],"emptyText"],function(e){var t;v=parseInt(e.cellHeight)||34,r=e.height||null,n=je.boolCheck(e.hover,!0),a=e.hoverColorv||"#EDF7FF",m=je.boolCheck(e.selected,!1),b=je.boolCheck(e.selectedMultiple,!0),i=e.emptyText||"此处没有任何数据",function(e,t,n){var o,i,a,r,l,s=!0;(u=e)?Ae.type.isString(u)||Ae.type.isJQuery(u)?u=je.convertToJQ(u):(u=Ae.datatable().dataFill(u),s=!1):c.origin?u=je.convertToJQ(c.origin):(u=Ae.datatable(),jsJQ=!1);s&&(c.origin=u,o=u.find("thead"),i=u.find("tbody"),a=u.find("tfoot"),u=Ae.datatable().dataFill(i),o.length&&(p=Ae.datatable().dataFill(o)),a.length&&(f=Ae.datatable().dataFill(a)));t&&(p=Ae.datatable().dataFill(t));if(p&&p.columns.length<u.columns.length)for(r=0,l=u.columns.length-p.columns.length;r<l;r++)p.columnAdd();n&&(f=Ae.datatable().dataFill(n));if(f&&f.columns.length<u.columns.length)for(r=0,l=u.columns.length-f.columns.length;r<l;r++)f.columnAdd()}(e.datas,e.datasHeader,e.datasFooter),t=e.columnDefault,o=Ne,Ae.type.isObject(t)&&(o=Ae.merge(o,t)),function(l){var e,t,n;l&&l.length||!c.origin||(l=[],c.origin.find("col").each(function(e,t){t=$(t);var n=parseInt(t.attr(be("width"))),o=parseInt(t.attr(be("min-width"))),i=t.attr(be("mode")),a=t.attr(be("align")),r=t.attr(be("type"));l[e]={},n&&(l[e].width=n),o&&(l[e].minWidth=o),i&&(l[e].mode=i),a&&(l[e].align=a),r&&(l[e].type=r)}));e=Math.max(u.columns.length,p?p.columns.length:0,f?f.columns.length:0,l?l.length:0),h=l,Ae.type.isArray(h)||(h=[]);for(t=0;t<e;t++)Ae.type.isObject(h[t])||(h[t]={}),(n=h[t]=Ae.merge(o,h[t])).minWidth>n.width&&1===n.mode&&(n.width=n.minWidth),n.align=function(){switch(n.align){case 1:case"1":case"center":return"center";case 2:case"2":case"right":return"right";default:case 0:case"0":case"left":return"left"}}(),n.mode=function(){switch(n.mode){case 1:case"1":case"flex":return 1;case 2:case"2":case"left":return 2;case 3:case"3":case"rigth":return 3;default:case 0:case"0":case"normal":return 0}}()}(e.columns),function(e){g=e,Ae.type.isArray(g)||(g=[]);g.header=[],g.content=[],g.footer=[]}(),function(){var e,t,n,o=!!p,i=!!f,a=u.columns.length,r=h.length;if(a<r)for(n=0;n<r-a;n++)u.columnAdd();if(o)for(e=p.columns.length,n=0;n<r-e;n++)p.columnAdd();if(i)for(t=f.columns.length,n=0;n<r-t;n++)f.columnAdd();u.columns.forEach(function(e,t){h[t]&&e.dataType(h[t].type)})}()}),'<div class="'+ye+'"><div class="'+Me+'"><div class="'+xe+'" /></div><div class="'+Te+'"><div class="'+xe+'" /></div><div class="'+ke+'"><div class="'+xe+'" /></div></div><div class="'+Ce+'"><div class="'+Me+'"><div class="'+xe+'" /></div><div class="'+Te+'"><div class="'+xe+'" /></div><div class="'+ke+'"><div class="'+xe+'" /></div></div><div class="'+we+'"><div class="'+Me+'"><div class="'+xe+'" /></div><div class="'+Te+'"><div class="'+xe+'" /></div><div class="'+ke+'"><div class="'+xe+'" /></div></div><div class="'+be("empty")+'"><div>'+i+"</div></div>"),x=c.current.html(e),t=x.children(),M=t.last(),T=t.eq(0),k=T.children(),S=k.eq(0),L=k.eq(1),D=k.eq(2),N=S.children(),j=L.children(),A=D.children(),O=t.eq(1),F=O.children(),E=F.eq(0),I=F.eq(1),z=F.eq(2),R=E.children(),Y=I.children(),P=z.children(),q=t.eq(2),U=q.children(),B=U.eq(0),Q=U.eq(1),V=U.eq(2),H=B.children(),W=Q.children(),J=V.children(),K=[j,N,A],X=[W,H,J],Z=[Y,R,P],G=je.jqe[0].clone().addClass(be("row")),_=je.jqe[0].clone().addClass(be("cell")),ee=!1,te={rowSelected:je.noop,rowDeselected:je.noop};function ne(){var e=function(){var t=0,n=0,o=0;m&&(n+=38);return h.forEach(function(e){switch(e.widthNow=e.width,e.mode){case 0:case 1:t+=e.widthNow;break;case 2:e.cellLeft=n,n+=e.widthNow;break;case 3:e.cellLeft=o,o+=e.widthNow}}),h.gridSize={l:n,c:t,r:o},h.gridSize}(),t=e.l,n=e.c,o=e.r,i=g.footer.length;T.css({width:t}),N.css({width:t}),j.css({width:t}),q.css({left:t-1,right:0<o?o-2:-1}),H.css({width:n}),W.css({width:n-1}),O.css({width:o}),R.css({width:o}),Y.css({width:o}),0<i&&(A.css({width:t}),J.css({width:n}),P.css({width:o}))}function oe(){var o,e,t,i,n,a,r=g.header.length||0,l=g.footer.length||0;e=Q.width(),t=[],a=n=i=0,h.forEach(function(e){1===e.mode?(i+=e.width,t.push(e)):0===e.mode&&(n+=e.width)}),o=(e-n)/i,i=0,t.forEach(function(e){var t=o*e.width,n=e.minWidth;t<n&&(t=n),e.widthNow=t,i+=t}),h.forEach(function(e){0!==e.mode&&1!==e.mode||(e.cellLeft=a,a+=e.widthNow)}),W.css("width",i+n),ie(g.content),r&&ie(g.header),l&&ie(g.footer)}function ie(s){for(var c=0,e=s.length;c<e;c++)s[c].$.left.css("height",v),s[c].$.center.css("height",v),s[c].$.right.css("height",v),h.forEach(function(e,t){var n,o,i=s[c].public.cells[t],a=e.widthNow,r=0,l=1;if(!i.merge){if(n=i.rowspan?(l++,v*(i.rowspan||1)):v,i.colspan){for(l++,o=i.colspan-1;0<o;o--)a+=h[t+ ++r]&&h[t+r].widthNow||0;i.getContent().css("text-align","center")}i.getContent().css({width:a,height:n,left:e.cellLeft,lineHeight:n-1+"px",zIndex:l})}})}function ae(){var e,t,n,o,i,a;0===g.content.length?M.addClass("on"):M.removeClass("on"),ne(),e=g.header.length*v,t=g.footer.length*v,n={height:e},o={top:e},i={bottom:t},a={height:t,bottom:0},ue(r),S.css(n),L.css(o),B.css(n),Q.css(o),E.css(n),I.css(o),N.css({height:e}),j.css({height:v*g.content.length}),H.css({height:e}),W.css({height:v*g.content.length-1}),R.css({height:e}),Y.css({height:v*g.content.length}),M.css({top:e}),t&&(L.css(i),D.css(a),A.css({height:t}),Q.css(i),V.css(a),J.css({height:t}),I.css(i),z.css(a),P.css({height:t}),M.css({bottom:t})),oe()}function re(l,e){var t,s,c,u,n,o,i,d=0;for(e=e||0,t=l.rows.length,0===e&&(i=g.content),1===e&&(i=g.header),2===e&&(i=g.footer);d<t;d++)!function(){var r;s=G.clone().appendTo(K[e]),c=G.clone().appendTo(X[e]),u=G.clone().appendTo(Z[e]),r={$:{left:s,center:c,right:u},public:{cells:[]}},i.push(r),m&&(e&&0===d||!e)&&((n=_.clone().addClass("checkbox").css({textAlign:"center",width:38})).html('<input type="checkbox" class="check" />').appendTo(s),e?(o=1===e?p.rows.length*v:f.rows.length*v,n.css({height:o,"line-height":o-2+"px"})):n.css({height:v,"line-height":v-3+"px"}),!b&&e&&n.addClass("disabled"),r.$.check=n.children(),r.checkEvent=Ae.event(n).setTap(function(){e?se():le.call(this,r)})),h.forEach(function(e,t){var n,o,i,a=l.rows[d].cells[t];switch(r.public.cells[t]=o={},n=a.merge?_.clone():(i=a.val(),_.clone().css({textAlign:e.align}).html(i).attr("title",i?i.toString().replace(/<[^>]+>/g,""):"")),e.mode){case 0:case 1:n.appendTo(c);break;case 2:n.appendTo(s);break;case 3:n.appendTo(u)}o.getContent=function(){return n},o.val=a.val,a.colspan&&(o.colspan=a.colspan),a.rowspan&&(o.rowspan=a.rowspan),a.merge&&(o.merge=a.merge)})}()}function le(e){var t=C.indexOf(e),n=C.length;-1===t?(!b&&0<n&&(C[0].$.check.removeAttr("checked"),C.splice(0,1),te[Le].call(c.public,e.public)),e.$.check.attr("checked","checked"),C.push(e),b&&n+1===g.content.length&&ce(!0)):(e.$.check.removeAttr("checked"),C.splice(t,1),ee&&ce(!1)),te[-1<t?Le:De].call(c.public,e.public)}function se(){var t=[],e=ee;0!==g.content.length&&b&&(e?(ce(!1),C.forEach(function(e){e.$.check.removeAttr("checked"),t.push(e.public)}),C.splice(0,C.length)):(ce(!0),g.content.forEach(function(e){-1===C.indexOf(e)&&(e.$.check.attr("checked","checked"),C.push(e),t.push(e.public))})),te[e?Le:De].call(c.public,t))}function ce(e){e?(ee=!0,g.header[0].$.check.attr("checked","checked"),g.footer[0]&&g.footer[0].$.check.attr("checked","checked")):(ee=!1,g.header[0].$.check.removeAttr("checked"),g.footer[0]&&g.footer[0].$.check.removeAttr("checked"))}function ue(e){return void 0===e?x.height():((Ae.regex.percent.test(e)||Ae.regex.nonNegative.test(e))&&(x.css("height",e),r=e),c.public)}function de(){var e,t=0,n=0,o=g.content,i=o.length;if(m){if(e=C.length,ee&&ce(!1),0<e)for(;n<e;n++)le(C[t]);for(C.splice(0,e);t<i;t++)o[t].checkEvent.off()}j.empty(),W.empty(),Y.empty(),M.addClass("on"),g.content.splice(0,i)}function pe(){oe()}function fe(){var e={barState:2,hasHorizontal:!1,hasVertical:!0,isTouchMode:!1,isMouseWheelMode:!1,isScrollMode:!1},t={barState:2,hasHorizontal:!0,hasVertical:!1,isTouchMode:!1,isMouseWheelMode:!1,isScrollMode:!1};w=Ae.scroll(Q,{barState:0,barColor:"rgba(60, 60, 60, .3)",barColorOn:"rgba(60, 60, 60, .6)",barSize:5,hasVertical:!0,hasHorizontal:!0,isScrollMode:!0,recountByResize:!0}),l=Ae.scroll(L,e),s=Ae.scroll(I,e),d=Ae.scroll(B,t),y=Ae.scroll(V,t),w.followerBind(l).followerBind(s).followerBind(d).followerBind(y),Ae.callbacks.pageResize.add(pe),n&&x.on([je.an.event[12],je.an.event[13]].join(" "),Se,function(e){var t,n,o=$(this),i=e.type;0<o.parents(be("content",1)).length&&(t=o.index(),n={"background-color":i===je.an.event[12]?a:""},j.children(Se).eq(t).children().css(n),W.children(Se).eq(t).children().css(n),Y.children(Se).eq(t).children().css(n))})}re(u),p&&p.rows.length&&re(p,1),f&&f.rows.length&&re(f,2),ae(),c.origin.length&&(c.origin.after(x),c.origin.remove(),c.transferStyles(),ae()),fe();var he=c.public.appendTo,ge=c.public.prependTo,ve=c.public.insertAfter,me=c.public.insertBefore;return Ae.extend(c.public,{appendTo:function(){return he.apply(c.public,arguments),ae(),c.public},prependTo:function(){return ge.apply(c.public,arguments),ae(),c.public},insertAfter:function(){return ve.apply(c.public,arguments),ae(),c.public},insertBefore:function(){return me.apply(c.public,arguments),ae(),c.public},height:ue,setRowSelected:function(e){return te.rowSelected=e,c.public},setRowDeselected:function(e){return te.rowDeselected=e,c.public},dataFill:function e(t){return de(),w.move(0,0),t&&"datatable"===t.type?(u.dataFill(t),re(u),ae(),c.public):e(Ae.datatable().dataFill(t))},dataRowAdd:function e(n){var o=[];if(n&&"datatable"===n.type)n.rows[0]&&(h.forEach(function(e,t){n.rows[0].cells[t]?n.rows[0].cells[t].dataType(e.type):n.columnAdd({type:e.type}),o[t]=n.rows[0].cells[t].val()}),re(n),ae(),ee&&ce(!1));else if(void 0!==n)return e(Ae.datatable().rowAdd(n));return c.public},dataRowRemove:function e(t){var n,o,i,a,r;if(Ae.type.isArray(t))for(a=0,r=t.length;a<r;a++)e(t[a]);else(n=g.content.filter(function(e){return e.public===t})).length&&(m&&(i=C.indexOf(n[0]),n[0].checkEvent.off(),n[0].$.check.remove(),C.splice(i,1),0===C.length&&ee&&ce(!1)),o=g.content.indexOf(n[0]),n[0].$.left.remove(),n[0].$.center.remove(),n[0].$.right.remove(),g.content.splice(o,1));return c.public},dataRowSelected:function(){return C.map(function(e){return e.public})},dataAll:function(){return g.content.map(function(e){return e.public})},dataEmpty:de})},t.align={left:0,center:1,right:2},t.mode={normal:0,flex:1,left:2,right:3}})}),ud2.libExtend(function(H,W){"use strict";H.controlCreater("tabs",function(e,q){var U=e.className,B=H.className(U),h=H.jqe[0].clone().addClass(B("content")),Q={normal:"normal",simple:"simple"},V="tabs.page";H.creater("page",function(){var t,n,o,e,i,a,r,l,s,c=arguments,u=c.length,d=c[0],p={tabs:null},f=!1;return function(){switch(1===u&&W.type.isObject(d=c[0])?(t=d.type,i=d.name,n=d.title,o=d.details,e=d.btnClose):2===u?(n=c[0],o=c[1],e=0):3===u?(t=c[0],n=c[1],o=c[2]):5===u&&(t=c[0],i=c[1],n=c[2],o=c[3],e=c[4]),function(e){switch(e){case"url":case 1:case"1":t=1;break;default:case"html":case 0:case"0":t=0}}(t),i=i||H.createControlID("tabs-page"),n=n||"未命名选项卡",o=o||(1===t?"about:blank":""),e=H.boolCheck(e,!0),a=H.jqe[0].clone().addClass(B("tab")).attr("title",n).append(H.jqe[1].clone().html(n)),s=H.jqe[0].clone().addClass(B("menu-item")).attr("title",n).append(H.jqe[1].clone().html(n)),r=h.clone(),e&&(a.append('<i class="ico ico-solid-cancel" />'),s.append('<i class="ico ico-hollow-cancel" />')),t){case 0:r.append(o);break;case 1:l=$('<iframe id="'+i+'" name="'+i+'" src="'+o+'" />'),r.append(l).addClass("iframe"),W.support.apple&&(r.css({"-webkit-overflow-scrolling":"touch","overflow-y":"scroll"}),l.on("load",function(){l.h=null,l.css("height",""),window.clearInterval(l.timer),l.timer=window.setInterval(function(){var e=l.contents().find("body").outerHeight();l.h&&e===l.h||(l.h=e,l.height(e))},500)}))}}(),W.extend(p,{name:i,type:V,getTab:function(){return a},getTabLink:function(){return s},getContent:function(){return r},getIframe:function(){return l},getPageType:function(){return t},openState:function(e){return void 0===e?f:((f=!!e)?(a.addClass("on"),r.addClass("on"),s.addClass("on")):(a.removeClass("on"),r.removeClass("on"),s.removeClass("on")),p)},title:function(e){return void 0!==e?(n=String(e),a.attr("title",n).children("span").html(n),s.attr("title",n).children("span").html(n),p):n},details:function(e){if(void 0===e)return o;switch(o=String(e),t){case 0:r.html(o);break;case 1:r.children("iframe").attr("src",o)}return p},tabsIn:function(e){return e&&"tabs"===e.type&&!p.tabs&&e.pageAdd(p),p},tabsOut:function(){return p.tabs&&p.tabs.pageRemove(p),p}})},q),e.init=function(d){var a,r,l,o,i,t,s,n,c,u,p,e,f,h=d.getOptions(["layout",["menu","isMenu"],"height","maxWidth","theme",["tabScroll","isTabScroll"],["tabAutoMove","isTabAutoMove"],["menuAutoMove","isMenuAutoMove"]],function(e){a=H.boolCheck(e.menu,!0),l=H.boolCheck(e.tabScroll,!0),o=H.boolCheck(e.tabAutoMove,!0),i=H.boolCheck(e.menuAutoMove,!0),t=e.height||null,s=e.maxWidth,n=e.theme,r=e.layout}),g='<div class="'+B("bar")+'"><div class="'+B("bar-inner")+'" /></div><div class="'+B("main")+'" />',v=d.current.html(g),m=v.children(B("bar",1)),b=v.find(B("bar-inner",1)),y=v.find(B("main",1)),w=$('<div class="'+B("menu")+'"><div class="'+B("menu-btn")+'" /></div>'),C=$('<div class="'+B("mask")+'" />'),x=w.children(":first"),M=$('<div class="'+B("menu-list")+' empty" '+B("empty")+'="这里是空的"><div class="'+B("menu-inner")+'" /></div>'),T=M.children(),k=[],S=0,L={change:H.noop};function D(e){switch(0===r&&v.removeClass(B("top")),1===r&&v.removeClass(B("bottom")),2===r&&v.removeClass(B("left")),3===r&&v.removeClass(B("right")),k.forEach(function(e){e.getTab().removeAttr("style")}),e){default:case"top":case"0":case 0:r=0,v.addClass(B("top"));break;case"bottom":case"1":case 1:r=1,v.addClass(B("bottom"));break;case"left":case"2":case 2:r=2,v.addClass(B("left"));break;case"right":case"3":case 3:r=3,v.addClass(B("right"))}j()}function N(e){switch(n&&v.removeClass(B(Q[n])),e){default:case Q.normal:case"0":case 0:n=null;break;case Q.simple:case"1":case 1:n=Q.simple,v.addClass(B(Q[n]))}}function j(t){void 0===t?(S=0,k.forEach(function(e){0===r||1===r?(t=Math.ceil(e.getTab().width()),s&&s<t&&(t=s),e.getTab().css("width",t)):(t=Math.ceil(e.getTab().height()),e.getTab().css("height",t)),j(e.size=t)})):(S+=t,0===r||1===r?b.width(S+2*k.length):b.height(S+2*k.length))}function A(e){var t,n;l&&(u.recountPosition(),o&&(t=0!==e.getTab().prev().length?e.getTab().prev().position():e.getTab().position(),0===r||1===r?u.move(t.left,0,300):u.move(0,t.top,300))),a&&(c.recountPosition(),i&&(n=0!==e.getTabLink().prev().length?e.getTabLink().prev().position():e.getTabLink().position(),c.move(0,n.top-5,300)))}function O(t){var e=k.filter(function(e){return e.name===t});return e&&e[0]}function F(e){return void 0===e?v.height():((W.regex.percent.test(e)||W.regex.nonNegative.test(e)||"auto"===e)&&(v.css("height",e),"auto"===e?v.addClass(B("auto")):v.removeClass(B("auto")),t=e),d.public)}function E(e,t){var n,o,i;return!e||e.type!==V||e.tabs||Y(e.name)||(e.tabs=d.public,k.push(e),b.append(e.getTab()),y.append(e.getContent()),0===r||1===r?(n=Math.ceil(e.getTab().width()),s&&s<n&&(n=s),e.getTab().css("width",n)):(n=Math.ceil(e.getTab().height()),e.getTab().css("height",n)),j(e.size=n),l&&u.recountPosition(),a&&(T.append(e.getTabLink()),c.recountPosition()),(1===k.length||t)&&z(e),1===k.length&&M.removeClass("empty"),o=$().add(e.getTab().children("span")),i=$().add(e.getTab().find("i")),a&&(o=o.add(e.getTabLink().children("span")),i=i.add(e.getTabLink().find("i"))),e.event=W.event(o).setTap(function(){z(e),w.removeClass("on")}),e.closeEvent=W.event(i).setTap(function(){I(e)})),d.public}function I(e){var t,n;if(e&&e.type===V&&e.tabs===d.public)e.getTab().detach(),e.getTabLink().detach(),e.getContent().detach(),e.event.off(),e.closeEvent.off(),1===e.getPageType()&&(W.support.apple&&(e.getIframe().off("load"),window.clearInterval(e.getIframe().timer)),e.getIframe().detach()),e.tabs=null,t=k.indexOf(e),p===e&&(e.openState(0),0<t?(p=k[t-1].openState(1),L.change.call(d.public,k[t-1])):1<k.length&&(p=k[1].openState(1),L.change.call(d.public,k[1]))),k.splice(t,1),n=-e.size,delete e.size,j(n),0===k.length?(p=null,M.addClass("empty")):A(p);else if(e)return I(R(e));return d.public}function z(e){if(e&&e.type===V&&e.tabs===d.public&&p!==e)p&&p.openState(!1),e.openState(!0),A(e),p=e,L.change.call(d.public,e);else if(e)return z(R(e));return d.public}function R(e){return O(e)||null}function Y(e){return!!O(e)}function P(){w.toggleClass("on")}return d.origin.length&&(d.origin.after(v),d.origin.remove(),d.transferStyles()),D(r),e=h.maxWidth,s="auto"===e?null:parseInt(e)||150,N(n),a&&(v.prepend(w),w.after(M)),F(t),v.append(C),f={barState:2,recountByResize:!0,isScrollMode:!1},l&&(f.hasVertical=0===r||1===r?!(f.hasHorizontal=!0):!(f.hasHorizontal=!1),u=W.scroll(m,f)),a&&(W.event(x).setTap(P),c=W.scroll(M,{barSize:3,barColor:"#d5d5d5"})),W.event(m).setDown(function(){C.show()}).setUp(function(){C.hide()}),function(){if(d.origin.length)for(var e,t,n,o,i,a,r,l="["+B("page")+"]",s=d.origin.children(l),c=0,u=s.length;c<u;c++)e=s.eq(c),t=H.attrValue(e,"page-type",U),o=H.attrValue(e,"page-name",U),n=H.attrValue(e,"page-title",U),i=e.html(),a=H.attrValue(e,"page-btn-close",U,1),r=H.boolCheck(H.attrValue(e,"page-open",U,0),0),E(q.page({type:t,title:n,name:o,details:i,btnClose:a}),r)}(),W.extend(d.public,{height:F,layout:function(e){return void 0!==e?(D(e),j(),d.public):r},theme:function(e){return void 0!==e?(N(e),d.public):n||Q.normal},pages:k,pageAdd:E,pageRemove:I,pageOpen:z,pageFind:R,hasName:Y,setChange:function(e){return L.change=e,d.public}})},q.theme=Q,q.layout={top:0,bottom:1,left:2,right:3},q.pageType={html:0,url:1}})}),ud2.libExtend(function(D,N){"use strict";D.controlCreater("page",function(e,t){var n=e.className,L=D.className(n);e.init=function(t){t.getOptions(["now","max","show",["menu","isMenu"],["ico","isIco"],["text","isText"],"layout","relayout","relayoutWidth"],function(e){o=parseInt(e.now)||1,i=parseInt(e.max)||o,o<1&&(o=1),i<o&&(i=o),a=parseInt(e.show)||2,n=D.boolCheck(e.menu,!0),r=D.boolCheck(e.ico,!0),l=D.boolCheck(e.text,!0),r||l||(l=!0),c=D.boolCheck(e.relayout,!0),u=parseInt(e.relayoutWidth)||767,s=e.layout});var o,i,a,n,r,l,s,c,u,d,p,e='<a class="btn" '+L("fn")+'="0"><i class="ico">&#xec00;</i><span>首页</span></a><a class="btn" '+L("fn")+'="1"><i class="ico">&#xec01;</i><span>上页</span></a><a class="btn" '+L("fn")+'="2"><span>下页</span><i class="ico">&#xec02;</i></a><a class="btn" '+L("fn")+'="3"><span>末页</span><i class="ico">&#xec03;</i></a>',f=t.current.html(e).addClass("group"),h=f.children("a"),g=!1,v={change:D.noop};function m(){var e,t=[],n=f.find("["+L("num")+"]");if(n.remove(),0!==s){for(p&&p.off(),e=a;1<=e;e--)0<o-e&&t.push('<a class="btn btn-solid" '+L("num")+'="'+(o-e)+'">'+(o-e)+"</a>");for(t.push('<a class="btn" '+L("num")+'="'+o+'" '+L("now")+">"+o+"</a>"),e=1;e<=a;e++)o+e<=i&&t.push('<a class="btn btn-solid" '+L("num")+'="'+(o+e)+'">'+(o+e)+"</a>");h.eq(1).after(t.join("")),n=f.find("["+L("num")+"]"),p=N.event(n).setTap(function(){y(this.attr(L("num")))})}}function b(){!function(){g=!0;for(var e=d.options,t=e.length,n=0;n<t;n++)e[0].selectOut();g=!1}();for(var e=1;e<=i;e++){var t=e===o;d.optionAdd(N.select.option(e,e,!1,t))}}function y(e){i<e&&(e=i),e<1&&(e=1),n&&(g=!0,d.val(e),g=!1),w(e)}function w(e){(e=parseInt(e)||1)!==o&&(o=e,m(),v.change.call(t.public,o))}function C(e){s=0===e||"0"===e||"small"===e?0:1,m(),n&&(0===s?d.insertAfter(h.eq(1)):d.appendTo(f))}function x(){C(f.parent().width()<u?0:1)}t.origin.length&&(t.origin.after(f),t.origin.remove(),t.transferStyles()),n&&(d=N.select(t.public.id+"-select",{dir:N.select.direction.up,moveSelected:!0}),b()),r||f.addClass("noico"),l||f.addClass("notext"),c?(x(),N.callbacks.pageResize.add(x)):C(s),N.event(h).setTap(function(){switch(parseInt(this.attr(L("fn")))){case 0:y(1);break;case 1:y(o-1);break;case 2:y(o+1);break;case 3:y(i)}}),n&&d.setChange(function(e){g||w(e)});var M=t.public.appendTo,T=t.public.prependTo,k=t.public.insertAfter,S=t.public.insertBefore;return N.extend(t.public,{appendTo:function(){return M.apply(t.public,arguments),x(),t.public},prependTo:function(){return T.apply(t.public,arguments),x(),t.public},insertAfter:function(){return k.apply(t.public,arguments),x(),t.public},insertBefore:function(){return S.apply(t.public,arguments),x(),t.public},layout:function(e){return void 0!==e?(c||C(e),t.public):s},isText:function(e){return void 0!==e?((l=!!e)?f.removeClass("notext"):f.addClass("notext"),t.public):l},isIco:function(e){return void 0!==e?((r=!!e)?f.removeClass("noico"):f.addClass("noico"),t.public):r},now:function(e){return void 0!==e?((e=parseInt(e)||o)<1&&(e=1),i<e&&(e=i),y(e),t.public):o},max:function(e){return void 0!==e?((i=parseInt(e)||i)<1&&(i=1),n&&b(),i<o?y(i):m(),t.public):i},show:function(e){return void 0!==e?((a=parseInt(e)||a)<0&&(a=0),m(),t.public):a},setChange:function(e){return v.change=e,t.public}})},t.layout={small:0,normal:1}})}),ud2.libExtend(function(C,x){"use strict";C.controlCreater("dialog",function(e,d){var t=e.className,y=C.className(t),p='<a class="btn">确 定</a>',f='<a class="btn">取 消</a>';function w(e,t,n){return(e=x.type.isArray(e)&&2===e.length?{x:e[0],y:e[1]}:x.type.isObject(e)?{x:e.x||e.width||e.w,y:e.y||e.height||e.h}:x.type.isString(e)?((e=e.split(-1<e.indexOf(",")?",":" ")).length,{x:e[0],y:e[1]}):x.type.isNumber(e)?{x:e,y:e}:{x:0,y:0}).x=parseInt(e.x)||t,e.y=parseInt(e.y)||n,e}function n(e,t){var n,o,i,a,r,l,s=e.length;return 1===s&&x.type.isObject(e[0])?(n=e[0].title||"",o=e[0].content||"",i=e[0].ico,a=e[0].icoStyle,r=e[0].sendFn,l=e[0].cancelFn):(n=e[0]||"",o=e[1]||"",3===s&&(x.type.isFunction(e[2])?r=e[2]:a=e[2]),4===s&&(x.type.isFunction(e[2])&&x.type.isFunction(e[3])?(r=e[2],l=e[3]):x.type.isObject(e[2])&&x.type.isFunction(e[3])?(a=e[2],r=e[3]):(i=e[2],a=e[3])),5===s&&(x.type.isObject(e[2])&&x.type.isFunction(e[3])&&x.type.isFunction(e[4])?(a=e[2],r=e[3],l=e[4]):(i=e[2],a=e[3],r=e[4])),6===s&&(i=e[2],a=e[3],r=e[4],l=e[5])),t(n,o,i,a=!a||a.name&&a.ico?a:style.normal,r=x.type.isFunction(r)?r:C.noop,l=x.type.isFunction(l)?l:C.noop)}function h(e,t,n,o,i,a){var r,l;n.send&&(r=x.event(t.eq(0)).setTap(function(){o&&o(a&&a.val()),r&&r.off(),l&&l.off(),e.remove()})),n.cancel&&(l=x.event(t.eq(1)).setTap(function(){i&&i(a&&a.val()),r&&r.off(),l&&l.off(),e.remove()}))}function g(e,t,n,o){var i=$("<table><tr><td></td></tr></table>"),a=i.find("td");e.addClass(y("built")),void 0!==t?a.before('<td><i class="ico fc-'+n.name+'">'+t+"</i></td>"):void 0!==n&&"normal"!==n.name&&a.before('<td><i class="ico fc-'+n.name+'">'+n.ico+"</i></td>"),i.find("td:last").append(o),e.append(i)}e.init=function(n){n.getOptions(["size","position","title",["btnClose","isBtnClose"],"content","contentType","footer"],function(e){t=e.title||"未定义标题",a=e.content||null,l=void 0===e.footer?null:e.footer,function(e){switch(e){case"url":case 1:case"1":r=1;break;default:case"html":case 0:case"0":r=0}}(e.contentType),o=w(e.size,400,300),function(e){switch(e){case C.an.pos[0]:case"0":i=C.an.pos[0];break;case C.an.pos[1]:case"1":case"full":case"fullScreen":i=C.an.pos[1];break;case C.an.pos[2]:case"2":case"topLeft":i=C.an.pos[2];break;case C.an.pos[3]:case"3":case"topRight":i=C.an.pos[3];break;case C.an.pos[5]:case"4":case"bottomLeft":i=C.an.pos[5];break;case C.an.pos[6]:case"5":case"bottomRight":i=C.an.pos[6];break;default:i=w(i,0,0)}}(i=void 0===(i=e.position)?C.an.pos[0]:i),s=C.boolCheck(e.btnClose,!0)});var o,i,t,a,r,l,s,e='<div class="'+y("header")+'">'+t+'</div><div class="'+y("body")+'" /><div class="'+y("footer")+'" /><a class="'+y("close")+' ico">&#xed1f;</a>',c=n.current.html(e),u=(c.children("div").eq(0),c.children("div").eq(1)),d=c.children("div").eq(2),p=c.children("a"),f=!1,h=!1,g=null,v={open:C.noop,close:C.noop};function m(){return h&&!f&&(f=!(h=!1),C.backmask.close(n.public),window.setTimeout(function(){c.removeClass("on")},10),window.setTimeout(function(){f=!1,v.close.call(n.public)},310)),n.public}function b(){var e,t={};switch(i!==C.an.pos[1]&&(t.width=o.x,t.height=o.y),i===C.an.pos[2]?c.addClass(y(C.an.pos[2])):i===C.an.pos[3]?c.addClass(y(C.an.pos[3])):i===C.an.pos[5]?c.addClass(y(C.an.pos[5])):i===C.an.pos[6]?c.addClass(y(C.an.pos[6])):i===C.an.pos[1]?c.addClass(y(C.an.pos[1])):i===C.an.pos[0]?c.addClass(y(C.an.pos[0])):(t.top=i.y,t.left=i.x),c.css(t),s||p.detach(),r){case 0:n.origin.length?u.append(n.origin.html()):u.append(a);break;case 1:e=n.origin.length?n.origin.html():a,u.append('<iframe src="'+e+'" />'),x.support.apple&&u.css({"-webkit-overflow-scrolling":"touch","overflow-y":"scroll"})}null===l?d.remove():(!x.type.isObject(l)&&!x.type.isArray(l)||x.type.isJQuery(l)?d.html(l):function(){var o=[];function t(e){if(x.type.isObject(e)){var t=C.jqe[2].clone().addClass("btn"),n=x.event(t);t.html(e.text||""),t.event=n,e.class&&t.addClass(e.class),e.tap&&n.setTap(e.tap),o.push(t)}}x.type.isArray(l)?l.forEach(function(e){t(e)}):t(l),o.forEach(function(e){d.append(e)}),l=o}(),u.css("bottom","3em")),C.body().append(c)}return b(),g=x.event(p).setTap(m),x.extend(n.public,{getContent:function(){return u},getFooterContent:function(){return d},open:function(){return h||f||(f=h=!0,C.backmask.open(n.public),window.setTimeout(function(){c.addClass("on")},10),window.setTimeout(function(){f=!1,v.open.call(n.public)},310)),n.public},close:m,remove:function e(){return h||f?(h&&m(),window.setTimeout(e,310)):(x.type.isArray(l)&&l.forEach(function(e){e.event.off()}),c.remove(),g.off(),n.remove()),null},setOpen:function(e){return v.open=e,n.public},setClose:function(e){return v.close=e,n.public}})},d.position={center:C.an.pos[0],fullScreen:C.an.pos[1],topLeft:C.an.pos[2],topRight:C.an.pos[3],bottomLeft:C.an.pos[5],bottomRight:C.an.pos[6]},d.contentType={html:0,url:1},d.alert=function(){return n.call(this,C.argsToArray(arguments),function(e,t,n,o,i){var a=d({title:e,size:[300,220],btnClose:!1,footer:p}),r=a.getContent(),l=a.getFooterContent(),s={send:1};g(r,n,o,t),a.setOpen(function(){h(a,l.children("a"),s,i)}).open()})},d.confirm=function(){return n.call(this,C.argsToArray(arguments),function(e,t,n,o,i,a){var r=d({title:e,size:[300,220],btnClose:!1,footer:p+f}),l=r.getContent(),s=r.getFooterContent(),c={send:1,cancel:1};g(l,n,o,t),r.setOpen(function(){h(r,s.children("a"),c,i,a)}).open()})},d.prompt=function(){return n.call(this,C.argsToArray(arguments),function(e,t,n,o,i,a){var r=d({title:e,size:[300,220],btnClose:!1,footer:p+f}),l=r.getContent(),s=r.getFooterContent(),c=$('<input type="text" class="textbox" />'),u={send:1,cancel:1};g(l,n,o,t),l.find("td:last").append(c),r.setOpen(function(){h(r,s.children("a"),u,i,a,c)}).open()})}})}),ud2.libExtend(function(b,y){"use strict";b.controlCreater("message",function(e,t){e.className;var m={};m[b.an.pos[2]]=[],m[b.an.pos[4]]=[],m[b.an.pos[3]]=[],m[b.an.pos[5]]=[],m[b.an.pos[7]]=[],m[b.an.pos[6]]=[],e.init=function(a){a.getOptions(["position","message","style","autoSwitch",["btnClose","isBtnClose"],"closeTime"],function(e){l=b.boolCheck(e.autoSwitch,!0),function(e){switch(e){case b.an.pos[2]:case"topLeft":case"1":case 1:r=b.an.pos[2];break;case b.an.pos[3]:case"topRight":case"2":case 2:r=b.an.pos[3];break;case b.an.pos[7]:case"bottomCenter":case"3":case 3:r=b.an.pos[7];break;case b.an.pos[5]:case"bottomLeft":case"4":case 4:r=b.an.pos[5];break;case b.an.pos[6]:case"bottomRight":case"5":case 5:r=b.an.pos[6];break;default:case b.an.pos[4]:case"topCenter":case"0":case 0:r=b.an.pos[4]}}(e.position),a.origin.length?(t=e.message||a.origin.text()||"未知消息",a.origin.remove()):t=e.message||"未知消息",n=e.style||"",o=b.boolCheck(e.btnClose,!0),s=e.closeTime||5e3});var r,t,n,l,o,s,e,i='<div class="message-content">'+t+"</div>",c=a.current.html(i),u=b.jqe[2].clone().addClass("message-close"),d=!1,p=null,f={open:b.noop,close:b.noop};function h(){var e,t,n,o,i;if(!d){switch(e=c.outerWidth(),t=c.outerHeight(),o=m[r].length,d=!0,m[r].push(a.public),i=12+o*(t+12),r){case b.an.pos[4]:n={top:i,left:"50%",marginLeft:-e/2};break;case b.an.pos[2]:n={top:i,left:12};break;case b.an.pos[3]:n={top:i,right:12};break;case b.an.pos[7]:n={bottom:i,left:"50%",marginLeft:-e/2};break;case b.an.pos[5]:n={bottom:i,left:12};break;case b.an.pos[6]:n={bottom:i,right:12}}a.public.data={tb:i},c.css(n).addClass("on"),f.open.call(a.public),-1!==s&&l&&(p=window.setTimeout(function(){v()},s))}return a.public}function g(){var e,t,n,o,i;if(d){for(null!==p&&window.clearTimeout(p),e=c.outerHeight(),t=m[r].indexOf(a.public),n=m[r].length,d=!1,o=t;o<n;o++)i=m[r][o].data.tb-e-12,m[r][o].data.tb=i,r===b.an.pos[2]||r===b.an.pos[3]||r===b.an.pos[4]?m[r][o].getContent().css("top",i):m[r][o].getContent().css("bottom",i);m[r].splice(t,1),c.removeClass("on"),f.close.call(a.public)}return a.public}function v(){return d?(g(),window.setTimeout(v,310)):(c.remove(),e.off(),a.remove()),null}return c.addClass("message"),b.body().append(c),""!==n&&c.addClass(n.name?n.name:n),o&&c.append(u),l&&h(),e=y.event(u).setTap(function(){v()}),y.extend(a.public,{getContent:function(){return c},open:h,close:g,remove:v,setOpen:function(e){return f.open=e,a.public},setClose:function(e){return f.close=e,a.public}})},t.position={topCenter:b.an.pos[4],topLeft:b.an.pos[2],topRight:b.an.pos[3],bottomCenter:b.an.pos[7],bottomLeft:b.an.pos[5],bottomRight:b.an.pos[6]},t.info=function(e){t({message:e,style:y.style.info})},t.warning=function(e){t({message:e,style:y.style.warning})},t.success=function(e){t({message:e,style:y.style.success})},t.danger=function(e){t({message:e,style:y.style.danger})}})}),ud2.libExtend(function(f,h){"use strict";f.controlCreater("switch",function(e,t){var n=e.className,p=f.className(n);e.init=function(t){t.getOptions(["value",["disabled","isDisabled"],"color"],function(e){n=1===parseInt(e.value)?1:0,o=f.boolCheck(e.disabled,!1),i=e.color||""});var n,o,i,a=t.current.html('<input type="checkbox" /><input type="hidden" />'),r=a.children('[type="hidden"]'),e=a.children('[type="checkbox"]'),l={open:f.noop,close:f.noop,change:f.noop};function s(e){n!==e&&(n=e,r.val(n),l.change.call(t.public,n),1===n?l.open.call(t.public):l.close.call(t.public))}function c(){return n||(a.addClass("checked"),s(1)),t.public}function u(){return n&&(a.removeClass("checked"),s(0)),t.public}function d(){return n?u():c(),t.public}return t.origin.length&&(t.origin.after(a),t.origin.remove(),t.transferStyles(),t.transferAttrs({accept:e,attrReg:"tabindex"}),t.transferAttrs({accept:r,attrReg:"name"})),""!==i&&a.addClass(i.name?i.name:i),1===n&&a.addClass("checked"),r.val(n),o&&a.attr(p("disabled"),!0),h.event(a).setTap(function(){o||d()}),h.extend(t.public,{val:function(e){return void 0!==e?(e?c():u(),t.public):n},disabled:function(e){return void 0!==e?(o!==e&&(o=!!e,e?a.attr(p("disabled"),"true"):a.removeAttr(p("disabled"))),t.public):o},open:c,close:u,toggle:d,setOpen:function(e){return l.open=e,t.public},setClose:function(e){return l.close=e,t.public},setChange:function(e){return l.change=e,t.public}})}})}),ud2.libExtend(function(V,H){"use strict";V.controlCreater("select",function(e,$){var t=e.className,U=V.className(t),u="select",B=u+".group",Q=u+".option";V.creater("group",function(){var t,o,i,e=arguments,n=e.length,a=[],r={select:null},l=e[0];return o=1===n&&H.type.isObject(l)?(t=l.label,!!l.isDisabled):(t=e[0]||"未命名选项组",!!e[1]),t=String(t),i=V.jqe[0].clone().attr("title",t).addClass(U("group")),o&&i.attr(U("disabled"),"true"),H.extend(r,{type:"select.group",options:a,getContent:function(){return i},label:function(e){return void 0!==e?(t=String(e),i.attr("title",t),r):t},disabled:function(e){var t,n;if(void 0===e)return o;if(o!==e)if(o=!!e,e){if(i.attr(U("disabled"),"true"),0!==(n=a.length))for(t=0;t<n;t++)r.select.valOption(a[t],0)}else i.removeAttr(U("disabled"));return r},optionAdd:function(e){return e&&e.type===Q&&!e.group&&(o&&e.selected()&&e.selected(0),e.group=r,a.push(e),i.append(e.getContent()),r.select&&e.selectIn(r.select)),r},optionRemove:function(e){var t;return e&&e.type===Q&&e.group===r&&-1<(t=a.indexOf(e))&&(a.splice(t,1),e.group=null,e.getContent().detach(),e.select&&e.selectOut()),r},selectIn:function(e){return e&&e.type===u&&!r.select&&e.groupAdd(r),r},selectOut:function(){return r.select&&r.select.groupRemove(r),r}})},$),V.creater("option",function(){var t,n,o,i,a,e=arguments,r=e.length,l={group:null,select:null},s=e[0];function c(e){return void 0!==e?(!e||o||null!==l.group&&(null===l.group||l.group.disabled())?(i=!1,a.removeClass("on")):(i=!0,a.addClass("on")),l):i}return i=1===r&&H.type.isObject(s)?(t=s.label,n=s.value,!(o=!!s.isDisabled)&&!!s.isSelected):(t=e[0],n=e[1],!(o=!!e[2])&&!!e[3]),t=String(t)||"未命名选项",null!==n&&(n=String(n)),a=V.jqe[2].clone().html(t).attr("title",t).attr(U("value"),n).addClass(U("option")),o&&a.attr(U("disabled"),"true"),i&&c(!0),H.event(a).setTap(function(){l.disabled()||l.group&&(!l.group||l.group.disabled())||l.select&&(l.select.valOption(l),l.select.multiple()||l.select.close())}),H.extend(l,{type:"select.option",getContent:function(){return a},label:function(e){return void 0!==e?(t=String(e),a.html(t).attr("title",t),l):t},val:function(e){return void 0!==e?(n=String(e),a.attr(U("value"),n),l):n},selected:c,disabled:function(e){return void 0!==e?((e=!!e)?(o=!0,a.attr(U("disabled"),"true"),i&&null!==l.select&&l.select.valOption(l,!1)):(o=!1,a.removeAttr(U("disabled"))),l):o},groupIn:function(e){return!e||e.type!==B||l.group||l.select||e.optionAdd(l),l},groupOut:function(){return l.group&&l.group.optionRemove(l),l},selectIn:function(e){return e&&e.type===u&&!l.select&&e.optionAdd(l),l},selectOut:function(){return l.select&&l.select.optionRemove(l),l}})},$),$.direction={up:1,down:0},e.init=function(h){h.getOptions(["maxheight","placeholder",["multiple","isMultiple"],"dir","emptyText",["moveSelected","isMoveSelected"]],function(e){i=parseInt(e.maxheight),(isNaN(i)||0===i)&&(i=20),a=e.placeholder||"请选择以下项目",r=V.boolCheck(e.multiple,!1),n=e.emptyText||"当前列表未包含任何项",l=V.boolCheck(e.moveSelected,!1),t=e.dir});var i,a,r,t,n,l,s,e='<div class="'+U("put")+'"><a class="'+U("btn")+'" /><i class="ud2-ctrl-arrow" /></div><div class="'+U("list")+'" /><input type="checkbox" /><input type="hidden" />',c=h.current.html(e),u=c.children("div:last"),o=c.children("div:first"),d=o.children("a"),p=c.children('[type="checkbox"]'),f=c.children('[type="hidden"]'),g=!1,v=[],m=[],b=[],y=[],w={open:V.noop,close:V.noop,change:V.noop};function C(e){switch(e){case"up":case"1":case 1:t=1,c.removeClass(U("dir-down")).addClass(U("dir-up"));break;default:case"down":case"0":case 0:t=0,c.removeClass(U("dir-up")).addClass(U("dir-down"))}}function x(e){a=e,d.html(a)}function M(e,t){for(var n,o=void 0===e,i="option, ["+U("option")+"]",a=o?h.origin.children(i):t.children(i),r=0,l=a.length;r<l;r++){a.eq(r);var s=a.eq(r).html(),c=a.eq(r).attr("value"),u=a.eq(r).attr(U("value")),d=void 0===u?void 0===c?null:c:u,p=!!(void 0!==a.eq(r).attr("disabled")&&"false"!==a.eq(r).attr("disabled")||void 0!==a.eq(r).attr(U("disabled"))&&"false"!==a.eq(r).attr(U("disabled"))),f=!!(void 0!==a.eq(r).attr("selected")&&"false"!==a.eq(r).attr("selected")||void 0!==a.eq(r).attr(U("selected"))&&"false"!==a.eq(r).attr(U("selected")));n=$.option(s,d,p,f),o?z(n):e.optionAdd(n)}}function T(e){return H.type.isString(e)?(x(e),h.public):a}function k(e){return H.type.isString(e)?(n=e,A().attr(U("empty"),n),h.public):n}function S(e){return void 0!==e?(C(e),h.public):t}function L(e){var t,n;if(void 0===e)return r;if((e=!!e)!==r){if(r=e,1<(n=y.length)&&!r)for(t=0;t<n-1;t++)y[0].selected(0),y.splice(0,1);0<n&&(r?d.html("1个项目"):d.html(y[0].label())),w.change.call(h.public,O())}return h.public}function D(){var e,t,n,o;return g||(g=!0,c.addClass("on").focus(),t=b.length,n=v.length,o=0,o=i<(o=2.5*t+2*n)?i:o,u.css("height",(0===o?2:o)+"em"),s.recountPosition(),h.public,l&&y[0]&&(e=y[0].getContent().position().top,s.move(0,e,0)),w.open.call(h.public)),h.public}function N(){return g&&(g=!1,c.removeClass("on"),w.close.call(h.public)),h.public}function j(){return g?N():D(),h.public}function A(){return s.getContent()}function O(e){var t,n=[];if(void 0!==e){if(!H.type.isArray(e))return O(V.argsToArray(arguments));for(e=e.map(function(e){return null===e?e:String(e)}),t=y.length-1;0<=t;t--)F(y[t],!1);for(t=0;t<b.length;t++)b[t].disabled()||b[t].group&&(!b[t].group||b[t].group.disabled())||-1===e.indexOf(b[t].val())||F(b[t]);return h.public}for(t=0;t<y.length;t++)n.push(y[t].val());return f.val(n.join(",")),r?n:null!==n[0]?n[0]:null}function F(e,t){var n,o=void 0!==t;if(e&&e.type&&e.type===Q){if(-1===(n=b.indexOf(e)))return h.public;if(n=y.indexOf(e),r){if(o&&(t&&-1<n||!t&&-1===n))return h.public;(!o||o&&!t)&&-1<n?(e.selected(0),y.splice(n,1)):(!o||o&&t)&&-1===n&&(e.selected(1),y.push(e)),0===y.length?d.removeAttr(U("value")).html(a):d.attr(U("value"),!0).html(y.length+"个项目")}else{if(-1<n&&(!o||o&&t)||-1===n&&o&&!t)return h.public;y[0]&&(y[0].selected(0),y.splice(0,1)),-1<n&&o&&!t?d.removeAttr(U("value")).html(a):(e.selected(1),y.push(e),d.attr(U("value"),!0).html(e.label()))}return w.change.call(h.public,O()),h.public}return y}function E(e){var t,n;if(e&&e.type===B&&!e.select&&(e.select=h.public,v.push(e),s.getContent().append(e.getContent()),0!==(n=e.options.length)))for(t=0;t<n;t++)e.options[t].selectIn(h.public);return h.public}function I(e){var t,n;if(e&&e.type===B&&e.select===h.public){if(0<(n=e.options.length))for(t=0;t<n;t++)e.options[t].selected()&&(F(e.options[t],!1),e.options[t].selected(1)),b.splice(b.indexOf(e.options[t]),1),e.options[t].select=null;v.splice(v.indexOf(e),1),e.select=null,e.getContent().detach()}return h.public}function z(e){var t;return e&&e.type===Q&&!e.select&&(e.group?(e.select=h.public,b.push(e)):(e.select=h.public,b.push(e),m.push(e),1===(t=m.length)?s.getContent().prepend(e.getContent()):m[t-2].getContent().after(e.getContent())),e.selected()&&F(e)),h.public}function R(e){return e&&e.type===Q&&e.select===h.public&&(e.group||m.splice(m.indexOf(e),1),e.selected()&&(F(e,!1),e.selected(1)),b.splice(b.indexOf(e),1),e.select=null,e.getContent().detach(),e.group&&e.groupOut()),h.public}function Y(e){return w.open=e,h.public}function P(e){return w.close=e,h.public}function q(e){return w.change=e,h.public}return h.origin.length&&(h.origin.after(c),h.origin.remove(),h.transferStyles(),h.transferAttrs({accept:p,attrReg:"tabindex"}),h.transferAttrs({accept:f,attrReg:"name"})),C(t),x(a),s=H.scroll(u,{barState:0,isScrollMode:!0,barColor:"rgba(0,0,0,.2)",barColorOn:"rgba(0,0,0,.4)"}),A().attr(U("empty"),n),h.autoClose=N,H.event(o).setTap(j),p.on(V.an.event[17],D),H.extend(h.public,{getContent:A,placeholder:T,emptyText:k,direction:S,multiple:L,groups:v,options:b,optionsByValue:y,optionsDefault:m,groupAdd:E,groupRemove:I,optionAdd:z,optionRemove:R,val:O,valOption:F,open:D,close:N,toggle:j,setOpen:Y,setClose:P,setChange:q}),function(){if(h.origin.length){var e="optgroup, ["+U("optgroup")+"]",t=h.origin.children(e);M();for(var n,o=0,i=t.length;o<i;o++){var a=t.eq(o),r=a.attr("label")||a.attr(U("label"))||"",l=!!(void 0!==a.attr("disabled")&&"false"!==a.attr("disabled")||void 0!==a.attr(U("disabled"))&&"false"!==a.attr(U("disabled")));E(n=$.group(r,l)),M(n,a)}}}(),h.public}})}),ud2.libExtend(function(C,x){"use strict";C.controlCreater("number",function(e,t){var n=e.className,w=C.className(n);e.init=function(t){t.getOptions(["step","min","max","value"],function(e){i=parseFloat(e.step),(isNaN(i)||0===i)&&(i=1),r=parseFloat(e.min),isNaN(r)&&(r=0),l=parseFloat(e.max),isNaN(l)&&(l=100),s=e.value,l<r&&(l=r),s=g(s),a=-1<i.toString().indexOf(".")?i.toString().split(".")[1].length:0});var i,a,r,l,s,e,n='<a class="'+w("ico")+' ud2-ctrl-ico">&#xe106;</a><div class="'+w("move")+'"><input type="text" value="0" class="ud2-ctrl-textbox" /></div><a class="'+w("ico")+' ud2-ctrl-ico">&#xe107;</a>',o=t.current.html(n),c=o.find("input"),u=o.children("a:first"),d=o.children("a:last"),p=u.next(),f=!1,h={change:C.noop};function g(e){return e=parseFloat(e),(isNaN(e)||e<r)&&(e=r),l<e&&(e=l),e=Math.round((e-r)/i)*i+r,e=parseFloat(e.toFixed(a)),l<e&&(e-=i),e}function v(e){if(!f)if(f=!0,e&&l<s+i||!e&&s-i<r)f=!1;else{var t='<input class="ud2-ctrl-textbox" />',n=C.jqe[0].clone().addClass(w("view")).html(t),o=C.jqe[0].clone().addClass(w("view")).html(t);c.parent();s=e?parseFloat((s+i).toFixed(a)):parseFloat((s-i).toFixed(a)),n.children().val(s),o.children().val(s),c.before(n),c.after(o),p.animate({top:e?"-100%":"100%"},300,function(){f=!1,y(s),p.css("top",0),n.remove(),o.remove()})}}function m(){v(0)}function b(){v(1)}function y(e){void 0!==e?(s=g(e),h.change.call(t.public,s)):s=g(s),c.val(s)}return t.origin.length&&(t.origin.after(o),t.origin.remove(),t.transferStyles(),t.transferAttrs({accept:c,attrReg:"name|tabindex"})),y(),x.event(u).setTap(m),x.event(d).setTap(b),e=x.eventKeyShortcut({autoOn:!1}).add(x.key.UP,m).add(x.key.DOWN,b).add(x.key.ENTER,function(){c.blur()}),c.on(C.an.event[17],function(){e.on(),o.addClass("on")}).blur(function(){e.off(),y(c.val()),o.removeClass("on")}),x.extend(t.public,{val:function(e){return void 0!==e?(y(e),t.public):s},setChange:function(e){return h.change=e,t.public}})}})}),ud2.libExtend(function(Y,P){"use strict";Y.controlCreater("range",function(e,t){var n=e.className,R=Y.className(n);e.init=function(c){var u,d,p,f,h,g,v,e,t=c.getOptions([["both","isBoth"],"min","max","value","step"],function(e){var t;d=parseFloat(e.step),(isNaN(d)||0===d)&&(d=1),f=parseFloat(e.min),isNaN(f)&&(f=0),h=parseFloat(e.max),isNaN(h)&&(h=100),t=s(e.value),g=t[0],v=t[1],u=Y.boolCheck(e.both,!1),h<f&&(h=f),p=-1<d.toString().indexOf(".")?d.toString().split(".")[1].length:0}),n='<input type="text" maxlength="20" class="ud2-ctrl-textbox" /><div class="ud2-ctrl-power"><i class="ico ico-range-x"></i><i class="ico ico-solid-cancel"></i></div><div class="'+R("list")+'"><div class="'+R("end")+'" /><div class="'+R("back")+'" /></div>',o=c.current.html(n),m=o.children("input"),i=m.next(),a=i.next(),b=Y.jqe[2].clone().addClass(R("hand")),y=b.clone(),w=a.find(R("back",1)),r={max:0,bw:0,w:0,nl:0,nr:0},l=!1,C={open:Y.noop,close:Y.noop,change:Y.noop};function s(e){return e=void 0!==e?(""+e).split(","):[0,0],[parseFloat(e[0])||0,parseFloat(e[1])||0]}function x(){r.nl=k(g),u&&(r.nr=k(v))}function M(){r.w=b.outerWidth(),r.bw=a.width(),r.max=r.bw-r.w}function T(e){return e*r.max/r.bw*100}function k(e){return(e-f)/(h-f)}function S(e,t){var n,o,i,a,r,l,s;e<f&&(e=f),h<e&&(e=h),g=Math.round((e-f)/d)*d+f,g=parseFloat(g.toFixed(p)),h<g&&(g-=d),n=k(g),b.css("left",T(n)+"%"),s=u?(t<f&&(t=f),h<t&&(t=h),v=Math.round((t-f)/d)*d+f,v=parseFloat(v.toFixed(p)),h<v&&(v-=d),o=k(v),y.css({left:T(o)+"%"}),i=Math.min(n,o),a=Math.max(n,o),r=Math.min(g,v),l=Math.max(g,v),b.css("z-index",g+1e4),y.css("z-index",v+1e4),w.css({left:100*i+"%",width:100*(a-i)+"%"}),m.val(r+","+l),[r,l]):(w.css("width",100*n+"%"),m.val(g),g),C.change.call(c.public,s)}function L(){return l||(M(),t.both?S(g,v):S(g),x(),l=!0,o.addClass("on"),i.addClass(Y.prefix+"ctrl-power-on"),e.on(),C.open.call(c.public)),c.public}function D(){return l&&(l=!1,o.removeClass("on"),i.removeClass(Y.prefix+"ctrl-power-on"),e.off(),C.close.call(c.public)),c.public}function N(){return l?D():L(),c.public}function j(e,t){var n=e*r.max+t,o=null;return n<0&&(n=0),n>r.max&&(n=r.max),o=parseFloat(((h-f)*n/r.max+f).toFixed(p)),o=isNaN(o)?f:o}function A(e){t.both?S(j(r.nl,e.x),v):S(j(r.nl,e.x))}function O(){r.nl=k(g)}function F(e){S(g,j(r.nr,e.x))}function E(){r.nr=k(v)}function I(){L()}function z(){var e=s(m.val());M(),S(e[0],e[1]),x()}return w.after(b),u&&w.after(y),c.origin.length&&(c.origin.after(o),c.origin.remove(),c.transferStyles(),c.transferAttrs({accept:m,attrReg:"name|tabindex"})),c.autoClose=D,x(),M(),S(g,v),P.event(i).setTap(N),P.event(b,{stopPropagation:!0}).setDown(M).setPan(A).setUp(O),P.event(y,{stopPropagation:!0}).setDown(M).setPan(F).setUp(E),e=P.eventKeyShortcut({autoOn:!1}).add(P.key.ENTER,function(){m.blur()}),P.callbacks.pageResize.add(function(){M(),S(g,v)}),m.on("focus",I).on("blur",z),P.extend(c.public,{val:function(e,t){return void 0!==e?(S((e=s(void 0!==t?[e,t].join(","):P.type.isArray(e)?e.join(","):e))[0],e[1]),c.public):u?[Math.min(g,v),Math.max(g,v)]:g},open:L,close:D,toggle:N,setOpen:function(e){return C.open=e,c.public},setClose:function(e){return C.close=e,c.public},setChange:function(e){return C.change=e,c.public}})}})}),ud2.libExtend(function(I,z){"use strict";I.controlCreater("date",function(e,t){var n=e.className,N=I.className(n),j=["上一年","下一年","上个月","下个月","前12年","后12年","年份选择","返回日期选择"],A=["日","一","二","三","四","五","六"],O=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],F=[31,28,31,30,31,30,31,31,30,31,30,31],E=z.time();e.init=function(i){i.getOptions(["placeholder","format","value"],function(e){t=e.placeholder||"请选择日期",l=e.format||"yyyy/MM/dd",a=e.value||null});var t,l,a,n,e,o,r,d={seats:function(e){return(1===e.toString().length?"0":"")+e},toString:function(){return l.replace(/[Yy]{4}/,this.value.getFullYear()).replace(/[Yy]{2}/,this.value.getFullYear()-2e3).replace(/[Mm]{2}/,this.seats(this.value.getMonth()+1)).replace(/[Mm]/,this.value.getMonth()+1).replace(/[Dd]{2}/,this.seats(this.value.getDate())).replace(/[Dd]/,this.value.getDate())},setDateValue:function(e,t,n){var o=a;a=e instanceof Date?(this.value=new Date(e.getTime()),this.toString()):3===arguments.length?(this.value=new Date(e,t,n),this.toString()):(this.value=null,""),p.val(a),o!==a&&C.change.call(i.public,a)},selectReset:function(){this.select=new Date(this.value?this.value.getTime():this.now.getTime()),M()},now:new Date(E.valueOf()),select:new Date(E.valueOf()),value:null},s='<input type="text" placeholder="'+t+'" maxlength="20" class="ud2-ctrl-textbox" /><span class="ud2-ctrl-power"><i class="ico ico-calendar" /><i class="ico ico-solid-cancel" /></span><div class="'+N("list")+'"><div class="'+N("datelist")+'"><div class="'+N("tools")+'"><div class="'+N("tools-left")+'"><a class="ico" title="'+j[0]+'">&#xec00;</a><a class="ico" title="'+j[2]+'">&#xec01;</a></div><div class="'+N("tools-right")+'"><a class="ico" title="'+j[3]+'">&#xec02;</a><a class="ico" title="'+j[1]+'">&#xec03;</a></div><div class="'+N("tools-text")+'" title="'+j[6]+'">- 年 - 月</div></div><table /><div class="'+N("btns")+'"><button class="btn sm" tabindex="-1">今日</button> <button class="btn sm" tabindex="-1">清空</button></div></div><div class="'+N("ymlist")+'"><div class="'+N("tools")+'"><div class="'+N("tools-left")+'"><a class="ico" title="'+j[4]+'">&#xec00;</a></div><div class="'+N("tools-right")+'"><a class="ico" title="'+j[5]+'">&#xec03;</a></div><div class="'+N("tools-text")+'" title="'+j[7]+'">年份 / 月份</div></div><table /><div class="'+N("btns")+'"><button class="btn sm" tabindex="-1">确定</button></div></div></div>',c=i.current.html(s),u=c.children(N("list",1)),p=c.children("input"),f=p.next(),h=c.find(N("datelist",1)),g=c.find(N("ymlist",1)),v=c.find(N("tools-text",1)),m=g.find(N("tools-text",1)),b=h.find(N("btns button:eq(0)",1)),y=h.find(N("btns button:eq(1)",1)),w=!1,C={open:$.noop,close:$.noop,change:$.noop};function x(n){var e,t,o,i=function(e){var t=l.replace(/([\\\^\$\*\+\?\{\}\(\)\.\-\=\[\]])/g,"\\$1").replace(/[Yy]{4}/,0===e?"([0-9]{4})":"[0-9]{4}").replace(/[Yy]{2}/,1===e?"([0-9]{2})":"[0-9]{2}").replace(/[Mm]{2}/,2===e?"(0[1-9]|[1][012])":"(?:0[1-9]|[1][012])").replace(/[Mm]/,3===e?"(1[012]|[1-9])":"(?:1[012]|[1-9])").replace(/[Dd]{2}/,4===e?"(0[1-9]|[12][0-9]|3[01])":"(?:0[1-9]|[12][0-9]|3[01])").replace(/[Dd]/,5===e?"([12][0-9]|3[01]|[1-9])":"(?:[12][0-9]|3[01]|[1-9])");return new RegExp(t)},a=function(e){var t;return(t=(t=i(2*e).exec(n))&&t[1])||(t=(t=i(2*e+1).exec(n))&&t[1]),parseInt(t)};if(n){if(i().test(n))e=a(0)||d.now.getFullYear(),t=a(1)||1,o=a(2)||1,e<100&&(e+=2e3);else{var r=new Date(n);o=isNaN(r)?(e=d.now.getFullYear(),t=d.now.getMonth()+1,d.now.getDate()):(e=r.getFullYear(),t=r.getMonth()+1,r.getDate())}d.setDateValue(e,t-1,o),d.selectReset()}else d.setDateValue(),d.selectReset()}function M(){var e,t,n,o=h.children("table"),i=h.find(N("tools-text",1)),a=[],r=d.select.getFullYear()%4==0,l=d.select.getMonth()-1<0?11:d.select.getMonth()-1,s=F[d.select.getMonth()],c=F[l],u=new Date(d.select.getFullYear(),d.select.getMonth(),1).getDay();for(e in i.html(d.select.getFullYear()+" 年 "+(d.select.getMonth()+1)+" 月"),r&&1===d.select.getMonth()&&(s=29),r&&2===d.select.getMonth()&&(c=29),a.push("<tr>"),A)a.push("<th>"+A[e]+"</th>");for(a.push("</tr><tr>"),t=-1,n=e=0;e<42;e++)e<u?(t++,a.push('<td class="',N("nomonth"),'">',c-u+e+1,"</td>")):e-t<=s?a.push('<td class="',(e+1)%7==0||(e+1)%7==1?N("weekend"):"",'" ',N("date"),'="',e-t,'" ',d.select.getFullYear()===d.now.getFullYear()&&d.select.getMonth()===d.now.getMonth()&&d.now.getDate()===e-t?N("today "):"",d.value&&d.select.getFullYear()===d.value.getFullYear()&&d.select.getMonth()===d.value.getMonth()&&d.value.getDate()===e-t?N("now "):"",">",e-t,"</td>"):(n++,a.push('<td class="',N("nomonth"),'">',n,"</td>")),(e+1)%7==0&&a.push("</tr><tr>");o.children().remove(),o.append(a.join("")),z.event(o.find("["+N("date")+"]")).setTap(function(){d.setDateValue(d.select.getFullYear(),d.select.getMonth(),this.attr(N("date"))),p.blur(),S(1)})}function T(){var e,t,n=g.children("table"),o=[],i=N("year"),a="["+i+"]",r=N("month"),l="["+r+"]",s=N("now");for(e=d.select.getFullYear()%12==0?d.select.getFullYear()-11:12*parseInt(d.select.getFullYear()/12)+1,o.push("<tr><td>"),t=0;t<12;t++)o.push("<div ",N("year"),'="',e+t,'" ',d.select.getFullYear()===e+t?s:"",">",e+t,"</div>");for(o.push("</td><td>"),t=0;t<12;t++)o.push("<div ",N("month"),'="',t,'" ',d.select.getMonth()===t?s:"",">",O[t],"</div>");o.push("</td></tr>"),n.children().remove(),n.append(o.join("")),z.event(n.find(a)).setTap(function(){d.select.setFullYear(this.attr(i)),n.find(a).removeAttr(s),this.attr(s,"")}),z.event(n.find(l)).setTap(function(){d.select.setMonth(this.attr(r)),n.find(l).removeAttr(s),this.attr(s,"")})}function k(){return w||(w=!0,c.addClass("on"),f.addClass(I.prefix+"ctrl-power-on"),h.show(),g.hide(),n.on(),D(I.win().width()),C.open.call(i.public)),i.public}function S(e){var t;return w&&(w=!1,c.removeClass("on"),f.removeClass(I.prefix+"ctrl-power-on"),e||(""===(t=p.val())?x():x(t)),M(),n.off(),C.close.call(i.public)),i.public}function L(){return w?S():k(),i.public}function D(e){var t;w&&(u.css("left",-1),t=e-(parseInt(u.offset().left)+parseInt(u.outerWidth())-1)-2,u.css("left",t<-1?t:-1))}return i.origin.length&&(i.origin.after(c),i.origin.remove(),i.transferStyles(),i.transferAttrs({accept:p,attrReg:"name|tabindex"})),i.autoClose=S,x(a),e=c.find(N("tools a",1)),M(),z.event(e.eq(0)).setTap(function(){d.select.setFullYear(d.select.getFullYear()-1),M()}),z.event(e.eq(3)).setTap(function(){d.select.setFullYear(d.select.getFullYear()+1),M()}),z.event(e.eq(1)).setTap(function(){d.select.setMonth(d.select.getMonth()-1),M()}),z.event(e.eq(2)).setTap(function(){d.select.setMonth(d.select.getMonth()+1),M()}),z.event(v).setTap(function(){h.slideUp(300),g.slideDown(300),T()}),z.event(b).setTap(function(){d.setDateValue(d.now.getFullYear(),d.now.getMonth(),d.now.getDate()),d.selectReset(),S(1)}),z.event(y).setTap(function(){d.setDateValue(),d.selectReset(),S(1)}),o=g.find(N("tools a",1)),r=g.find(N("btns button",1)),T(),z.event(o.eq(0)).setTap(function(){d.select.setFullYear(d.select.getFullYear()-12),T()}),z.event(o.eq(1)).setTap(function(){d.select.setFullYear(d.select.getFullYear()+12),T()}),z.event(r.eq(0)).setTap(function(){h.slideDown(300),g.slideUp(300),M()}),z.event(m).setTap(function(){h.slideDown(300),g.slideUp(300),M()}),z.event(f).setTap(L),n=z.eventKeyShortcut({autoOn:!1}).add(z.key.ENTER,function(){p.blur(),S()}).add(z.key.LEFT,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()-1))}).add(z.key.RIGHT,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()+1))}).add(z.key.UP,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()-7))}).add(z.key.DOWN,function(){null!==d.value&&x(d.value.setDate(d.value.getDate()+7))}),p.on("focus",k),z.callbacks.pageResize.add(D),z.extend(i.public,{placeholder:function(e){return type.isString(e)?(t=e,p.attr("placeholder",t),i.public):t},format:function(e){return type.isString(e)?(l=e,d.setDateValue(d.value),i.public):l},val:function(e){return void 0!==e?(x(e),i.public):a},open:k,close:S,toggle:L,setOpen:function(e){return C.open=e,i.public},setClose:function(e){return C.close=e,i.public},setChange:function(e){return C.change=e,i.public}})}})}),ud2.libExtend(function(_,ee){"use strict";_.controlCreater("file",function(e,Q){var t=e.className,w=_.className(t),V="length-error",H="type-error",W="size-error",J="repeat-error",K="server-error",X="server-return-error",Z="standard",G=_.createStyle("simple",Z,"custom");e.init=function(a){a.getOptions(["maxlength","maxsize",["rename","isRename"],"renamLength","urlUpload","filter","style"],function(e){var t,n,o="(png|jpg|gif|bmp|svg|ico|html|js|cs|vb|css|less|scss|sass|mp3|mp4|wav|avi|ogg|mov|wmv|webm|flv|swf|txt|pdf|doc|docx|xls|xlsx|ppt|pptx|ett|wpt|dpt|rar|zip|iso)",i=new RegExp("^("+o+",)*"+o+"$");for(r=parseInt(e.maxlength)||20,l=parseInt(e.maxsize)||2048,s=_.boolCheck(e.rename,!0),c=parseInt(e.renameLength)||50,u=e.filter||"",n=(u="all"===(u=i.test(u)?u:"gif,jpg,png")?i.split("|"):u.split(",")).length,t=0;t<n;t++)u[u[t]]=u[t];d=e.urlUpload||"",p=e.style,G[p]||(p="custom")});var r,l,s,c,u,d,p,e=a.current.html('<input type="file" multiple />'),t=e.children("input"),f=[],o=0,n=0,i=0,h={},g={add:$.noop,remove:$.noop,upload:$.noop,clear:$.noop,progress:$.noop,done:$.noop,fail:$.noop},v={error:function(e,t){switch(e){case V:ee.message.danger("您选择的文件数量已经超过最大个数限制，该限制为 "+r+" 个");break;case H:ee.message.danger("您选择的文件类型不符合要求，请您重新选择文件");break;case W:ee.message.danger("您选择的文件超出 "+l+"KB 限制，尺寸不符的文件："+t.join("、"));break;case J:ee.message.warning("您选择的文件已存在于列表中，重复的文件："+t.join("、"));break;case K:ee.message.danger("您的文件 "+t+" 已被阻止，请检查您的文件");break;case X:ee.message.danger("文件 "+t+" 被服务器退回，请检查您的文件是否符合要求")}},complete:$.noop,done:$.noop,fail:$.fail};function m(t){var n=0,e=t.length;if(e+f.length>r)v.error.call(a.public,V);else if(function(e){for(var t,n=0,o=e.length;n<o;n++)if(!(t=(t=e[n].name.split("."))[t.length-1].toLowerCase())||void 0===u[t])return!1;return!0}(t)){for(var o=[],i=[];n<e;n++)t[n].size>1024*l?o.push(t[n].name):f.some(function(e){return e.name===t[n].name&&e.size===t[n].size})?i.push(t[n].name):(f.push(t[n]),g.add(t[n]),0);0<i.length&&v.error.call(a.public,J,i),0<o.length&&v.error.call(a.public,W,o)}else v.error.call(a.public,H)}function b(n){var e=new FormData,t=d;e.append("file",n),s&&(t+="?name="+n.newname+"&tick="+(new Date).getTime()),$.ajax({type:"POST",url:t,data:e,contentType:!1,processData:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t=parseInt(e.loaded/e.total*100);g.progress(n,t)},!1),e}}).done(function(e){var t;y(),void 0===(t=v.done.call(a.public,e,n))&&(t=!0),t||(w(),v.error.call(ctrl.public,X,n.name)),g.done(t,n),T()===f.length&&(o=2,v.complete.call(a.public))}).fail(function(e){y(),w(),v.fail.call(a.public,e,n),g.fail(n),v.error.call(ctrl.public,K,n.name),T()===f.length&&(o=2,v.complete.call(a.public))})}function y(){n++}function w(){i++}function C(){return e}function x(){return{state:s,length:c}}function M(){return f}function T(){return n}function k(){return i}function S(){return o}function L(e){return e=_.convertToJQ(e),ee.event(e,{stopPropagation:!0}).setTap(function(){0===o&&t.trigger("click")}),h}function D(e,t){return e=_.convertToJQ(e),ee.event(e,{stopPropagation:!0}).setTap(function(){0===o&&g.remove.call(this,t)}),h}function N(e){return e=_.convertToJQ(e),ee.event(e,{stopPropagation:!0}).setTap(function(){var e,t;if(0===o&&0!==f.length){for(o=1,new FormData,e=0,t=f.length;e<t;e++)b(f[e]);g.upload.call(this)}}),h}function j(e){return e=_.convertToJQ(e),ee.event(e,{stopPropagation:!0}).setTap(function(){0===o&&(f.length=0,g.clear.call(this))}),h}function A(e){return g.add=e,h}function O(e){return g.remove=e,h}function F(e){return g.upload=e,h}function E(e){return g.clear=e,h}function I(e){return g.progress=e,h}function z(e){return g.done=e,h}function R(e){return g.fail=e,h}function Y(e){return v.error=e,a.public}function P(e){return v.complete=e,a.public}function q(e){return v.done=e,a.public}function U(e){return v.fail=e,a.public}function B(){var e;m(this.files),""!==t.val()&&("form"!==t.parent().get(0).nodeName.toLowerCase()&&(e=$("<form />"),t.wrap(e)),(e=t.parent()).get(0).reset())}return function(){if(a.origin.length&&(a.origin.after(e),a.origin.remove(),a.transferStyles(),a.transferAttrs({accept:t,attrReg:"name|tabindex"})),t.on("change",B),ee.extend(a.public,{style:ee.extend(h,{filesHandler:m,fileAddBtn:L,fileRemoveBtn:D,uploadBtn:N,clearBtn:j,fileAddFn:A,fileRemoveFn:O,uploadFn:F,clearFn:E,progressFn:I,doneFn:z,failFn:R}),getContent:C,getUpState:S,getRenameState:x,getUpfiles:M,getDoneNum:T,getErrorNum:k,setError:Y,setComplete:P,setDone:q,setFail:U}),p===Z)Q.standard(a.public)}(),a.public},Q.style=G,Q.standard=function(n){var o,a,e,r,l,t,s,c,u,d,i=n&&n.ud2&&"file"===n.type?n:ee.file.create.apply(Q,arguments);function p(e){var t,n=$('<div class="'+w("full-figure")+'"><div class="'+w("full-img")+'"><img ondragstart="return false;" /></div>'+(c.state?'<div class="'+w("full-rename")+'"><input type="text" value="'+e.name.substring(0,c.length)+'" maxlength="'+c.length+'" /></div>':"<div>"+e.name+"</div>")+'<div class="'+w("full-close")+'"></div><div class="'+w("full-progress")+'"></div></div>'),o=n.find("input"),i=n.children(w("full-close",1));1===u.length&&(a.fadeOut(200),r.fadeIn(200),l.fadeIn(200)),/^image\/(png|jpeg|gif|bmp|svg)/.test(e.type)?((t=new FileReader).readAsDataURL(e),t.addEventListener("loadend",function(){n.find("img").attr("src",t.result)})):(n.find("img").attr("src","data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEzOCAxMTgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEzOCAxMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnB7ZmlsbDojZmZmO30NCjwvc3R5bGU+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik05MS42LDQzLjJjLTEuMi0xLjctMy0zLjctNC45LTUuNmMtMS45LTEuOS0zLjktMy42LTUuNi00LjljLTIuOS0yLjEtNC4zLTIuNC01LjEtMi40SDQ4LjUNCgkJYy0yLjUsMC00LjUsMi00LjUsNC41djQ4LjJjMCwyLjUsMiw0LjUsNC41LDQuNWg0MS4xYzIuNSwwLDQuNS0yLDQuNS00LjVWNDguM0M5NCw0Ny41LDkzLjgsNDYuMSw5MS42LDQzLjJ6IE04NC4zLDQwLjINCgkJYzEuNywxLjcsMy4xLDMuMyw0LjEsNC41aC04LjZ2LTguNkM4MSwzNy4xLDgyLjUsMzguNSw4NC4zLDQwLjJMODQuMyw0MC4yeiBNOTAuNCw4My4xYzAsMC41LTAuNCwwLjktMC45LDAuOUg0OC41DQoJCWMtMC41LDAtMC45LTAuNC0wLjktMC45VjM0LjljMC0wLjUsMC40LTAuOSwwLjktMC45YzAsMCwyNy43LDAsMjcuNywwdjEyLjVjMCwxLDAuOCwxLjgsMS44LDEuOGgxMi41VjgzLjF6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDc2LjloLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw3Ni4xLDgyLjUsNzYuOSw4MS41LDc2Ljl6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDY5LjdoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2OC45LDgyLjUsNjkuNyw4MS41LDY5Ljd6Ii8+DQoJPHBhdGggY2xhc3M9InAiIGQ9Ik04MS41LDYyLjZoLTI1Yy0xLDAtMS44LTAuOC0xLjgtMS44YzAtMSwwLjgtMS44LDEuOC0xLjhoMjVjMSwwLDEuOCwwLjgsMS44LDEuOA0KCQlDODMuMyw2MS44LDgyLjUsNjIuNiw4MS41LDYyLjZ6Ii8+DQo8L3N2Zz4="),n.find("img").css("background","#3f99d5")),n.data("file",e),e.element=n,d.fileRemoveBtn(i,e),c.state&&(e.newname=e.name,o.on(_.an.event[20],function(e){e.preventDefault(),$(this).select()}).on(_.an.event[18],function(){e.newname=$(this).val()})),s.before(n),window.setTimeout(function(){n.addClass(w("full-figure-on"))},150)}function f(e){var t=u.indexOf(e);u.splice(t,1),e.element.removeClass(w("full-figure-on")),window.setTimeout(function(){e.element.remove()},100),0===u.length&&(a.show(),r.hide(),l.hide())}function h(){r.children().not("["+w("add")+"]").remove(),a.show(),r.hide(),l.hide()}function g(e,t){var n=e.element.find(w("full-progress",1));n.css("width",t+"%"),n.html(t+"%")}function v(e){r.find("["+w("add")+"]").hide(),r.find(w("full-close",1)).hide(),r.find(w("full-figure input")).attr("readonly","readonly"),l.html("文件开始上传...")}function m(e,t){e?t.element.addClass("success"):t.element.addClass("fail"),y()}function b(){file.element.addClass("fail"),y()}function y(){n.getDoneNum()===u.length?l.html('<span class="c-success">全部文件已上传完毕，共 '+n.getDoneNum()+" 个"+(0!==n.getErrorNum()?"，失败 "+n.getErrorNum()+" 个":"")+"</span>"):l.html("已上传文件 "+n.getDoneNum()+" 个"+(0!==n.getErrorNum()?"，失败 "+n.getErrorNum()+" 个":""))}return d=i.style,c=i.getRenameState(),u=i.getUpfiles(),o=_.jqe[0].clone().addClass(w("full")),a=$('<div class="'+w("full-nofile")+'"><button class="btn btn-solid c-blue" ud2-file-add><i class="ico ico-group-file"></i> 添加文件</button><em>拖拽文件上传 / 长按CTRL键可多选上传</em></div>'),e=$('<div class="'+w("full-drag")+'">请松开鼠标按钮，文件将进入待上传队列</div>'),r=$('<div class="'+w("full-list")+'"><div class="'+w("full-add")+'" ud2-file-add><div><i class="ico ico-hollow-plus"></i><em>继续添加文件</em></div></div></div>'),l=$('<div class="'+w("full-tools")+'"><button class="btn btn-solid">确定上传</button><button class="btn btn-solid">清空列表</button></div>'),o.append(r).append(a).append(e).append(l),t=o.find("["+w("add")+"]"),s=r.find("["+w("add")+"]"),i.getContent().append(o),d.fileAddBtn(t).uploadBtn(l.children().eq(0)).clearBtn(l.children().eq(1)).fileAddFn(p).fileRemoveFn(f).clearFn(h).progressFn(g).uploadFn(v).doneFn(m).failFn(b),o.on("dragenter",function(){0===n.getUpState()&&o.addClass("ud2-file-full-dragenter")}),e.on("dragleave",function(){0===n.getUpState()&&o.removeClass("ud2-file-full-dragenter")}).on("dragover",function(e){0===n.getUpState()&&(e.preventDefault(),o.addClass("ud2-file-full-dragenter"))}).on("drop",function(e){if(0===n.getUpState()){e.preventDefault();var t=(e=e.originalEvent).dataTransfer&&e.dataTransfer.files||e.target&&e.target.files;d.filesHandler(t),o.removeClass("ud2-file-full-dragenter")}}),delete i.style,i}})});